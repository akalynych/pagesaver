<!-- https://www.youtube.com/watch?v=0dYPYAMxviw -->
<!DOCTYPE html>
<html lang='en' class=''>
<head>
<title>The PageSaver</title>
<style>

.footer {
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  /* padding: 1rem; */
  /* background-color: #efefef; */
  text-align: center;
}
</style>
<script src="data:application/javascript;base64,Im9iamVjdCI9PXR5cGVvZiBuYXZpZ2F0b3ImJmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoIlBseXIiLHQpOihlPWV8fHNlbGYpLlBseXI9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiB0KGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsInZhbHVlImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19ZnVuY3Rpb24gbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gYShlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXSxpPSEwLGE9ITEscz12b2lkIDA7dHJ5e2Zvcih2YXIgcixvPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0ocj1vLm5leHQoKSkuZG9uZSkmJihuLnB1c2goci52YWx1ZSksIXR8fG4ubGVuZ3RoIT09dCk7aT0hMCk7fWNhdGNoKGUpe2E9ITAscz1lfWZpbmFsbHl7dHJ5e2l8fG51bGw9PW8ucmV0dXJufHxvLnJldHVybigpfWZpbmFsbHl7aWYoYSl0aHJvdyBzfX1yZXR1cm4gbn0oZSx0KXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9KCl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAsbj1uZXcgQXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKW5bdF09ZVt0XTtyZXR1cm4gbn19KGUpfHxmdW5jdGlvbihlKXtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpfHwiW29iamVjdCBBcmd1bWVudHNdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX0oZSl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKX0oKX12YXIgcj17YWRkQ1NTOiEwLHRodW1iV2lkdGg6MTUsd2F0Y2g6ITB9O3ZhciBvPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP2UuY29uc3RydWN0b3I6bnVsbH0sbD1mdW5jdGlvbihlLHQpe3JldHVybiBCb29sZWFuKGUmJnQmJmUgaW5zdGFuY2VvZiB0KX0sYz1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZX0sdT1mdW5jdGlvbihlKXtyZXR1cm4gbyhlKT09PU9iamVjdH0sZD1mdW5jdGlvbihlKXtyZXR1cm4gbyhlKT09PVN0cmluZ30saD1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX0sbT1mdW5jdGlvbihlKXtyZXR1cm4gbChlLE5vZGVMaXN0KX0scD17bnVsbE9yVW5kZWZpbmVkOmMsb2JqZWN0OnUsbnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiBvKGUpPT09TnVtYmVyJiYhTnVtYmVyLmlzTmFOKGUpfSxzdHJpbmc6ZCxib29sZWFuOmZ1bmN0aW9uKGUpe3JldHVybiBvKGUpPT09Qm9vbGVhbn0sZnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSk9PT1GdW5jdGlvbn0sYXJyYXk6aCxub2RlTGlzdDptLGVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGwoZSxFbGVtZW50KX0sZXZlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGwoZSxFdmVudCl9LGVtcHR5OmZ1bmN0aW9uKGUpe3JldHVybiBjKGUpfHwoZChlKXx8aChlKXx8bShlKSkmJiFlLmxlbmd0aHx8dShlKSYmIU9iamVjdC5rZXlzKGUpLmxlbmd0aH19O2Z1bmN0aW9uIGYoZSx0KXtpZih0PDEpe3ZhciBuPShpPSIiLmNvbmNhdCh0KS5tYXRjaCgvKD86XC4oXGQrKSk/KD86W2VFXShbKy1dP1xkKykpPyQvKSk/TWF0aC5tYXgoMCwoaVsxXT9pWzFdLmxlbmd0aDowKS0oaVsyXT8raVsyXTowKSk6MDtyZXR1cm4gcGFyc2VGbG9hdChlLnRvRml4ZWQobikpfXZhciBpO3JldHVybiBNYXRoLnJvdW5kKGUvdCkqdH12YXIgZyx5LHYsYj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQobixpKXtlKHRoaXMsdCkscC5lbGVtZW50KG4pP3RoaXMuZWxlbWVudD1uOnAuc3RyaW5nKG4pJiYodGhpcy5lbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobikpLHAuZWxlbWVudCh0aGlzLmVsZW1lbnQpJiZwLmVtcHR5KHRoaXMuZWxlbWVudC5yYW5nZVRvdWNoKSYmKHRoaXMuY29uZmlnPU9iamVjdC5hc3NpZ24oe30scixpKSx0aGlzLmluaXQoKSl9cmV0dXJuIG4odCxbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt0LmVuYWJsZWQmJih0aGlzLmNvbmZpZy5hZGRDU1MmJih0aGlzLmVsZW1lbnQuc3R5bGUudXNlclNlbGVjdD0ibm9uZSIsdGhpcy5lbGVtZW50LnN0eWxlLndlYktpdFVzZXJTZWxlY3Q9Im5vbmUiLHRoaXMuZWxlbWVudC5zdHlsZS50b3VjaEFjdGlvbj0ibWFuaXB1bGF0aW9uIiksdGhpcy5saXN0ZW5lcnMoITApLHRoaXMuZWxlbWVudC5yYW5nZVRvdWNoPXRoaXMpfX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0LmVuYWJsZWQmJih0aGlzLmxpc3RlbmVycyghMSksdGhpcy5lbGVtZW50LnJhbmdlVG91Y2g9bnVsbCl9fSx7a2V5OiJsaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lPyJhZGRFdmVudExpc3RlbmVyIjoicmVtb3ZlRXZlbnRMaXN0ZW5lciI7WyJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuZWxlbWVudFtuXShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnNldChlKX0sITEpfSl9fSx7a2V5OiJnZXQiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCF0LmVuYWJsZWR8fCFwLmV2ZW50KGUpKXJldHVybiBudWxsO3ZhciBuLGk9ZS50YXJnZXQsYT1lLmNoYW5nZWRUb3VjaGVzWzBdLHM9cGFyc2VGbG9hdChpLmdldEF0dHJpYnV0ZSgibWluIikpfHwwLHI9cGFyc2VGbG9hdChpLmdldEF0dHJpYnV0ZSgibWF4IikpfHwxMDAsbz1wYXJzZUZsb2F0KGkuZ2V0QXR0cmlidXRlKCJzdGVwIikpfHwxLGw9ci1zLGM9aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx1PTEwMC9jLndpZHRoKih0aGlzLmNvbmZpZy50aHVtYldpZHRoLzIpLzEwMDtyZXR1cm4obj0xMDAvYy53aWR0aCooYS5jbGllbnRYLWMubGVmdCkpPDA/bj0wOm4+MTAwJiYobj0xMDApLG48NTA/bi09KDEwMC0yKm4pKnU6bj41MCYmKG4rPTIqKG4tNTApKnUpLHMrZihsKihuLzEwMCksbyl9fSx7a2V5OiJzZXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3QuZW5hYmxlZCYmcC5ldmVudChlKSYmIWUudGFyZ2V0LmRpc2FibGVkJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUudGFyZ2V0LnZhbHVlPXRoaXMuZ2V0KGUpLGZ1bmN0aW9uKGUsdCl7aWYoZSYmdCl7dmFyIG49bmV3IEV2ZW50KHQpO2UuZGlzcGF0Y2hFdmVudChuKX19KGUudGFyZ2V0LCJ0b3VjaGVuZCI9PT1lLnR5cGU/ImNoYW5nZSI6ImlucHV0IikpfX1dLFt7a2V5OiJzZXR1cCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9bnVsbDtpZihwLmVtcHR5KGUpfHxwLnN0cmluZyhlKT9pPUFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChwLnN0cmluZyhlKT9lOidpbnB1dFt0eXBlPSJyYW5nZSJdJykpOnAuZWxlbWVudChlKT9pPVtlXTpwLm5vZGVMaXN0KGUpP2k9QXJyYXkuZnJvbShlKTpwLmFycmF5KGUpJiYoaT1lLmZpbHRlcihwLmVsZW1lbnQpKSxwLmVtcHR5KGkpKXJldHVybiBudWxsO3ZhciBhPU9iamVjdC5hc3NpZ24oe30scixuKTtwLnN0cmluZyhlKSYmYS53YXRjaCYmbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obil7QXJyYXkuZnJvbShuKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe0FycmF5LmZyb20obi5hZGRlZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKHAuZWxlbWVudChuKSYmZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGkpKS5pbmNsdWRlcyh0aGlzKX0uY2FsbChuLGk9ZSkpe3ZhciBpO25ldyB0KG4sYSl9fSl9KX0pLm9ic2VydmUoZG9jdW1lbnQuYm9keSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KTtyZXR1cm4gaS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUsbil9KX19LHtrZXk6ImVuYWJsZWQiLGdldDpmdW5jdGlvbigpe3JldHVybiJvbnRvdWNoc3RhcnQiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fX1dKSx0fSgpLGs9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/ZS5jb25zdHJ1Y3RvcjpudWxsfSx3PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEJvb2xlYW4oZSYmdCYmZSBpbnN0YW5jZW9mIHQpfSxUPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lfSxDPWZ1bmN0aW9uKGUpe3JldHVybiBrKGUpPT09T2JqZWN0fSxBPWZ1bmN0aW9uKGUpe3JldHVybiBrKGUpPT09U3RyaW5nfSxFPWZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpfSxTPWZ1bmN0aW9uKGUpe3JldHVybiB3KGUsTm9kZUxpc3QpfSxQPWZ1bmN0aW9uKGUpe3JldHVybiBUKGUpfHwoQShlKXx8RShlKXx8UyhlKSkmJiFlLmxlbmd0aHx8QyhlKSYmIU9iamVjdC5rZXlzKGUpLmxlbmd0aH0sTj17bnVsbE9yVW5kZWZpbmVkOlQsb2JqZWN0OkMsbnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiBrKGUpPT09TnVtYmVyJiYhTnVtYmVyLmlzTmFOKGUpfSxzdHJpbmc6QSxib29sZWFuOmZ1bmN0aW9uKGUpe3JldHVybiBrKGUpPT09Qm9vbGVhbn0sZnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGsoZSk9PT1GdW5jdGlvbn0sYXJyYXk6RSx3ZWFrTWFwOmZ1bmN0aW9uKGUpe3JldHVybiB3KGUsV2Vha01hcCl9LG5vZGVMaXN0OlMsZWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm4gdyhlLEVsZW1lbnQpfSx0ZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gayhlKT09PVRleHR9LGV2ZW50OmZ1bmN0aW9uKGUpe3JldHVybiB3KGUsRXZlbnQpfSxrZXlib2FyZEV2ZW50OmZ1bmN0aW9uKGUpe3JldHVybiB3KGUsS2V5Ym9hcmRFdmVudCl9LGN1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdyhlLHdpbmRvdy5UZXh0VHJhY2tDdWUpfHx3KGUsd2luZG93LlZUVEN1ZSl9LHRyYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB3KGUsVGV4dFRyYWNrKXx8IVQoZSkmJkEoZS5raW5kKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gdyhlLFByb21pc2UpfSx1cmw6ZnVuY3Rpb24oZSl7aWYodyhlLHdpbmRvdy5VUkwpKXJldHVybiEwO2lmKCFBKGUpKXJldHVybiExO3ZhciB0PWU7ZS5zdGFydHNXaXRoKCJodHRwOi8vIikmJmUuc3RhcnRzV2l0aCgiaHR0cHM6Ly8iKXx8KHQ9Imh0dHA6Ly8iLmNvbmNhdChlKSk7dHJ5e3JldHVybiFQKG5ldyBVUkwodCkuaG9zdG5hbWUpfWNhdGNoKGUpe3JldHVybiExfX0sZW1wdHk6UH0sTT0oZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIikseT17V2Via2l0VHJhbnNpdGlvbjoid2Via2l0VHJhbnNpdGlvbkVuZCIsTW96VHJhbnNpdGlvbjoidHJhbnNpdGlvbmVuZCIsT1RyYW5zaXRpb246Im9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kIix0cmFuc2l0aW9uOiJ0cmFuc2l0aW9uZW5kIn0sdj1PYmplY3Qua2V5cyh5KS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1nLnN0eWxlW2VdfSksISFOLnN0cmluZyh2KSYmeVt2XSk7ZnVuY3Rpb24geChlLHQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7ZS5oaWRkZW49ITAsZS5vZmZzZXRIZWlnaHQsZS5oaWRkZW49ITF9Y2F0Y2goZSl7fX0sdCl9dmFyIEw9e2lzSUU6ISFkb2N1bWVudC5kb2N1bWVudE1vZGUsaXNFZGdlOndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCJFZGdlIiksaXNXZWJraXQ6IldlYmtpdEFwcGVhcmFuY2UiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlJiYhL0VkZ2UvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNJUGhvbmU6LyhpUGhvbmV8aVBvZCkvZ2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pLGlzSW9zOi8oaVBhZHxpUGhvbmV8aVBvZCkvZ2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pfSxJPWZ1bmN0aW9uKCl7dmFyIGU9ITE7dHJ5e3ZhciB0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwicGFzc2l2ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiBlPSEwLG51bGx9fSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRlc3QiLG51bGwsdCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRlc3QiLG51bGwsdCl9Y2F0Y2goZSl7fXJldHVybiBlfSgpO2Z1bmN0aW9uIF8oZSx0LG4pe3ZhciBpPXRoaXMsYT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdLHM9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxyPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdJiZhcmd1bWVudHNbNV07aWYoZSYmImFkZEV2ZW50TGlzdGVuZXIiaW4gZSYmIU4uZW1wdHkodCkmJk4uZnVuY3Rpb24obikpe3ZhciBvPXQuc3BsaXQoIiAiKSxsPXI7SSYmKGw9e3Bhc3NpdmU6cyxjYXB0dXJlOnJ9KSxvLmZvckVhY2goZnVuY3Rpb24odCl7aSYmaS5ldmVudExpc3RlbmVycyYmYSYmaS5ldmVudExpc3RlbmVycy5wdXNoKHtlbGVtZW50OmUsdHlwZTp0LGNhbGxiYWNrOm4sb3B0aW9uczpsfSksZVthPyJhZGRFdmVudExpc3RlbmVyIjoicmVtb3ZlRXZlbnRMaXN0ZW5lciJdKHQsbixsKX0pfX1mdW5jdGlvbiBPKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToiIixuPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxhPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF07Xy5jYWxsKHRoaXMsZSx0LG4sITAsaSxhKX1mdW5jdGlvbiBqKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToiIixuPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxhPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF07Xy5jYWxsKHRoaXMsZSx0LG4sITEsaSxhKX1mdW5jdGlvbiBxKGUpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06IiIsaT1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxhPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10scz1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSYmYXJndW1lbnRzWzRdO18uY2FsbCh0aGlzLGUsbixmdW5jdGlvbiByKCl7aihlLG4scixhLHMpO2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLGw9bmV3IEFycmF5KG8pLGM9MDtjPG87YysrKWxbY109YXJndW1lbnRzW2NdO2kuYXBwbHkodCxsKX0sITAsYSxzKX1mdW5jdGlvbiBIKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToiIixuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl0saT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106e307aWYoTi5lbGVtZW50KGUpJiYhTi5lbXB0eSh0KSl7dmFyIGE9bmV3IEN1c3RvbUV2ZW50KHQse2J1YmJsZXM6bixkZXRhaWw6T2JqZWN0LmFzc2lnbih7fSxpLHtwbHlyOnRoaXN9KX0pO2UuZGlzcGF0Y2hFdmVudChhKX19ZnVuY3Rpb24gRChlLHQpe3JldHVybiB0LnNwbGl0KCIuIikucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmVbdF19LGUpfWZ1bmN0aW9uIEYoKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheSh0PjE/dC0xOjApLGE9MTthPHQ7YSsrKW5bYS0xXT1hcmd1bWVudHNbYV07aWYoIW4ubGVuZ3RoKXJldHVybiBlO3ZhciBzPW4uc2hpZnQoKTtyZXR1cm4gTi5vYmplY3Qocyk/KE9iamVjdC5rZXlzKHMpLmZvckVhY2goZnVuY3Rpb24odCl7Ti5vYmplY3Qoc1t0XSk/KE9iamVjdC5rZXlzKGUpLmluY2x1ZGVzKHQpfHxPYmplY3QuYXNzaWduKGUsaSh7fSx0LHt9KSksRihlW3RdLHNbdF0pKTpPYmplY3QuYXNzaWduKGUsaSh7fSx0LHNbdF0pKX0pLEYuYXBwbHkodm9pZCAwLFtlXS5jb25jYXQobikpKTplfWZ1bmN0aW9uIFIoZSx0KXt2YXIgbj1lLmxlbmd0aD9lOltlXTtBcnJheS5mcm9tKG4pLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7dmFyIGk9bj4wP3QuY2xvbmVOb2RlKCEwKTp0LGE9ZS5wYXJlbnROb2RlLHM9ZS5uZXh0U2libGluZztpLmFwcGVuZENoaWxkKGUpLHM/YS5pbnNlcnRCZWZvcmUoaSxzKTphLmFwcGVuZENoaWxkKGkpfSl9ZnVuY3Rpb24gVihlLHQpe04uZWxlbWVudChlKSYmIU4uZW1wdHkodCkmJk9iamVjdC5lbnRyaWVzKHQpLmZpbHRlcihmdW5jdGlvbihlKXt2YXIgdD1hKGUsMilbMV07cmV0dXJuIU4ubnVsbE9yVW5kZWZpbmVkKHQpfSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1hKHQsMiksaT1uWzBdLHM9blsxXTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoaSxzKX0pfWZ1bmN0aW9uIEIoZSx0LG4pe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSk7cmV0dXJuIE4ub2JqZWN0KHQpJiZWKGksdCksTi5zdHJpbmcobikmJihpLmlubmVyVGV4dD1uKSxpfWZ1bmN0aW9uIFUoZSx0LG4saSl7Ti5lbGVtZW50KHQpJiZ0LmFwcGVuZENoaWxkKEIoZSxuLGkpKX1mdW5jdGlvbiBXKGUpe04ubm9kZUxpc3QoZSl8fE4uYXJyYXkoZSk/QXJyYXkuZnJvbShlKS5mb3JFYWNoKFcpOk4uZWxlbWVudChlKSYmTi5lbGVtZW50KGUucGFyZW50Tm9kZSkmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKX1mdW5jdGlvbiB6KGUpe2lmKE4uZWxlbWVudChlKSlmb3IodmFyIHQ9ZS5jaGlsZE5vZGVzLmxlbmd0aDt0PjA7KWUucmVtb3ZlQ2hpbGQoZS5sYXN0Q2hpbGQpLHQtPTF9ZnVuY3Rpb24gSyhlLHQpe3JldHVybiBOLmVsZW1lbnQodCkmJk4uZWxlbWVudCh0LnBhcmVudE5vZGUpJiZOLmVsZW1lbnQoZSk/KHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSx0KSxlKTpudWxsfWZ1bmN0aW9uIFkoZSx0KXtpZighTi5zdHJpbmcoZSl8fE4uZW1wdHkoZSkpcmV0dXJue307dmFyIG49e30saT1GKHt9LHQpO3JldHVybiBlLnNwbGl0KCIsIikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLnRyaW0oKSxzPXQucmVwbGFjZSgiLiIsIiIpLHI9dC5yZXBsYWNlKC9bW1xdXS9nLCIiKS5zcGxpdCgiPSIpLG89YShyLDEpWzBdLGw9ci5sZW5ndGg+MT9yWzFdLnJlcGxhY2UoL1siJ10vZywiIik6IiI7c3dpdGNoKHQuY2hhckF0KDApKXtjYXNlIi4iOk4uc3RyaW5nKGkuY2xhc3MpP24uY2xhc3M9IiIuY29uY2F0KGkuY2xhc3MsIiAiKS5jb25jYXQocyk6bi5jbGFzcz1zO2JyZWFrO2Nhc2UiIyI6bi5pZD10LnJlcGxhY2UoIiMiLCIiKTticmVhaztjYXNlIlsiOm5bb109bH19KSxGKGksbil9ZnVuY3Rpb24gUShlLHQpe2lmKE4uZWxlbWVudChlKSl7dmFyIG49dDtOLmJvb2xlYW4obil8fChuPSFlLmhpZGRlbiksZS5oaWRkZW49bn19ZnVuY3Rpb24gWChlLHQsbil7aWYoTi5ub2RlTGlzdChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIFgoZSx0LG4pfSk7aWYoTi5lbGVtZW50KGUpKXt2YXIgaT0idG9nZ2xlIjtyZXR1cm4gdm9pZCAwIT09biYmKGk9bj8iYWRkIjoicmVtb3ZlIiksZS5jbGFzc0xpc3RbaV0odCksZS5jbGFzc0xpc3QuY29udGFpbnModCl9cmV0dXJuITF9ZnVuY3Rpb24gSihlLHQpe3JldHVybiBOLmVsZW1lbnQoZSkmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKHQpfWZ1bmN0aW9uICQoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKS5pbmNsdWRlcyh0aGlzKX0uY2FsbChlLHQpfWZ1bmN0aW9uIEcoZSl7cmV0dXJuIHRoaXMuZWxlbWVudHMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoZSl9ZnVuY3Rpb24gWihlKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5jb250YWluZXIucXVlcnlTZWxlY3RvcihlKX1mdW5jdGlvbiBlZSgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtOLmVsZW1lbnQoZSkmJihlLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSksdCYmWChlLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXMpKX12YXIgdGUsbmU9eyJhdWRpby9vZ2ciOiJ2b3JiaXMiLCJhdWRpby93YXYiOiIxIiwidmlkZW8vd2VibSI6InZwOCwgdm9yYmlzIiwidmlkZW8vbXA0IjoiYXZjMS40MkUwMUUsIG1wNGEuNDAuMiIsInZpZGVvL29nZyI6InRoZW9yYSJ9LGllPXthdWRpbzoiY2FuUGxheVR5cGUiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSx2aWRlbzoiY2FuUGxheVR5cGUiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKSxjaGVjazpmdW5jdGlvbihlLHQsbil7dmFyIGk9TC5pc0lQaG9uZSYmbiYmaWUucGxheXNpbmxpbmUsYT1pZVtlXXx8Imh0bWw1IiE9PXQ7cmV0dXJue2FwaTphLHVpOmEmJmllLnJhbmdlSW5wdXQmJigidmlkZW8iIT09ZXx8IUwuaXNJUGhvbmV8fGkpfX0scGlwOiEoTC5pc0lQaG9uZXx8IU4uZnVuY3Rpb24oQigidmlkZW8iKS53ZWJraXRTZXRQcmVzZW50YXRpb25Nb2RlKSYmKCFkb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRW5hYmxlZHx8QigidmlkZW8iKS5kaXNhYmxlUGljdHVyZUluUGljdHVyZSkpLGFpcnBsYXk6Ti5mdW5jdGlvbih3aW5kb3cuV2ViS2l0UGxheWJhY2tUYXJnZXRBdmFpbGFiaWxpdHlFdmVudCkscGxheXNpbmxpbmU6InBsYXlzSW5saW5lImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInZpZGVvIiksbWltZTpmdW5jdGlvbihlKXtpZihOLmVtcHR5KGUpKXJldHVybiExO3ZhciB0PWEoZS5zcGxpdCgiLyIpLDEpWzBdLG49ZTtpZighdGhpcy5pc0hUTUw1fHx0IT09dGhpcy50eXBlKXJldHVybiExO09iamVjdC5rZXlzKG5lKS5pbmNsdWRlcyhuKSYmKG4rPSc7IGNvZGVjcz0iJy5jb25jYXQobmVbZV0sJyInKSk7dHJ5e3JldHVybiBCb29sZWFuKG4mJnRoaXMubWVkaWEuY2FuUGxheVR5cGUobikucmVwbGFjZSgvbm8vLCIiKSl9Y2F0Y2goZSl7cmV0dXJuITF9fSx0ZXh0VHJhY2tzOiJ0ZXh0VHJhY2tzImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInZpZGVvIikscmFuZ2VJbnB1dDoodGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSx0ZS50eXBlPSJyYW5nZSIsInJhbmdlIj09PXRlLnR5cGUpLHRvdWNoOiJvbnRvdWNoc3RhcnQiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRyYW5zaXRpb25zOiExIT09TSxyZWR1Y2VkTW90aW9uOiJtYXRjaE1lZGlhImluIHdpbmRvdyYmd2luZG93Lm1hdGNoTWVkaWEoIihwcmVmZXJzLXJlZHVjZWQtbW90aW9uKSIpLm1hdGNoZXN9O2Z1bmN0aW9uIGFlKGUpe3JldHVybiEhKE4uYXJyYXkoZSl8fE4uc3RyaW5nKGUpJiZlLmluY2x1ZGVzKCI6IikpJiYoTi5hcnJheShlKT9lOmUuc3BsaXQoIjoiKSkubWFwKE51bWJlcikuZXZlcnkoTi5udW1iZXIpfWZ1bmN0aW9uIHNlKGUpe2lmKCFOLmFycmF5KGUpfHwhZS5ldmVyeShOLm51bWJlcikpcmV0dXJuIG51bGw7dmFyIHQ9YShlLDIpLG49dFswXSxpPXRbMV0scz1mdW5jdGlvbiBlKHQsbil7cmV0dXJuIDA9PT1uP3Q6ZShuLHQlbil9KG4saSk7cmV0dXJuW24vcyxpL3NdfWZ1bmN0aW9uIHJlKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe3JldHVybiBhZShlKT9lLnNwbGl0KCI6IikubWFwKE51bWJlcik6bnVsbH0sbj10KGUpO2lmKG51bGw9PT1uJiYobj10KHRoaXMuY29uZmlnLnJhdGlvKSksbnVsbD09PW4mJiFOLmVtcHR5KHRoaXMuZW1iZWQpJiZOLmFycmF5KHRoaXMuZW1iZWQucmF0aW8pJiYobj10aGlzLmVtYmVkLnJhdGlvKSxudWxsPT09biYmdGhpcy5pc0hUTUw1KXt2YXIgaT10aGlzLm1lZGlhO249c2UoW2kudmlkZW9XaWR0aCxpLnZpZGVvSGVpZ2h0XSl9cmV0dXJuIG59ZnVuY3Rpb24gb2UoZSl7aWYoIXRoaXMuaXNWaWRlbylyZXR1cm57fTt2YXIgdD1yZS5jYWxsKHRoaXMsZSksbj1hKE4uYXJyYXkodCk/dDpbMCwwXSwyKSxpPTEwMC9uWzBdKm5bMV07aWYodGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlLnBhZGRpbmdCb3R0b209IiIuY29uY2F0KGksIiUiKSx0aGlzLmlzVmltZW8mJnRoaXMuc3VwcG9ydGVkLnVpKXt2YXIgcz0oMjQwLWkpLzQuODt0aGlzLm1lZGlhLnN0eWxlLnRyYW5zZm9ybT0idHJhbnNsYXRlWSgtIi5jb25jYXQocywiJSkiKX1lbHNlIHRoaXMuaXNIVE1MNSYmdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsYXNzTGlzdC50b2dnbGUodGhpcy5jb25maWcuY2xhc3NOYW1lcy52aWRlb0ZpeGVkUmF0aW8sbnVsbCE9PXQpO3JldHVybntwYWRkaW5nOmkscmF0aW86dH19dmFyIGxlPXtnZXRTb3VyY2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5pc0hUTUw1P0FycmF5LmZyb20odGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yQWxsKCJzb3VyY2UiKSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3ZhciBuPXQuZ2V0QXR0cmlidXRlKCJ0eXBlIik7cmV0dXJuISFOLmVtcHR5KG4pfHxpZS5taW1lLmNhbGwoZSxuKX0pOltdfSxnZXRRdWFsaXR5T3B0aW9uczpmdW5jdGlvbigpe3JldHVybiBsZS5nZXRTb3VyY2VzLmNhbGwodGhpcykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZS5nZXRBdHRyaWJ1dGUoInNpemUiKSl9KS5maWx0ZXIoQm9vbGVhbil9LGV4dGVuZDpmdW5jdGlvbigpe2lmKHRoaXMuaXNIVE1MNSl7dmFyIGU9dGhpcztOLmVtcHR5KHRoaXMuY29uZmlnLnJhdGlvKXx8b2UuY2FsbChlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5tZWRpYSwicXVhbGl0eSIse2dldDpmdW5jdGlvbigpe3ZhciB0PWxlLmdldFNvdXJjZXMuY2FsbChlKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldEF0dHJpYnV0ZSgic3JjIik9PT1lLnNvdXJjZX0pO3JldHVybiB0JiZOdW1iZXIodC5nZXRBdHRyaWJ1dGUoInNpemUiKSl9LHNldDpmdW5jdGlvbih0KXt2YXIgbj1sZS5nZXRTb3VyY2VzLmNhbGwoZSkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKGUuZ2V0QXR0cmlidXRlKCJzaXplIikpPT09dH0pO2lmKG4pe3ZhciBpPWUubWVkaWEsYT1pLmN1cnJlbnRUaW1lLHM9aS5wYXVzZWQscj1pLnByZWxvYWQsbz1pLnJlYWR5U3RhdGU7ZS5tZWRpYS5zcmM9bi5nZXRBdHRyaWJ1dGUoInNyYyIpLCgibm9uZSIhPT1yfHxvKSYmKGUub25jZSgibG9hZGVkbWV0YWRhdGEiLGZ1bmN0aW9uKCl7ZS5jdXJyZW50VGltZT1hLHN8fGUucGxheSgpfSksZS5tZWRpYS5sb2FkKCkpLEguY2FsbChlLGUubWVkaWEsInF1YWxpdHljaGFuZ2UiLCExLHtxdWFsaXR5OnR9KX19fSl9fSxjYW5jZWxSZXF1ZXN0czpmdW5jdGlvbigpe3RoaXMuaXNIVE1MNSYmKFcobGUuZ2V0U291cmNlcy5jYWxsKHRoaXMpKSx0aGlzLm1lZGlhLnNldEF0dHJpYnV0ZSgic3JjIix0aGlzLmNvbmZpZy5ibGFua1ZpZGVvKSx0aGlzLm1lZGlhLmxvYWQoKSx0aGlzLmRlYnVnLmxvZygiQ2FuY2VsbGVkIG5ldHdvcmsgcmVxdWVzdHMiKSl9fTtmdW5jdGlvbiBjZShlKXtyZXR1cm4gTi5hcnJheShlKT9lLmZpbHRlcihmdW5jdGlvbih0LG4pe3JldHVybiBlLmluZGV4T2YodCk9PT1ufSk6ZX1mdW5jdGlvbiB1ZShlKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheSh0PjE/dC0xOjApLGk9MTtpPHQ7aSsrKW5baS0xXT1hcmd1bWVudHNbaV07cmV0dXJuIE4uZW1wdHkoZSk/ZTplLnRvU3RyaW5nKCkucmVwbGFjZSgveyhcZCspfS9nLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5bdF0udG9TdHJpbmcoKX0pfWZ1bmN0aW9uIGRlKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiIiLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiIiLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOiIiO3JldHVybiBlLnJlcGxhY2UobmV3IFJlZ0V4cCh0LnRvU3RyaW5nKCkucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXVwvXFxdKS9nLCJcXCQxIiksImciKSxuLnRvU3RyaW5nKCkpfWZ1bmN0aW9uIGhlKCl7cmV0dXJuKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiIikudG9TdHJpbmcoKS5yZXBsYWNlKC9cd1xTKi9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBtZSgpe3ZhciBlPShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06IiIpLnRvU3RyaW5nKCk7cmV0dXJuKGU9ZnVuY3Rpb24oKXt2YXIgZT0oYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiIiKS50b1N0cmluZygpO3JldHVybiBlPWRlKGUsIi0iLCIgIiksZT1kZShlLCJfIiwiICIpLGRlKGU9aGUoZSksIiAiLCIiKX0oZSkpLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK2Uuc2xpY2UoMSl9ZnVuY3Rpb24gcGUoZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoZSksdC5pbm5lckhUTUx9dmFyIGZlPXtwaXA6IlBJUCIsYWlycGxheToiQWlyUGxheSIsaHRtbDU6IkhUTUw1Iix2aW1lbzoiVmltZW8iLHlvdXR1YmU6IllvdVR1YmUifSxnZT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiIix0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihOLmVtcHR5KGUpfHxOLmVtcHR5KHQpKXJldHVybiIiO3ZhciBuPUQodC5pMThuLGUpO2lmKE4uZW1wdHkobikpcmV0dXJuIE9iamVjdC5rZXlzKGZlKS5pbmNsdWRlcyhlKT9mZVtlXToiIjt2YXIgaT17IntzZWVrdGltZX0iOnQuc2Vla1RpbWUsInt0aXRsZX0iOnQudGl0bGV9O3JldHVybiBPYmplY3QuZW50cmllcyhpKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWEoZSwyKSxpPXRbMF0scz10WzFdO249ZGUobixpLHMpfSksbn0seWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KG4pe2UodGhpcyx0KSx0aGlzLmVuYWJsZWQ9bi5jb25maWcuc3RvcmFnZS5lbmFibGVkLHRoaXMua2V5PW4uY29uZmlnLnN0b3JhZ2Uua2V5fXJldHVybiBuKHQsW3trZXk6ImdldCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIXQuc3VwcG9ydGVkfHwhdGhpcy5lbmFibGVkKXJldHVybiBudWxsO3ZhciBuPXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmtleSk7aWYoTi5lbXB0eShuKSlyZXR1cm4gbnVsbDt2YXIgaT1KU09OLnBhcnNlKG4pO3JldHVybiBOLnN0cmluZyhlKSYmZS5sZW5ndGg/aVtlXTppfX0se2tleToic2V0Iix2YWx1ZTpmdW5jdGlvbihlKXtpZih0LnN1cHBvcnRlZCYmdGhpcy5lbmFibGVkJiZOLm9iamVjdChlKSl7dmFyIG49dGhpcy5nZXQoKTtOLmVtcHR5KG4pJiYobj17fSksRihuLGUpLHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmtleSxKU09OLnN0cmluZ2lmeShuKSl9fX1dLFt7a2V5OiJzdXBwb3J0ZWQiLGdldDpmdW5jdGlvbigpe3RyeXtpZighKCJsb2NhbFN0b3JhZ2UiaW4gd2luZG93KSlyZXR1cm4hMTtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJfX190ZXN0IiwiX19fdGVzdCIpLHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiX19fdGVzdCIpLCEwfWNhdGNoKGUpe3JldHVybiExfX19XSksdH0oKTtmdW5jdGlvbiB2ZShlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06InRleHQiO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3RyeXt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoISgid2l0aENyZWRlbnRpYWxzImluIGEpKXJldHVybjthLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGZ1bmN0aW9uKCl7aWYoInRleHQiPT09dCl0cnl7bihKU09OLnBhcnNlKGEucmVzcG9uc2VUZXh0KSl9Y2F0Y2goZSl7bihhLnJlc3BvbnNlVGV4dCl9ZWxzZSBuKGEucmVzcG9uc2UpfSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoYS5zdGF0dXMpfSksYS5vcGVuKCJHRVQiLGUsITApLGEucmVzcG9uc2VUeXBlPXQsYS5zZW5kKCl9Y2F0Y2goZSl7aShlKX19KX1mdW5jdGlvbiBiZShlLHQpe2lmKE4uc3RyaW5nKGUpKXt2YXIgbj1OLnN0cmluZyh0KSxpPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KX0sYT1mdW5jdGlvbihlLHQpe2UuaW5uZXJIVE1MPXQsbiYmaSgpfHxkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIsZSl9O2lmKCFufHwhaSgpKXt2YXIgcz15ZS5zdXBwb3J0ZWQscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihyLnNldEF0dHJpYnV0ZSgiaGlkZGVuIiwiIiksbiYmci5zZXRBdHRyaWJ1dGUoImlkIix0KSxzKXt2YXIgbz13aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIiIuY29uY2F0KCJjYWNoZSIsIi0iKS5jb25jYXQodCkpO2lmKG51bGwhPT1vKXt2YXIgbD1KU09OLnBhcnNlKG8pO2EocixsLmNvbnRlbnQpfX12ZShlKS50aGVuKGZ1bmN0aW9uKGUpe04uZW1wdHkoZSl8fChzJiZ3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oIiIuY29uY2F0KCJjYWNoZSIsIi0iKS5jb25jYXQodCksSlNPTi5zdHJpbmdpZnkoe2NvbnRlbnQ6ZX0pKSxhKHIsZSkpfSkuY2F0Y2goZnVuY3Rpb24oKXt9KX19fXZhciBrZT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC50cnVuYyhlLzYwLzYwJTYwLDEwKX0sd2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgudHJ1bmMoZS82MCU2MCwxMCl9LFRlPWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnRydW5jKGUlNjAsMTApfTtmdW5jdGlvbiBDZSgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07aWYoIU4ubnVtYmVyKGUpKXJldHVybiBDZShudWxsLHQsbik7dmFyIGk9ZnVuY3Rpb24oZSl7cmV0dXJuIjAiLmNvbmNhdChlKS5zbGljZSgtMil9LGE9a2UoZSkscz13ZShlKSxyPVRlKGUpO3JldHVybiBhPXR8fGE+MD8iIi5jb25jYXQoYSwiOiIpOiIiLCIiLmNvbmNhdChuJiZlPjA/Ii0iOiIiKS5jb25jYXQoYSkuY29uY2F0KGkocyksIjoiKS5jb25jYXQoaShyKSl9dmFyIEFlPXtnZXRJY29uVXJsOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVSTCh0aGlzLmNvbmZpZy5pY29uVXJsLHdpbmRvdy5sb2NhdGlvbikuaG9zdCE9PXdpbmRvdy5sb2NhdGlvbi5ob3N0fHxMLmlzSUUmJiF3aW5kb3cuc3ZnNGV2ZXJ5Ym9keTtyZXR1cm57dXJsOnRoaXMuY29uZmlnLmljb25VcmwsY29yczplfX0sZmluZEVsZW1lbnRzOmZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVsZW1lbnRzLmNvbnRyb2xzPVouY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy53cmFwcGVyKSx0aGlzLmVsZW1lbnRzLmJ1dHRvbnM9e3BsYXk6Ry5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGxheSkscGF1c2U6Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucGF1c2UpLHJlc3RhcnQ6Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMucmVzdGFydCkscmV3aW5kOlouY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnJld2luZCksZmFzdEZvcndhcmQ6Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZmFzdEZvcndhcmQpLG11dGU6Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMubXV0ZSkscGlwOlouY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zLnBpcCksYWlycGxheTpaLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5haXJwbGF5KSxzZXR0aW5nczpaLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuYnV0dG9ucy5zZXR0aW5ncyksY2FwdGlvbnM6Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuY2FwdGlvbnMpLGZ1bGxzY3JlZW46Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuZnVsbHNjcmVlbil9LHRoaXMuZWxlbWVudHMucHJvZ3Jlc3M9Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLnByb2dyZXNzKSx0aGlzLmVsZW1lbnRzLmlucHV0cz17c2VlazpaLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnNlZWspLHZvbHVtZTpaLmNhbGwodGhpcyx0aGlzLmNvbmZpZy5zZWxlY3RvcnMuaW5wdXRzLnZvbHVtZSl9LHRoaXMuZWxlbWVudHMuZGlzcGxheT17YnVmZmVyOlouY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5kaXNwbGF5LmJ1ZmZlciksY3VycmVudFRpbWU6Wi5jYWxsKHRoaXMsdGhpcy5jb25maWcuc2VsZWN0b3JzLmRpc3BsYXkuY3VycmVudFRpbWUpLGR1cmF0aW9uOlouY2FsbCh0aGlzLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5kaXNwbGF5LmR1cmF0aW9uKX0sTi5lbGVtZW50KHRoaXMuZWxlbWVudHMucHJvZ3Jlc3MpJiYodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwPXRoaXMuZWxlbWVudHMucHJvZ3Jlc3MucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudG9vbHRpcCkpKSwhMH1jYXRjaChlKXtyZXR1cm4gdGhpcy5kZWJ1Zy53YXJuKCJJdCBsb29rcyBsaWtlIHRoZXJlIGlzIGEgcHJvYmxlbSB3aXRoIHlvdXIgY3VzdG9tIGNvbnRyb2xzIEhUTUwiLGUpLHRoaXMudG9nZ2xlTmF0aXZlQ29udHJvbHMoITApLCExfX0sY3JlYXRlSWNvbjpmdW5jdGlvbihlLHQpe3ZhciBuPUFlLmdldEljb25VcmwuY2FsbCh0aGlzKSxpPSIiLmNvbmNhdChuLmNvcnM/IiI6bi51cmwsIiMiKS5jb25jYXQodGhpcy5jb25maWcuaWNvblByZWZpeCksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwic3ZnIik7VihhLEYodCx7cm9sZToicHJlc2VudGF0aW9uIixmb2N1c2FibGU6ImZhbHNlIn0pKTt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwidXNlIikscj0iIi5jb25jYXQoaSwiLSIpLmNvbmNhdChlKTtyZXR1cm4iaHJlZiJpbiBzJiZzLnNldEF0dHJpYnV0ZU5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwiaHJlZiIscikscy5zZXRBdHRyaWJ1dGVOUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsInhsaW5rOmhyZWYiLHIpLGEuYXBwZW5kQ2hpbGQocyksYX0sY3JlYXRlTGFiZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49Z2UoZSx0aGlzLmNvbmZpZyk7cmV0dXJuIEIoInNwYW4iLE9iamVjdC5hc3NpZ24oe30sdCx7Y2xhc3M6W3QuY2xhc3MsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5oaWRkZW5dLmZpbHRlcihCb29sZWFuKS5qb2luKCIgIil9KSxuKX0sY3JlYXRlQmFkZ2U6ZnVuY3Rpb24oZSl7aWYoTi5lbXB0eShlKSlyZXR1cm4gbnVsbDt2YXIgdD1CKCJzcGFuIix7Y2xhc3M6dGhpcy5jb25maWcuY2xhc3NOYW1lcy5tZW51LnZhbHVlfSk7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoQigic3BhbiIse2NsYXNzOnRoaXMuY29uZmlnLmNsYXNzTmFtZXMubWVudS5iYWRnZX0sZSkpLHR9LGNyZWF0ZUJ1dHRvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1GKHt9LHQpLGE9bWUoZSkscz17ZWxlbWVudDoiYnV0dG9uIix0b2dnbGU6ITEsbGFiZWw6bnVsbCxpY29uOm51bGwsbGFiZWxQcmVzc2VkOm51bGwsaWNvblByZXNzZWQ6bnVsbH07c3dpdGNoKFsiZWxlbWVudCIsImljb24iLCJsYWJlbCJdLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0LmtleXMoaSkuaW5jbHVkZXMoZSkmJihzW2VdPWlbZV0sZGVsZXRlIGlbZV0pfSksImJ1dHRvbiIhPT1zLmVsZW1lbnR8fE9iamVjdC5rZXlzKGkpLmluY2x1ZGVzKCJ0eXBlIil8fChpLnR5cGU9ImJ1dHRvbiIpLE9iamVjdC5rZXlzKGkpLmluY2x1ZGVzKCJjbGFzcyIpP2kuY2xhc3Muc3BsaXQoIiAiKS5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09bi5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sfSl8fEYoaSx7Y2xhc3M6IiIuY29uY2F0KGkuY2xhc3MsIiAiKS5jb25jYXQodGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sKX0pOmkuY2xhc3M9dGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLGUpe2Nhc2UicGxheSI6cy50b2dnbGU9ITAscy5sYWJlbD0icGxheSIscy5sYWJlbFByZXNzZWQ9InBhdXNlIixzLmljb249InBsYXkiLHMuaWNvblByZXNzZWQ9InBhdXNlIjticmVhaztjYXNlIm11dGUiOnMudG9nZ2xlPSEwLHMubGFiZWw9Im11dGUiLHMubGFiZWxQcmVzc2VkPSJ1bm11dGUiLHMuaWNvbj0idm9sdW1lIixzLmljb25QcmVzc2VkPSJtdXRlZCI7YnJlYWs7Y2FzZSJjYXB0aW9ucyI6cy50b2dnbGU9ITAscy5sYWJlbD0iZW5hYmxlQ2FwdGlvbnMiLHMubGFiZWxQcmVzc2VkPSJkaXNhYmxlQ2FwdGlvbnMiLHMuaWNvbj0iY2FwdGlvbnMtb2ZmIixzLmljb25QcmVzc2VkPSJjYXB0aW9ucy1vbiI7YnJlYWs7Y2FzZSJmdWxsc2NyZWVuIjpzLnRvZ2dsZT0hMCxzLmxhYmVsPSJlbnRlckZ1bGxzY3JlZW4iLHMubGFiZWxQcmVzc2VkPSJleGl0RnVsbHNjcmVlbiIscy5pY29uPSJlbnRlci1mdWxsc2NyZWVuIixzLmljb25QcmVzc2VkPSJleGl0LWZ1bGxzY3JlZW4iO2JyZWFrO2Nhc2UicGxheS1sYXJnZSI6aS5jbGFzcys9IiAiLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsIi0tb3ZlcmxhaWQiKSxhPSJwbGF5IixzLmxhYmVsPSJwbGF5IixzLmljb249InBsYXkiO2JyZWFrO2RlZmF1bHQ6Ti5lbXB0eShzLmxhYmVsKSYmKHMubGFiZWw9YSksTi5lbXB0eShzLmljb24pJiYocy5pY29uPWUpfXZhciByPUIocy5lbGVtZW50KTtyZXR1cm4gcy50b2dnbGU/KHIuYXBwZW5kQ2hpbGQoQWUuY3JlYXRlSWNvbi5jYWxsKHRoaXMscy5pY29uUHJlc3NlZCx7Y2xhc3M6Imljb24tLXByZXNzZWQifSkpLHIuYXBwZW5kQ2hpbGQoQWUuY3JlYXRlSWNvbi5jYWxsKHRoaXMscy5pY29uLHtjbGFzczoiaWNvbi0tbm90LXByZXNzZWQifSkpLHIuYXBwZW5kQ2hpbGQoQWUuY3JlYXRlTGFiZWwuY2FsbCh0aGlzLHMubGFiZWxQcmVzc2VkLHtjbGFzczoibGFiZWwtLXByZXNzZWQifSkpLHIuYXBwZW5kQ2hpbGQoQWUuY3JlYXRlTGFiZWwuY2FsbCh0aGlzLHMubGFiZWwse2NsYXNzOiJsYWJlbC0tbm90LXByZXNzZWQifSkpKTooci5hcHBlbmRDaGlsZChBZS5jcmVhdGVJY29uLmNhbGwodGhpcyxzLmljb24pKSxyLmFwcGVuZENoaWxkKEFlLmNyZWF0ZUxhYmVsLmNhbGwodGhpcyxzLmxhYmVsKSkpLEYoaSxZKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5idXR0b25zW2FdLGkpKSxWKHIsaSksInBsYXkiPT09YT8oTi5hcnJheSh0aGlzLmVsZW1lbnRzLmJ1dHRvbnNbYV0pfHwodGhpcy5lbGVtZW50cy5idXR0b25zW2FdPVtdKSx0aGlzLmVsZW1lbnRzLmJ1dHRvbnNbYV0ucHVzaChyKSk6dGhpcy5lbGVtZW50cy5idXR0b25zW2FdPXIscn0sY3JlYXRlUmFuZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj1CKCJpbnB1dCIsRihZKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5pbnB1dHNbZV0pLHt0eXBlOiJyYW5nZSIsbWluOjAsbWF4OjEwMCxzdGVwOi4wMSx2YWx1ZTowLGF1dG9jb21wbGV0ZToib2ZmIixyb2xlOiJzbGlkZXIiLCJhcmlhLWxhYmVsIjpnZShlLHRoaXMuY29uZmlnKSwiYXJpYS12YWx1ZW1pbiI6MCwiYXJpYS12YWx1ZW1heCI6MTAwLCJhcmlhLXZhbHVlbm93IjowfSx0KSk7cmV0dXJuIHRoaXMuZWxlbWVudHMuaW5wdXRzW2VdPW4sQWUudXBkYXRlUmFuZ2VGaWxsLmNhbGwodGhpcyxuKSxiLnNldHVwKG4pLG59LGNyZWF0ZVByb2dyZXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49QigicHJvZ3Jlc3MiLEYoWSh0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheVtlXSkse21pbjowLG1heDoxMDAsdmFsdWU6MCxyb2xlOiJwcm9ncmVzc2JhciIsImFyaWEtaGlkZGVuIjohMH0sdCkpO2lmKCJ2b2x1bWUiIT09ZSl7bi5hcHBlbmRDaGlsZChCKCJzcGFuIixudWxsLCIwIikpO3ZhciBpPXtwbGF5ZWQ6InBsYXllZCIsYnVmZmVyOiJidWZmZXJlZCJ9W2VdLGE9aT9nZShpLHRoaXMuY29uZmlnKToiIjtuLmlubmVyVGV4dD0iJSAiLmNvbmNhdChhLnRvTG93ZXJDYXNlKCkpfXJldHVybiB0aGlzLmVsZW1lbnRzLmRpc3BsYXlbZV09bixufSxjcmVhdGVUaW1lOmZ1bmN0aW9uKGUsdCl7dmFyIG49WSh0aGlzLmNvbmZpZy5zZWxlY3RvcnMuZGlzcGxheVtlXSx0KSxpPUIoImRpdiIsRihuLHtjbGFzczoiIi5jb25jYXQobi5jbGFzcz9uLmNsYXNzOiIiLCIgIikuY29uY2F0KHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuZGlzcGxheS50aW1lLCIgIikudHJpbSgpLCJhcmlhLWxhYmVsIjpnZShlLHRoaXMuY29uZmlnKX0pLCIwMDowMCIpO3JldHVybiB0aGlzLmVsZW1lbnRzLmRpc3BsYXlbZV09aSxpfSxiaW5kTWVudUl0ZW1TaG9ydGN1dHM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO08oZSwia2V5ZG93biBrZXl1cCIsZnVuY3Rpb24oaSl7aWYoWzMyLDM4LDM5LDQwXS5pbmNsdWRlcyhpLndoaWNoKSYmKGkucHJldmVudERlZmF1bHQoKSxpLnN0b3BQcm9wYWdhdGlvbigpLCJrZXlkb3duIiE9PWkudHlwZSkpe3ZhciBhLHM9JChlLCdbcm9sZT0ibWVudWl0ZW1yYWRpbyJdJyk7aWYoIXMmJlszMiwzOV0uaW5jbHVkZXMoaS53aGljaCkpQWUuc2hvd01lbnVQYW5lbC5jYWxsKG4sdCwhMCk7ZWxzZSAzMiE9PWkud2hpY2gmJig0MD09PWkud2hpY2h8fHMmJjM5PT09aS53aGljaD8oYT1lLm5leHRFbGVtZW50U2libGluZyxOLmVsZW1lbnQoYSl8fChhPWUucGFyZW50Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCkpOihhPWUucHJldmlvdXNFbGVtZW50U2libGluZyxOLmVsZW1lbnQoYSl8fChhPWUucGFyZW50Tm9kZS5sYXN0RWxlbWVudENoaWxkKSksZWUuY2FsbChuLGEsITApKX19LCExKSxPKGUsImtleXVwIixmdW5jdGlvbihlKXsxMz09PWUud2hpY2gmJkFlLmZvY3VzRmlyc3RNZW51SXRlbS5jYWxsKG4sbnVsbCwhMCl9KX0sY3JlYXRlTWVudUl0ZW06ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUudmFsdWUsaT1lLmxpc3QsYT1lLnR5cGUscz1lLnRpdGxlLHI9ZS5iYWRnZSxvPXZvaWQgMD09PXI/bnVsbDpyLGw9ZS5jaGVja2VkLGM9dm9pZCAwIT09bCYmbCx1PVkodGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0c1thXSksZD1CKCJidXR0b24iLEYodSx7dHlwZToiYnV0dG9uIixyb2xlOiJtZW51aXRlbXJhZGlvIixjbGFzczoiIi5jb25jYXQodGhpcy5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLCIgIikuY29uY2F0KHUuY2xhc3M/dS5jbGFzczoiIikudHJpbSgpLCJhcmlhLWNoZWNrZWQiOmMsdmFsdWU6bn0pKSxoPUIoInNwYW4iKTtoLmlubmVySFRNTD1zLE4uZWxlbWVudChvKSYmaC5hcHBlbmRDaGlsZChvKSxkLmFwcGVuZENoaWxkKGgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkLCJjaGVja2VkIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idHJ1ZSI9PT1kLmdldEF0dHJpYnV0ZSgiYXJpYS1jaGVja2VkIil9LHNldDpmdW5jdGlvbihlKXtlJiZBcnJheS5mcm9tKGQucGFyZW50Tm9kZS5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAkKGUsJ1tyb2xlPSJtZW51aXRlbXJhZGlvIl0nKX0pLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJhcmlhLWNoZWNrZWQiLCJmYWxzZSIpfSksZC5zZXRBdHRyaWJ1dGUoImFyaWEtY2hlY2tlZCIsZT8idHJ1ZSI6ImZhbHNlIil9fSksdGhpcy5saXN0ZW5lcnMuYmluZChkLCJjbGljayBrZXl1cCIsZnVuY3Rpb24oZSl7aWYoIU4ua2V5Ym9hcmRFdmVudChlKXx8MzI9PT1lLndoaWNoKXtzd2l0Y2goZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksZC5jaGVja2VkPSEwLGEpe2Nhc2UibGFuZ3VhZ2UiOnQuY3VycmVudFRyYWNrPU51bWJlcihuKTticmVhaztjYXNlInF1YWxpdHkiOnQucXVhbGl0eT1uO2JyZWFrO2Nhc2Uic3BlZWQiOnQuc3BlZWQ9cGFyc2VGbG9hdChuKX1BZS5zaG93TWVudVBhbmVsLmNhbGwodCwiaG9tZSIsTi5rZXlib2FyZEV2ZW50KGUpKX19LGEsITEpLEFlLmJpbmRNZW51SXRlbVNob3J0Y3V0cy5jYWxsKHRoaXMsZCxhKSxpLmFwcGVuZENoaWxkKGQpfSxmb3JtYXRUaW1lOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO3JldHVybiBOLm51bWJlcihlKT9DZShlLGtlKHRoaXMuZHVyYXRpb24pPjAsdCk6ZX0sdXBkYXRlVGltZURpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbCx0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXTtOLmVsZW1lbnQoZSkmJk4ubnVtYmVyKHQpJiYoZS5pbm5lclRleHQ9QWUuZm9ybWF0VGltZSh0LG4pKX0sdXBkYXRlVm9sdW1lOmZ1bmN0aW9uKCl7dGhpcy5zdXBwb3J0ZWQudWkmJihOLmVsZW1lbnQodGhpcy5lbGVtZW50cy5pbnB1dHMudm9sdW1lKSYmQWUuc2V0UmFuZ2UuY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuaW5wdXRzLnZvbHVtZSx0aGlzLm11dGVkPzA6dGhpcy52b2x1bWUpLE4uZWxlbWVudCh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMubXV0ZSkmJih0aGlzLmVsZW1lbnRzLmJ1dHRvbnMubXV0ZS5wcmVzc2VkPXRoaXMubXV0ZWR8fDA9PT10aGlzLnZvbHVtZSkpfSxzZXRSYW5nZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtOLmVsZW1lbnQoZSkmJihlLnZhbHVlPXQsQWUudXBkYXRlUmFuZ2VGaWxsLmNhbGwodGhpcyxlKSl9LHVwZGF0ZVByb2dyZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5zdXBwb3J0ZWQudWkmJk4uZXZlbnQoZSkpe3ZhciBuLGksYT0wO2lmKGUpc3dpdGNoKGUudHlwZSl7Y2FzZSJ0aW1ldXBkYXRlIjpjYXNlInNlZWtpbmciOmNhc2Uic2Vla2VkIjpuPXRoaXMuY3VycmVudFRpbWUsaT10aGlzLmR1cmF0aW9uLGE9MD09PW58fDA9PT1pfHxOdW1iZXIuaXNOYU4obil8fE51bWJlci5pc05hTihpKT8wOihuL2kqMTAwKS50b0ZpeGVkKDIpLCJ0aW1ldXBkYXRlIj09PWUudHlwZSYmQWUuc2V0UmFuZ2UuY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuaW5wdXRzLnNlZWssYSk7YnJlYWs7Y2FzZSJwbGF5aW5nIjpjYXNlInByb2dyZXNzIjohZnVuY3Rpb24oZSxuKXt2YXIgaT1OLm51bWJlcihuKT9uOjAsYT1OLmVsZW1lbnQoZSk/ZTp0LmVsZW1lbnRzLmRpc3BsYXkuYnVmZmVyO2lmKE4uZWxlbWVudChhKSl7YS52YWx1ZT1pO3ZhciBzPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXTtOLmVsZW1lbnQocykmJihzLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlPWkpfX0odGhpcy5lbGVtZW50cy5kaXNwbGF5LmJ1ZmZlciwxMDAqdGhpcy5idWZmZXJlZCl9fX0sdXBkYXRlUmFuZ2VGaWxsOmZ1bmN0aW9uKGUpe3ZhciB0PU4uZXZlbnQoZSk/ZS50YXJnZXQ6ZTtpZihOLmVsZW1lbnQodCkmJiJyYW5nZSI9PT10LmdldEF0dHJpYnV0ZSgidHlwZSIpKXtpZigkKHQsdGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0cy5zZWVrKSl7dC5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVub3ciLHRoaXMuY3VycmVudFRpbWUpO3ZhciBuPUFlLmZvcm1hdFRpbWUodGhpcy5jdXJyZW50VGltZSksaT1BZS5mb3JtYXRUaW1lKHRoaXMuZHVyYXRpb24pLGE9Z2UoInNlZWtMYWJlbCIsdGhpcy5jb25maWcpO3Quc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVldGV4dCIsYS5yZXBsYWNlKCJ7Y3VycmVudFRpbWV9IixuKS5yZXBsYWNlKCJ7ZHVyYXRpb259IixpKSl9ZWxzZSBpZigkKHQsdGhpcy5jb25maWcuc2VsZWN0b3JzLmlucHV0cy52b2x1bWUpKXt2YXIgcz0xMDAqdC52YWx1ZTt0LnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZW5vdyIscyksdC5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWV0ZXh0IiwiIi5jb25jYXQocy50b0ZpeGVkKDEpLCIlIikpfWVsc2UgdC5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVub3ciLHQudmFsdWUpO0wuaXNXZWJraXQmJnQuc3R5bGUuc2V0UHJvcGVydHkoIi0tdmFsdWUiLCIiLmNvbmNhdCh0LnZhbHVlL3QubWF4KjEwMCwiJSIpKX19LHVwZGF0ZVNlZWtUb29sdGlwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5jb25maWcudG9vbHRpcHMuc2VlayYmTi5lbGVtZW50KHRoaXMuZWxlbWVudHMuaW5wdXRzLnNlZWspJiZOLmVsZW1lbnQodGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwKSYmMCE9PXRoaXMuZHVyYXRpb24pe3ZhciBuPSIiLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnRvb2x0aXAsIi0tdmlzaWJsZSIpLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIFgodC5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLG4sZSl9O2lmKHRoaXMudG91Y2gpaSghMSk7ZWxzZXt2YXIgYT0wLHM9dGhpcy5lbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihOLmV2ZW50KGUpKWE9MTAwL3Mud2lkdGgqKGUucGFnZVgtcy5sZWZ0KTtlbHNle2lmKCFKKHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcCxuKSlyZXR1cm47YT1wYXJzZUZsb2F0KHRoaXMuZWxlbWVudHMuZGlzcGxheS5zZWVrVG9vbHRpcC5zdHlsZS5sZWZ0LDEwKX1hPDA/YT0wOmE+MTAwJiYoYT0xMDApLEFlLnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmRpc3BsYXkuc2Vla1Rvb2x0aXAsdGhpcy5kdXJhdGlvbi8xMDAqYSksdGhpcy5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLnN0eWxlLmxlZnQ9IiIuY29uY2F0KGEsIiUiKSxOLmV2ZW50KGUpJiZbIm1vdXNlZW50ZXIiLCJtb3VzZWxlYXZlIl0uaW5jbHVkZXMoZS50eXBlKSYmaSgibW91c2VlbnRlciI9PT1lLnR5cGUpfX19LHRpbWVVcGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9IU4uZWxlbWVudCh0aGlzLmVsZW1lbnRzLmRpc3BsYXkuZHVyYXRpb24pJiZ0aGlzLmNvbmZpZy5pbnZlcnRUaW1lO0FlLnVwZGF0ZVRpbWVEaXNwbGF5LmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmRpc3BsYXkuY3VycmVudFRpbWUsdD90aGlzLmR1cmF0aW9uLXRoaXMuY3VycmVudFRpbWU6dGhpcy5jdXJyZW50VGltZSx0KSxlJiYidGltZXVwZGF0ZSI9PT1lLnR5cGUmJnRoaXMubWVkaWEuc2Vla2luZ3x8QWUudXBkYXRlUHJvZ3Jlc3MuY2FsbCh0aGlzLGUpfSxkdXJhdGlvblVwZGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuc3VwcG9ydGVkLnVpJiYodGhpcy5jb25maWcuaW52ZXJ0VGltZXx8IXRoaXMuY3VycmVudFRpbWUpKXtpZih0aGlzLmR1cmF0aW9uPj1NYXRoLnBvdygyLDMyKSlyZXR1cm4gUSh0aGlzLmVsZW1lbnRzLmRpc3BsYXkuY3VycmVudFRpbWUsITApLHZvaWQgUSh0aGlzLmVsZW1lbnRzLnByb2dyZXNzLCEwKTtOLmVsZW1lbnQodGhpcy5lbGVtZW50cy5pbnB1dHMuc2VlaykmJnRoaXMuZWxlbWVudHMuaW5wdXRzLnNlZWsuc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVlbWF4Iix0aGlzLmR1cmF0aW9uKTt2YXIgZT1OLmVsZW1lbnQodGhpcy5lbGVtZW50cy5kaXNwbGF5LmR1cmF0aW9uKTshZSYmdGhpcy5jb25maWcuZGlzcGxheUR1cmF0aW9uJiZ0aGlzLnBhdXNlZCYmQWUudXBkYXRlVGltZURpc3BsYXkuY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuZGlzcGxheS5jdXJyZW50VGltZSx0aGlzLmR1cmF0aW9uKSxlJiZBZS51cGRhdGVUaW1lRGlzcGxheS5jYWxsKHRoaXMsdGhpcy5lbGVtZW50cy5kaXNwbGF5LmR1cmF0aW9uLHRoaXMuZHVyYXRpb24pLEFlLnVwZGF0ZVNlZWtUb29sdGlwLmNhbGwodGhpcyl9fSx0b2dnbGVNZW51QnV0dG9uOmZ1bmN0aW9uKGUsdCl7USh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLmJ1dHRvbnNbZV0sIXQpfSx1cGRhdGVTZXR0aW5nOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVsc1tlXSxhPW51bGwscz10O2lmKCJjYXB0aW9ucyI9PT1lKWE9dGhpcy5jdXJyZW50VHJhY2s7ZWxzZXtpZihhPU4uZW1wdHkobik/dGhpc1tlXTpuLE4uZW1wdHkoYSkmJihhPXRoaXMuY29uZmlnW2VdLmRlZmF1bHQpLCFOLmVtcHR5KHRoaXMub3B0aW9uc1tlXSkmJiF0aGlzLm9wdGlvbnNbZV0uaW5jbHVkZXMoYSkpcmV0dXJuIHZvaWQgdGhpcy5kZWJ1Zy53YXJuKCJVbnN1cHBvcnRlZCB2YWx1ZSBvZiAnIi5jb25jYXQoYSwiJyBmb3IgIikuY29uY2F0KGUpKTtpZighdGhpcy5jb25maWdbZV0ub3B0aW9ucy5pbmNsdWRlcyhhKSlyZXR1cm4gdm9pZCB0aGlzLmRlYnVnLndhcm4oIkRpc2FibGVkIHZhbHVlIG9mICciLmNvbmNhdChhLCInIGZvciAiKS5jb25jYXQoZSkpfWlmKE4uZWxlbWVudChzKXx8KHM9aSYmaS5xdWVyeVNlbGVjdG9yKCdbcm9sZT0ibWVudSJdJykpLE4uZWxlbWVudChzKSl7dGhpcy5lbGVtZW50cy5zZXR0aW5ncy5idXR0b25zW2VdLnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdCh0aGlzLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUudmFsdWUpKS5pbm5lckhUTUw9QWUuZ2V0TGFiZWwuY2FsbCh0aGlzLGUsYSk7dmFyIHI9cyYmcy5xdWVyeVNlbGVjdG9yKCdbdmFsdWU9IicuY29uY2F0KGEsJyJdJykpO04uZWxlbWVudChyKSYmKHIuY2hlY2tlZD0hMCl9fSxnZXRMYWJlbDpmdW5jdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlInNwZWVkIjpyZXR1cm4gMT09PXQ/Z2UoIm5vcm1hbCIsdGhpcy5jb25maWcpOiIiLmNvbmNhdCh0LCImdGltZXM7Iik7Y2FzZSJxdWFsaXR5IjppZihOLm51bWJlcih0KSl7dmFyIG49Z2UoInF1YWxpdHlMYWJlbC4iLmNvbmNhdCh0KSx0aGlzLmNvbmZpZyk7cmV0dXJuIG4ubGVuZ3RoP246IiIuY29uY2F0KHQsInAiKX1yZXR1cm4gaGUodCk7Y2FzZSJjYXB0aW9ucyI6cmV0dXJuIFBlLmdldExhYmVsLmNhbGwodGhpcyk7ZGVmYXVsdDpyZXR1cm4gbnVsbH19LHNldFF1YWxpdHlNZW51OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoTi5lbGVtZW50KHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnF1YWxpdHkpKXt2YXIgbj10aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5xdWFsaXR5LnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPSJtZW51Il0nKTtOLmFycmF5KGUpJiYodGhpcy5vcHRpb25zLnF1YWxpdHk9Y2UoZSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmZpZy5xdWFsaXR5Lm9wdGlvbnMuaW5jbHVkZXMoZSl9KSk7dmFyIGk9IU4uZW1wdHkodGhpcy5vcHRpb25zLnF1YWxpdHkpJiZ0aGlzLm9wdGlvbnMucXVhbGl0eS5sZW5ndGg+MTtpZihBZS50b2dnbGVNZW51QnV0dG9uLmNhbGwodGhpcywicXVhbGl0eSIsaSkseihuKSxBZS5jaGVja01lbnUuY2FsbCh0aGlzKSxpKXt2YXIgYT1mdW5jdGlvbihlKXt2YXIgbj1nZSgicXVhbGl0eUJhZGdlLiIuY29uY2F0KGUpLHQuY29uZmlnKTtyZXR1cm4gbi5sZW5ndGg/QWUuY3JlYXRlQmFkZ2UuY2FsbCh0LG4pOm51bGx9O3RoaXMub3B0aW9ucy5xdWFsaXR5LnNvcnQoZnVuY3Rpb24oZSxuKXt2YXIgaT10LmNvbmZpZy5xdWFsaXR5Lm9wdGlvbnM7cmV0dXJuIGkuaW5kZXhPZihlKT5pLmluZGV4T2Yobik/MTotMX0pLmZvckVhY2goZnVuY3Rpb24oZSl7QWUuY3JlYXRlTWVudUl0ZW0uY2FsbCh0LHt2YWx1ZTplLGxpc3Q6bix0eXBlOiJxdWFsaXR5Iix0aXRsZTpBZS5nZXRMYWJlbC5jYWxsKHQsInF1YWxpdHkiLGUpLGJhZGdlOmEoZSl9KX0pLEFlLnVwZGF0ZVNldHRpbmcuY2FsbCh0aGlzLCJxdWFsaXR5IixuKX19fSxzZXRDYXB0aW9uc01lbnU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKE4uZWxlbWVudCh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscy5jYXB0aW9ucykpe3ZhciB0PXRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLmNhcHRpb25zLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPSJtZW51Il0nKSxuPVBlLmdldFRyYWNrcy5jYWxsKHRoaXMpLGk9Qm9vbGVhbihuLmxlbmd0aCk7aWYoQWUudG9nZ2xlTWVudUJ1dHRvbi5jYWxsKHRoaXMsImNhcHRpb25zIixpKSx6KHQpLEFlLmNoZWNrTWVudS5jYWxsKHRoaXMpLGkpe3ZhciBhPW4ubWFwKGZ1bmN0aW9uKG4saSl7cmV0dXJue3ZhbHVlOmksY2hlY2tlZDplLmNhcHRpb25zLnRvZ2dsZWQmJmUuY3VycmVudFRyYWNrPT09aSx0aXRsZTpQZS5nZXRMYWJlbC5jYWxsKGUsbiksYmFkZ2U6bi5sYW5ndWFnZSYmQWUuY3JlYXRlQmFkZ2UuY2FsbChlLG4ubGFuZ3VhZ2UudG9VcHBlckNhc2UoKSksbGlzdDp0LHR5cGU6Imxhbmd1YWdlIn19KTthLnVuc2hpZnQoe3ZhbHVlOi0xLGNoZWNrZWQ6IXRoaXMuY2FwdGlvbnMudG9nZ2xlZCx0aXRsZTpnZSgiZGlzYWJsZWQiLHRoaXMuY29uZmlnKSxsaXN0OnQsdHlwZToibGFuZ3VhZ2UifSksYS5mb3JFYWNoKEFlLmNyZWF0ZU1lbnVJdGVtLmJpbmQodGhpcykpLEFlLnVwZGF0ZVNldHRpbmcuY2FsbCh0aGlzLCJjYXB0aW9ucyIsdCl9fX0sc2V0U3BlZWRNZW51OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoTi5lbGVtZW50KHRoaXMuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzLnNwZWVkKSl7dmFyIG49dGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuc3BlZWQucXVlcnlTZWxlY3RvcignW3JvbGU9Im1lbnUiXScpO04uYXJyYXkoZSk/dGhpcy5vcHRpb25zLnNwZWVkPWU6KHRoaXMuaXNIVE1MNXx8dGhpcy5pc1ZpbWVvKSYmKHRoaXMub3B0aW9ucy5zcGVlZD1bLjUsLjc1LDEsMS4yNSwxLjUsMS43NSwyXSksdGhpcy5vcHRpb25zLnNwZWVkPXRoaXMub3B0aW9ucy5zcGVlZC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQuY29uZmlnLnNwZWVkLm9wdGlvbnMuaW5jbHVkZXMoZSl9KTt2YXIgaT0hTi5lbXB0eSh0aGlzLm9wdGlvbnMuc3BlZWQpJiZ0aGlzLm9wdGlvbnMuc3BlZWQubGVuZ3RoPjE7QWUudG9nZ2xlTWVudUJ1dHRvbi5jYWxsKHRoaXMsInNwZWVkIixpKSx6KG4pLEFlLmNoZWNrTWVudS5jYWxsKHRoaXMpLGkmJih0aGlzLm9wdGlvbnMuc3BlZWQuZm9yRWFjaChmdW5jdGlvbihlKXtBZS5jcmVhdGVNZW51SXRlbS5jYWxsKHQse3ZhbHVlOmUsbGlzdDpuLHR5cGU6InNwZWVkIix0aXRsZTpBZS5nZXRMYWJlbC5jYWxsKHQsInNwZWVkIixlKX0pfSksQWUudXBkYXRlU2V0dGluZy5jYWxsKHRoaXMsInNwZWVkIixuKSl9fSxjaGVja01lbnU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRzLnNldHRpbmdzLmJ1dHRvbnMsdD0hTi5lbXB0eShlKSYmT2JqZWN0LnZhbHVlcyhlKS5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiFlLmhpZGRlbn0pO1EodGhpcy5lbGVtZW50cy5zZXR0aW5ncy5tZW51LCF0KX0sZm9jdXNGaXJzdE1lbnVJdGVtOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV07aWYoIXRoaXMuZWxlbWVudHMuc2V0dGluZ3MucG9wdXAuaGlkZGVuKXt2YXIgbj1lO04uZWxlbWVudChuKXx8KG49T2JqZWN0LnZhbHVlcyh0aGlzLmVsZW1lbnRzLnNldHRpbmdzLnBhbmVscykuZmluZChmdW5jdGlvbihlKXtyZXR1cm4hZS5oaWRkZW59KSk7dmFyIGk9bi5xdWVyeVNlbGVjdG9yKCdbcm9sZV49Im1lbnVpdGVtIl0nKTtlZS5jYWxsKHRoaXMsaSx0KX19LHRvZ2dsZU1lbnU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50cy5zZXR0aW5ncy5wb3B1cCxuPXRoaXMuZWxlbWVudHMuYnV0dG9ucy5zZXR0aW5ncztpZihOLmVsZW1lbnQodCkmJk4uZWxlbWVudChuKSl7dmFyIGk9dC5oaWRkZW4sYT1pO2lmKE4uYm9vbGVhbihlKSlhPWU7ZWxzZSBpZihOLmtleWJvYXJkRXZlbnQoZSkmJjI3PT09ZS53aGljaClhPSExO2Vsc2UgaWYoTi5ldmVudChlKSl7dmFyIHM9Ti5mdW5jdGlvbihlLmNvbXBvc2VkUGF0aCk/ZS5jb21wb3NlZFBhdGgoKVswXTplLnRhcmdldCxyPXQuY29udGFpbnMocyk7aWYocnx8IXImJmUudGFyZ2V0IT09biYmYSlyZXR1cm59bi5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLGEpLFEodCwhYSksWCh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLm1lbnUub3BlbixhKSxhJiZOLmtleWJvYXJkRXZlbnQoZSk/QWUuZm9jdXNGaXJzdE1lbnVJdGVtLmNhbGwodGhpcyxudWxsLCEwKTphfHxpfHxlZS5jYWxsKHRoaXMsbixOLmtleWJvYXJkRXZlbnQoZSkpfX0sZ2V0TWVudVNpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jbG9uZU5vZGUoITApO3Quc3R5bGUucG9zaXRpb249ImFic29sdXRlIix0LnN0eWxlLm9wYWNpdHk9MCx0LnJlbW92ZUF0dHJpYnV0ZSgiaGlkZGVuIiksZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHQpO3ZhciBuPXQuc2Nyb2xsV2lkdGgsaT10LnNjcm9sbEhlaWdodDtyZXR1cm4gVyh0KSx7d2lkdGg6bixoZWlnaHQ6aX19LHNob3dNZW51UGFuZWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiIiLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxpPXRoaXMuZWxlbWVudHMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIiNwbHlyLXNldHRpbmdzLSIuY29uY2F0KHRoaXMuaWQsIi0iKS5jb25jYXQodCkpO2lmKE4uZWxlbWVudChpKSl7dmFyIGE9aS5wYXJlbnROb2RlLHM9QXJyYXkuZnJvbShhLmNoaWxkcmVuKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiFlLmhpZGRlbn0pO2lmKGllLnRyYW5zaXRpb25zJiYhaWUucmVkdWNlZE1vdGlvbil7YS5zdHlsZS53aWR0aD0iIi5jb25jYXQocy5zY3JvbGxXaWR0aCwicHgiKSxhLnN0eWxlLmhlaWdodD0iIi5jb25jYXQocy5zY3JvbGxIZWlnaHQsInB4Iik7dmFyIHI9QWUuZ2V0TWVudVNpemUuY2FsbCh0aGlzLGkpO08uY2FsbCh0aGlzLGEsTSxmdW5jdGlvbiB0KG4pe24udGFyZ2V0PT09YSYmWyJ3aWR0aCIsImhlaWdodCJdLmluY2x1ZGVzKG4ucHJvcGVydHlOYW1lKSYmKGEuc3R5bGUud2lkdGg9IiIsYS5zdHlsZS5oZWlnaHQ9IiIsai5jYWxsKGUsYSxNLHQpKX0pLGEuc3R5bGUud2lkdGg9IiIuY29uY2F0KHIud2lkdGgsInB4IiksYS5zdHlsZS5oZWlnaHQ9IiIuY29uY2F0KHIuaGVpZ2h0LCJweCIpfVEocywhMCksUShpLCExKSxBZS5mb2N1c0ZpcnN0TWVudUl0ZW0uY2FsbCh0aGlzLGksbil9fSxzZXREb3dubG9hZFVybDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudHMuYnV0dG9ucy5kb3dubG9hZDtOLmVsZW1lbnQoZSkmJmUuc2V0QXR0cmlidXRlKCJocmVmIix0aGlzLmRvd25sb2FkKX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1BZS5iaW5kTWVudUl0ZW1TaG9ydGN1dHMsaT1BZS5jcmVhdGVCdXR0b24sYT1BZS5jcmVhdGVQcm9ncmVzcyxzPUFlLmNyZWF0ZVJhbmdlLHI9QWUuY3JlYXRlVGltZSxvPUFlLnNldFF1YWxpdHlNZW51LGw9QWUuc2V0U3BlZWRNZW51LGM9QWUuc2hvd01lbnVQYW5lbDt0aGlzLmVsZW1lbnRzLmNvbnRyb2xzPW51bGwsdGhpcy5jb25maWcuY29udHJvbHMuaW5jbHVkZXMoInBsYXktbGFyZ2UiKSYmdGhpcy5lbGVtZW50cy5jb250YWluZXIuYXBwZW5kQ2hpbGQoaS5jYWxsKHRoaXMsInBsYXktbGFyZ2UiKSk7dmFyIHU9QigiZGl2IixZKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy53cmFwcGVyKSk7dGhpcy5lbGVtZW50cy5jb250cm9scz11O3ZhciBkPXtjbGFzczoicGx5cl9fY29udHJvbHNfX2l0ZW0ifTtyZXR1cm4gY2UodGhpcy5jb25maWcuY29udHJvbHMpLmZvckVhY2goZnVuY3Rpb24obyl7aWYoInJlc3RhcnQiPT09byYmdS5hcHBlbmRDaGlsZChpLmNhbGwodCwicmVzdGFydCIsZCkpLCJyZXdpbmQiPT09byYmdS5hcHBlbmRDaGlsZChpLmNhbGwodCwicmV3aW5kIixkKSksInBsYXkiPT09byYmdS5hcHBlbmRDaGlsZChpLmNhbGwodCwicGxheSIsZCkpLCJmYXN0LWZvcndhcmQiPT09byYmdS5hcHBlbmRDaGlsZChpLmNhbGwodCwiZmFzdC1mb3J3YXJkIixkKSksInByb2dyZXNzIj09PW8pe3ZhciBsPUIoImRpdiIse2NsYXNzOiIiLmNvbmNhdChkLmNsYXNzLCIgcGx5cl9fcHJvZ3Jlc3NfX2NvbnRhaW5lciIpfSksaD1CKCJkaXYiLFkodC5jb25maWcuc2VsZWN0b3JzLnByb2dyZXNzKSk7aWYoaC5hcHBlbmRDaGlsZChzLmNhbGwodCwic2VlayIse2lkOiJwbHlyLXNlZWstIi5jb25jYXQoZS5pZCl9KSksaC5hcHBlbmRDaGlsZChhLmNhbGwodCwiYnVmZmVyIikpLHQuY29uZmlnLnRvb2x0aXBzLnNlZWspe3ZhciBtPUIoInNwYW4iLHtjbGFzczp0LmNvbmZpZy5jbGFzc05hbWVzLnRvb2x0aXB9LCIwMDowMCIpO2guYXBwZW5kQ2hpbGQobSksdC5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwPW19dC5lbGVtZW50cy5wcm9ncmVzcz1oLGwuYXBwZW5kQ2hpbGQodC5lbGVtZW50cy5wcm9ncmVzcyksdS5hcHBlbmRDaGlsZChsKX1pZigiY3VycmVudC10aW1lIj09PW8mJnUuYXBwZW5kQ2hpbGQoci5jYWxsKHQsImN1cnJlbnRUaW1lIixkKSksImR1cmF0aW9uIj09PW8mJnUuYXBwZW5kQ2hpbGQoci5jYWxsKHQsImR1cmF0aW9uIixkKSksIm11dGUiPT09b3x8InZvbHVtZSI9PT1vKXt2YXIgcD10LmVsZW1lbnRzLnZvbHVtZTtpZihOLmVsZW1lbnQocCkmJnUuY29udGFpbnMocCl8fChwPUIoImRpdiIsRih7fSxkLHtjbGFzczoiIi5jb25jYXQoZC5jbGFzcywiIHBseXJfX3ZvbHVtZSIpLnRyaW0oKX0pKSx0LmVsZW1lbnRzLnZvbHVtZT1wLHUuYXBwZW5kQ2hpbGQocCkpLCJtdXRlIj09PW8mJnAuYXBwZW5kQ2hpbGQoaS5jYWxsKHQsIm11dGUiKSksInZvbHVtZSI9PT1vKXt2YXIgZj17bWF4OjEsc3RlcDouMDUsdmFsdWU6dC5jb25maWcudm9sdW1lfTtwLmFwcGVuZENoaWxkKHMuY2FsbCh0LCJ2b2x1bWUiLEYoZix7aWQ6InBseXItdm9sdW1lLSIuY29uY2F0KGUuaWQpfSkpKX19aWYoImNhcHRpb25zIj09PW8mJnUuYXBwZW5kQ2hpbGQoaS5jYWxsKHQsImNhcHRpb25zIixkKSksInNldHRpbmdzIj09PW8mJiFOLmVtcHR5KHQuY29uZmlnLnNldHRpbmdzKSl7dmFyIGc9QigiZGl2IixGKHt9LGQse2NsYXNzOiIiLmNvbmNhdChkLmNsYXNzLCIgcGx5cl9fbWVudSIpLnRyaW0oKSxoaWRkZW46IiJ9KSk7Zy5hcHBlbmRDaGlsZChpLmNhbGwodCwic2V0dGluZ3MiLHsiYXJpYS1oYXNwb3B1cCI6ITAsImFyaWEtY29udHJvbHMiOiJwbHlyLXNldHRpbmdzLSIuY29uY2F0KGUuaWQpLCJhcmlhLWV4cGFuZGVkIjohMX0pKTt2YXIgeT1CKCJkaXYiLHtjbGFzczoicGx5cl9fbWVudV9fY29udGFpbmVyIixpZDoicGx5ci1zZXR0aW5ncy0iLmNvbmNhdChlLmlkKSxoaWRkZW46IiJ9KSx2PUIoImRpdiIpLGI9QigiZGl2Iix7aWQ6InBseXItc2V0dGluZ3MtIi5jb25jYXQoZS5pZCwiLWhvbWUiKX0pLGs9QigiZGl2Iix7cm9sZToibWVudSJ9KTtiLmFwcGVuZENoaWxkKGspLHYuYXBwZW5kQ2hpbGQoYiksdC5lbGVtZW50cy5zZXR0aW5ncy5wYW5lbHMuaG9tZT1iLHQuY29uZmlnLnNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIGE9QigiYnV0dG9uIixGKFkodC5jb25maWcuc2VsZWN0b3JzLmJ1dHRvbnMuc2V0dGluZ3MpLHt0eXBlOiJidXR0b24iLGNsYXNzOiIiLmNvbmNhdCh0LmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsIiAiKS5jb25jYXQodC5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLCItLWZvcndhcmQiKSxyb2xlOiJtZW51aXRlbSIsImFyaWEtaGFzcG9wdXAiOiEwLGhpZGRlbjoiIn0pKTtuLmNhbGwodCxhLGkpLE8oYSwiY2xpY2siLGZ1bmN0aW9uKCl7Yy5jYWxsKHQsaSwhMSl9KTt2YXIgcz1CKCJzcGFuIixudWxsLGdlKGksdC5jb25maWcpKSxyPUIoInNwYW4iLHtjbGFzczp0LmNvbmZpZy5jbGFzc05hbWVzLm1lbnUudmFsdWV9KTtyLmlubmVySFRNTD1lW2ldLHMuYXBwZW5kQ2hpbGQociksYS5hcHBlbmRDaGlsZChzKSxrLmFwcGVuZENoaWxkKGEpO3ZhciBvPUIoImRpdiIse2lkOiJwbHlyLXNldHRpbmdzLSIuY29uY2F0KGUuaWQsIi0iKS5jb25jYXQoaSksaGlkZGVuOiIifSksbD1CKCJidXR0b24iLHt0eXBlOiJidXR0b24iLGNsYXNzOiIiLmNvbmNhdCh0LmNvbmZpZy5jbGFzc05hbWVzLmNvbnRyb2wsIiAiKS5jb25jYXQodC5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sLCItLWJhY2siKX0pO2wuYXBwZW5kQ2hpbGQoQigic3BhbiIseyJhcmlhLWhpZGRlbiI6ITB9LGdlKGksdC5jb25maWcpKSksbC5hcHBlbmRDaGlsZChCKCJzcGFuIix7Y2xhc3M6dC5jb25maWcuY2xhc3NOYW1lcy5oaWRkZW59LGdlKCJtZW51QmFjayIsdC5jb25maWcpKSksTyhvLCJrZXlkb3duIixmdW5jdGlvbihlKXszNz09PWUud2hpY2gmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxjLmNhbGwodCwiaG9tZSIsITApKX0sITEpLE8obCwiY2xpY2siLGZ1bmN0aW9uKCl7Yy5jYWxsKHQsImhvbWUiLCExKX0pLG8uYXBwZW5kQ2hpbGQobCksby5hcHBlbmRDaGlsZChCKCJkaXYiLHtyb2xlOiJtZW51In0pKSx2LmFwcGVuZENoaWxkKG8pLHQuZWxlbWVudHMuc2V0dGluZ3MuYnV0dG9uc1tpXT1hLHQuZWxlbWVudHMuc2V0dGluZ3MucGFuZWxzW2ldPW99KSx5LmFwcGVuZENoaWxkKHYpLGcuYXBwZW5kQ2hpbGQoeSksdS5hcHBlbmRDaGlsZChnKSx0LmVsZW1lbnRzLnNldHRpbmdzLnBvcHVwPXksdC5lbGVtZW50cy5zZXR0aW5ncy5tZW51PWd9aWYoInBpcCI9PT1vJiZpZS5waXAmJnUuYXBwZW5kQ2hpbGQoaS5jYWxsKHQsInBpcCIsZCkpLCJhaXJwbGF5Ij09PW8mJmllLmFpcnBsYXkmJnUuYXBwZW5kQ2hpbGQoaS5jYWxsKHQsImFpcnBsYXkiLGQpKSwiZG93bmxvYWQiPT09byl7dmFyIHc9Rih7fSxkLHtlbGVtZW50OiJhIixocmVmOnQuZG93bmxvYWQsdGFyZ2V0OiJfYmxhbmsifSksVD10LmNvbmZpZy51cmxzLmRvd25sb2FkOyFOLnVybChUKSYmdC5pc0VtYmVkJiZGKHcse2ljb246ImxvZ28tIi5jb25jYXQodC5wcm92aWRlciksbGFiZWw6dC5wcm92aWRlcn0pLHUuYXBwZW5kQ2hpbGQoaS5jYWxsKHQsImRvd25sb2FkIix3KSl9ImZ1bGxzY3JlZW4iPT09byYmdS5hcHBlbmRDaGlsZChpLmNhbGwodCwiZnVsbHNjcmVlbiIsZCkpfSksdGhpcy5pc0hUTUw1JiZvLmNhbGwodGhpcyxsZS5nZXRRdWFsaXR5T3B0aW9ucy5jYWxsKHRoaXMpKSxsLmNhbGwodGhpcyksdX0saW5qZWN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLmNvbmZpZy5sb2FkU3ByaXRlKXt2YXIgdD1BZS5nZXRJY29uVXJsLmNhbGwodGhpcyk7dC5jb3JzJiZiZSh0LnVybCwic3ByaXRlLXBseXIiKX10aGlzLmlkPU1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpO3ZhciBuPW51bGw7dGhpcy5lbGVtZW50cy5jb250cm9scz1udWxsO3ZhciBpPXtpZDp0aGlzLmlkLHNlZWt0aW1lOnRoaXMuY29uZmlnLnNlZWtUaW1lLHRpdGxlOnRoaXMuY29uZmlnLnRpdGxlfSxzPSEwO04uZnVuY3Rpb24odGhpcy5jb25maWcuY29udHJvbHMpJiYodGhpcy5jb25maWcuY29udHJvbHM9dGhpcy5jb25maWcuY29udHJvbHMuY2FsbCh0aGlzLGkpKSx0aGlzLmNvbmZpZy5jb250cm9sc3x8KHRoaXMuY29uZmlnLmNvbnRyb2xzPVtdKSxOLmVsZW1lbnQodGhpcy5jb25maWcuY29udHJvbHMpfHxOLnN0cmluZyh0aGlzLmNvbmZpZy5jb250cm9scyk/bj10aGlzLmNvbmZpZy5jb250cm9sczoobj1BZS5jcmVhdGUuY2FsbCh0aGlzLHtpZDp0aGlzLmlkLHNlZWt0aW1lOnRoaXMuY29uZmlnLnNlZWtUaW1lLHNwZWVkOnRoaXMuc3BlZWQscXVhbGl0eTp0aGlzLnF1YWxpdHksY2FwdGlvbnM6UGUuZ2V0TGFiZWwuY2FsbCh0aGlzKX0pLHM9ITEpO3ZhciByLG89ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtyZXR1cm4gT2JqZWN0LmVudHJpZXMoaSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1hKGUsMiksaT1uWzBdLHM9blsxXTt0PWRlKHQsInsiLmNvbmNhdChpLCJ9Iikscyl9KSx0fTtpZihzJiYoTi5zdHJpbmcodGhpcy5jb25maWcuY29udHJvbHMpP249byhuKTpOLmVsZW1lbnQobikmJihuLmlubmVySFRNTD1vKG4uaW5uZXJIVE1MKSkpLE4uc3RyaW5nKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy5jb250YWluZXIpJiYocj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250cm9scy5jb250YWluZXIpKSxOLmVsZW1lbnQocil8fChyPXRoaXMuZWxlbWVudHMuY29udGFpbmVyKSxyW04uZWxlbWVudChuKT8iaW5zZXJ0QWRqYWNlbnRFbGVtZW50IjoiaW5zZXJ0QWRqYWNlbnRIVE1MIl0oImFmdGVyYmVnaW4iLG4pLE4uZWxlbWVudCh0aGlzLmVsZW1lbnRzLmNvbnRyb2xzKXx8QWUuZmluZEVsZW1lbnRzLmNhbGwodGhpcyksIU4uZW1wdHkodGhpcy5lbGVtZW50cy5idXR0b25zKSl7dmFyIGw9ZnVuY3Rpb24odCl7dmFyIG49ZS5jb25maWcuY2xhc3NOYW1lcy5jb250cm9sUHJlc3NlZDtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwicHJlc3NlZCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEoodCxuKX0sc2V0OmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTtYKHQsbixlKX19KX07T2JqZWN0LnZhbHVlcyh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMpLmZpbHRlcihCb29sZWFuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe04uYXJyYXkoZSl8fE4ubm9kZUxpc3QoZSk/QXJyYXkuZnJvbShlKS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaChsKTpsKGUpfSl9aWYoTC5pc0VkZ2UmJngociksdGhpcy5jb25maWcudG9vbHRpcHMuY29udHJvbHMpe3ZhciBjPXRoaXMuY29uZmlnLHU9Yy5jbGFzc05hbWVzLGQ9Yy5zZWxlY3RvcnMsaD0iIi5jb25jYXQoZC5jb250cm9scy53cmFwcGVyLCIgIikuY29uY2F0KGQubGFiZWxzLCIgLiIpLmNvbmNhdCh1LmhpZGRlbiksbT1HLmNhbGwodGhpcyxoKTtBcnJheS5mcm9tKG0pLmZvckVhY2goZnVuY3Rpb24odCl7WCh0LGUuY29uZmlnLmNsYXNzTmFtZXMuaGlkZGVuLCExKSxYKHQsZS5jb25maWcuY2xhc3NOYW1lcy50b29sdGlwLCEwKX0pfX19O2Z1bmN0aW9uIEVlKGUpe3ZhciB0PWU7aWYoIShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO24uaHJlZj10LHQ9bi5ocmVmfXRyeXtyZXR1cm4gbmV3IFVSTCh0KX1jYXRjaChlKXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gU2UoZSl7dmFyIHQ9bmV3IFVSTFNlYXJjaFBhcmFtcztyZXR1cm4gTi5vYmplY3QoZSkmJk9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49YShlLDIpLGk9blswXSxzPW5bMV07dC5zZXQoaSxzKX0pLHR9dmFyIFBlPXtzZXR1cDpmdW5jdGlvbigpe2lmKHRoaXMuc3VwcG9ydGVkLnVpKWlmKCF0aGlzLmlzVmlkZW98fHRoaXMuaXNZb3VUdWJlfHx0aGlzLmlzSFRNTDUmJiFpZS50ZXh0VHJhY2tzKU4uYXJyYXkodGhpcy5jb25maWcuY29udHJvbHMpJiZ0aGlzLmNvbmZpZy5jb250cm9scy5pbmNsdWRlcygic2V0dGluZ3MiKSYmdGhpcy5jb25maWcuc2V0dGluZ3MuaW5jbHVkZXMoImNhcHRpb25zIikmJkFlLnNldENhcHRpb25zTWVudS5jYWxsKHRoaXMpO2Vsc2V7aWYoTi5lbGVtZW50KHRoaXMuZWxlbWVudHMuY2FwdGlvbnMpfHwodGhpcy5lbGVtZW50cy5jYXB0aW9ucz1CKCJkaXYiLFkodGhpcy5jb25maWcuc2VsZWN0b3JzLmNhcHRpb25zKSksZnVuY3Rpb24oZSx0KXtOLmVsZW1lbnQoZSkmJk4uZWxlbWVudCh0KSYmdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHQubmV4dFNpYmxpbmcpfSh0aGlzLmVsZW1lbnRzLmNhcHRpb25zLHRoaXMuZWxlbWVudHMud3JhcHBlcikpLEwuaXNJRSYmd2luZG93LlVSTCl7dmFyIGU9dGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yQWxsKCJ0cmFjayIpO0FycmF5LmZyb20oZSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZSgic3JjIiksbj1FZSh0KTtudWxsIT09biYmbi5ob3N0bmFtZSE9PXdpbmRvdy5sb2NhdGlvbi5ocmVmLmhvc3RuYW1lJiZbImh0dHA6IiwiaHR0cHM6Il0uaW5jbHVkZXMobi5wcm90b2NvbCkmJnZlKHQsImJsb2IiKS50aGVuKGZ1bmN0aW9uKHQpe2Uuc2V0QXR0cmlidXRlKCJzcmMiLHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHQpKX0pLmNhdGNoKGZ1bmN0aW9uKCl7VyhlKX0pfSl9dmFyIHQ9Y2UoKG5hdmlnYXRvci5sYW5ndWFnZXN8fFtuYXZpZ2F0b3IubGFuZ3VhZ2V8fG5hdmlnYXRvci51c2VyTGFuZ3VhZ2V8fCJlbiJdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoIi0iKVswXX0pKSxuPSh0aGlzLnN0b3JhZ2UuZ2V0KCJsYW5ndWFnZSIpfHx0aGlzLmNvbmZpZy5jYXB0aW9ucy5sYW5ndWFnZXx8ImF1dG8iKS50b0xvd2VyQ2FzZSgpO2lmKCJhdXRvIj09PW4pbj1hKHQsMSlbMF07dmFyIGk9dGhpcy5zdG9yYWdlLmdldCgiY2FwdGlvbnMiKTtpZihOLmJvb2xlYW4oaSl8fChpPXRoaXMuY29uZmlnLmNhcHRpb25zLmFjdGl2ZSksT2JqZWN0LmFzc2lnbih0aGlzLmNhcHRpb25zLHt0b2dnbGVkOiExLGFjdGl2ZTppLGxhbmd1YWdlOm4sbGFuZ3VhZ2VzOnR9KSx0aGlzLmlzSFRNTDUpe3ZhciBzPXRoaXMuY29uZmlnLmNhcHRpb25zLnVwZGF0ZT8iYWRkdHJhY2sgcmVtb3ZldHJhY2siOiJyZW1vdmV0cmFjayI7Ty5jYWxsKHRoaXMsdGhpcy5tZWRpYS50ZXh0VHJhY2tzLHMsUGUudXBkYXRlLmJpbmQodGhpcykpfXNldFRpbWVvdXQoUGUudXBkYXRlLmJpbmQodGhpcyksMCl9fSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9UGUuZ2V0VHJhY2tzLmNhbGwodGhpcywhMCksbj10aGlzLmNhcHRpb25zLGk9bi5hY3RpdmUsYT1uLmxhbmd1YWdlLHM9bi5tZXRhLHI9bi5jdXJyZW50VHJhY2tOb2RlLG89Qm9vbGVhbih0LmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGFuZ3VhZ2U9PT1hfSkpO3RoaXMuaXNIVE1MNSYmdGhpcy5pc1ZpZGVvJiZ0LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hcy5nZXQoZSl9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuZGVidWcubG9nKCJUcmFjayBhZGRlZCIsdCkscy5zZXQodCx7ZGVmYXVsdDoic2hvd2luZyI9PT10Lm1vZGV9KSx0Lm1vZGU9ImhpZGRlbiIsTy5jYWxsKGUsdCwiY3VlY2hhbmdlIixmdW5jdGlvbigpe3JldHVybiBQZS51cGRhdGVDdWVzLmNhbGwoZSl9KX0pLChvJiZ0aGlzLmxhbmd1YWdlIT09YXx8IXQuaW5jbHVkZXMocikpJiYoUGUuc2V0TGFuZ3VhZ2UuY2FsbCh0aGlzLGEpLFBlLnRvZ2dsZS5jYWxsKHRoaXMsaSYmbykpLFgodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5jYXB0aW9ucy5lbmFibGVkLCFOLmVtcHR5KHQpKSwodGhpcy5jb25maWcuY29udHJvbHN8fFtdKS5pbmNsdWRlcygic2V0dGluZ3MiKSYmdGhpcy5jb25maWcuc2V0dGluZ3MuaW5jbHVkZXMoImNhcHRpb25zIikmJkFlLnNldENhcHRpb25zTWVudS5jYWxsKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtpZih0aGlzLnN1cHBvcnRlZC51aSl7dmFyIG49dGhpcy5jYXB0aW9ucy50b2dnbGVkLGk9dGhpcy5jb25maWcuY2xhc3NOYW1lcy5jYXB0aW9ucy5hY3RpdmUsYT1OLm51bGxPclVuZGVmaW5lZChlKT8hbjplO2lmKGEhPT1uKXtpZih0fHwodGhpcy5jYXB0aW9ucy5hY3RpdmU9YSx0aGlzLnN0b3JhZ2Uuc2V0KHtjYXB0aW9uczphfSkpLCF0aGlzLmxhbmd1YWdlJiZhJiYhdCl7dmFyIHI9UGUuZ2V0VHJhY2tzLmNhbGwodGhpcyksbz1QZS5maW5kVHJhY2suY2FsbCh0aGlzLFt0aGlzLmNhcHRpb25zLmxhbmd1YWdlXS5jb25jYXQocyh0aGlzLmNhcHRpb25zLmxhbmd1YWdlcykpLCEwKTtyZXR1cm4gdGhpcy5jYXB0aW9ucy5sYW5ndWFnZT1vLmxhbmd1YWdlLHZvaWQgUGUuc2V0LmNhbGwodGhpcyxyLmluZGV4T2YobykpfXRoaXMuZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucyYmKHRoaXMuZWxlbWVudHMuYnV0dG9ucy5jYXB0aW9ucy5wcmVzc2VkPWEpLFgodGhpcy5lbGVtZW50cy5jb250YWluZXIsaSxhKSx0aGlzLmNhcHRpb25zLnRvZ2dsZWQ9YSxBZS51cGRhdGVTZXR0aW5nLmNhbGwodGhpcywiY2FwdGlvbnMiKSxILmNhbGwodGhpcyx0aGlzLm1lZGlhLGE/ImNhcHRpb25zZW5hYmxlZCI6ImNhcHRpb25zZGlzYWJsZWQiKX19fSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxuPVBlLmdldFRyYWNrcy5jYWxsKHRoaXMpO2lmKC0xIT09ZSlpZihOLm51bWJlcihlKSlpZihlIGluIG4pe2lmKHRoaXMuY2FwdGlvbnMuY3VycmVudFRyYWNrIT09ZSl7dGhpcy5jYXB0aW9ucy5jdXJyZW50VHJhY2s9ZTt2YXIgaT1uW2VdLGE9KGl8fHt9KS5sYW5ndWFnZTt0aGlzLmNhcHRpb25zLmN1cnJlbnRUcmFja05vZGU9aSxBZS51cGRhdGVTZXR0aW5nLmNhbGwodGhpcywiY2FwdGlvbnMiKSx0fHwodGhpcy5jYXB0aW9ucy5sYW5ndWFnZT1hLHRoaXMuc3RvcmFnZS5zZXQoe2xhbmd1YWdlOmF9KSksdGhpcy5pc1ZpbWVvJiZ0aGlzLmVtYmVkLmVuYWJsZVRleHRUcmFjayhhKSxILmNhbGwodGhpcyx0aGlzLm1lZGlhLCJsYW5ndWFnZWNoYW5nZSIpfVBlLnRvZ2dsZS5jYWxsKHRoaXMsITAsdCksdGhpcy5pc0hUTUw1JiZ0aGlzLmlzVmlkZW8mJlBlLnVwZGF0ZUN1ZXMuY2FsbCh0aGlzKX1lbHNlIHRoaXMuZGVidWcud2FybigiVHJhY2sgbm90IGZvdW5kIixlKTtlbHNlIHRoaXMuZGVidWcud2FybigiSW52YWxpZCBjYXB0aW9uIGFyZ3VtZW50IixlKTtlbHNlIFBlLnRvZ2dsZS5jYWxsKHRoaXMsITEsdCl9LHNldExhbmd1YWdlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYoTi5zdHJpbmcoZSkpe3ZhciBuPWUudG9Mb3dlckNhc2UoKTt0aGlzLmNhcHRpb25zLmxhbmd1YWdlPW47dmFyIGk9UGUuZ2V0VHJhY2tzLmNhbGwodGhpcyksYT1QZS5maW5kVHJhY2suY2FsbCh0aGlzLFtuXSk7UGUuc2V0LmNhbGwodGhpcyxpLmluZGV4T2YoYSksdCl9ZWxzZSB0aGlzLmRlYnVnLndhcm4oIkludmFsaWQgbGFuZ3VhZ2UgYXJndW1lbnQiLGUpfSxnZXRUcmFja3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTtyZXR1cm4gQXJyYXkuZnJvbSgodGhpcy5tZWRpYXx8e30pLnRleHRUcmFja3N8fFtdKS5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuIWUuaXNIVE1MNXx8dHx8ZS5jYXB0aW9ucy5tZXRhLmhhcyhuKX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5bImNhcHRpb25zIiwic3VidGl0bGVzIl0uaW5jbHVkZXMoZS5raW5kKX0pfSxmaW5kVHJhY2s6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxhPVBlLmdldFRyYWNrcy5jYWxsKHRoaXMpLHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcigobi5jYXB0aW9ucy5tZXRhLmdldChlKXx8e30pLmRlZmF1bHQpfSxyPUFycmF5LmZyb20oYSkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBzKHQpLXMoZSl9KTtyZXR1cm4gZS5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4hKHQ9ci5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxhbmd1YWdlPT09ZX0pKX0pLHR8fChpP3JbMF06dm9pZCAwKX0sZ2V0Q3VycmVudFRyYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIFBlLmdldFRyYWNrcy5jYWxsKHRoaXMpW3RoaXMuY3VycmVudFRyYWNrXX0sZ2V0TGFiZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtyZXR1cm4hTi50cmFjayh0KSYmaWUudGV4dFRyYWNrcyYmdGhpcy5jYXB0aW9ucy50b2dnbGVkJiYodD1QZS5nZXRDdXJyZW50VHJhY2suY2FsbCh0aGlzKSksTi50cmFjayh0KT9OLmVtcHR5KHQubGFiZWwpP04uZW1wdHkodC5sYW5ndWFnZSk/Z2UoImVuYWJsZWQiLHRoaXMuY29uZmlnKTplLmxhbmd1YWdlLnRvVXBwZXJDYXNlKCk6dC5sYWJlbDpnZSgiZGlzYWJsZWQiLHRoaXMuY29uZmlnKX0sdXBkYXRlQ3VlczpmdW5jdGlvbihlKXtpZih0aGlzLnN1cHBvcnRlZC51aSlpZihOLmVsZW1lbnQodGhpcy5lbGVtZW50cy5jYXB0aW9ucykpaWYoTi5udWxsT3JVbmRlZmluZWQoZSl8fEFycmF5LmlzQXJyYXkoZSkpe3ZhciB0PWU7aWYoIXQpe3ZhciBuPVBlLmdldEN1cnJlbnRUcmFjay5jYWxsKHRoaXMpO3Q9QXJyYXkuZnJvbSgobnx8e30pLmFjdGl2ZUN1ZXN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0Q3VlQXNIVE1MKCl9KS5tYXAocGUpfXZhciBpPXQubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pLmpvaW4oIlxuIik7aWYoaSE9PXRoaXMuZWxlbWVudHMuY2FwdGlvbnMuaW5uZXJIVE1MKXt6KHRoaXMuZWxlbWVudHMuY2FwdGlvbnMpO3ZhciBhPUIoInNwYW4iLFkodGhpcy5jb25maWcuc2VsZWN0b3JzLmNhcHRpb24pKTthLmlubmVySFRNTD1pLHRoaXMuZWxlbWVudHMuY2FwdGlvbnMuYXBwZW5kQ2hpbGQoYSksSC5jYWxsKHRoaXMsdGhpcy5tZWRpYSwiY3VlY2hhbmdlIil9fWVsc2UgdGhpcy5kZWJ1Zy53YXJuKCJ1cGRhdGVDdWVzOiBJbnZhbGlkIGlucHV0IixlKTtlbHNlIHRoaXMuZGVidWcud2FybigiTm8gY2FwdGlvbnMgZWxlbWVudCB0byByZW5kZXIgdG8iKX19LE5lPXtlbmFibGVkOiEwLHRpdGxlOiIiLGRlYnVnOiExLGF1dG9wbGF5OiExLGF1dG9wYXVzZTohMCxwbGF5c2lubGluZTohMCxzZWVrVGltZToxMCx2b2x1bWU6MSxtdXRlZDohMSxkdXJhdGlvbjpudWxsLGRpc3BsYXlEdXJhdGlvbjohMCxpbnZlcnRUaW1lOiEwLHRvZ2dsZUludmVydDohMCxyYXRpbzpudWxsLGNsaWNrVG9QbGF5OiEwLGhpZGVDb250cm9sczohMCxyZXNldE9uRW5kOiExLGRpc2FibGVDb250ZXh0TWVudTohMCxsb2FkU3ByaXRlOiEwLGljb25QcmVmaXg6InBseXIiLGljb25Vcmw6Imh0dHBzOi8vY2RuLnBseXIuaW8vMy41LjYvcGx5ci5zdmciLGJsYW5rVmlkZW86Imh0dHBzOi8vY2RuLnBseXIuaW8vc3RhdGljL2JsYW5rLm1wNCIscXVhbGl0eTp7ZGVmYXVsdDo1NzYsb3B0aW9uczpbNDMyMCwyODgwLDIxNjAsMTQ0MCwxMDgwLDcyMCw1NzYsNDgwLDM2MCwyNDBdfSxsb29wOnthY3RpdmU6ITF9LHNwZWVkOntzZWxlY3RlZDoxLG9wdGlvbnM6Wy41LC43NSwxLDEuMjUsMS41LDEuNzUsMl19LGtleWJvYXJkOntmb2N1c2VkOiEwLGdsb2JhbDohMX0sdG9vbHRpcHM6e2NvbnRyb2xzOiExLHNlZWs6ITB9LGNhcHRpb25zOnthY3RpdmU6ITEsbGFuZ3VhZ2U6ImF1dG8iLHVwZGF0ZTohMX0sZnVsbHNjcmVlbjp7ZW5hYmxlZDohMCxmYWxsYmFjazohMCxpb3NOYXRpdmU6ITF9LHN0b3JhZ2U6e2VuYWJsZWQ6ITAsa2V5OiJwbHlyIn0sY29udHJvbHM6WyJwbGF5LWxhcmdlIiwicGxheSIsInByb2dyZXNzIiwiY3VycmVudC10aW1lIiwibXV0ZSIsInZvbHVtZSIsImNhcHRpb25zIiwic2V0dGluZ3MiLCJwaXAiLCJhaXJwbGF5IiwiZnVsbHNjcmVlbiJdLHNldHRpbmdzOlsiY2FwdGlvbnMiLCJxdWFsaXR5Iiwic3BlZWQiXSxpMThuOntyZXN0YXJ0OiJSZXN0YXJ0IixyZXdpbmQ6IlJld2luZCB7c2Vla3RpbWV9cyIscGxheToiUGxheSIscGF1c2U6IlBhdXNlIixmYXN0Rm9yd2FyZDoiRm9yd2FyZCB7c2Vla3RpbWV9cyIsc2VlazoiU2VlayIsc2Vla0xhYmVsOiJ7Y3VycmVudFRpbWV9IG9mIHtkdXJhdGlvbn0iLHBsYXllZDoiUGxheWVkIixidWZmZXJlZDoiQnVmZmVyZWQiLGN1cnJlbnRUaW1lOiJDdXJyZW50IHRpbWUiLGR1cmF0aW9uOiJEdXJhdGlvbiIsdm9sdW1lOiJWb2x1bWUiLG11dGU6Ik11dGUiLHVubXV0ZToiVW5tdXRlIixlbmFibGVDYXB0aW9uczoiRW5hYmxlIGNhcHRpb25zIixkaXNhYmxlQ2FwdGlvbnM6IkRpc2FibGUgY2FwdGlvbnMiLGRvd25sb2FkOiJEb3dubG9hZCIsZW50ZXJGdWxsc2NyZWVuOiJFbnRlciBmdWxsc2NyZWVuIixleGl0RnVsbHNjcmVlbjoiRXhpdCBmdWxsc2NyZWVuIixmcmFtZVRpdGxlOiJQbGF5ZXIgZm9yIHt0aXRsZX0iLGNhcHRpb25zOiJDYXB0aW9ucyIsc2V0dGluZ3M6IlNldHRpbmdzIixtZW51QmFjazoiR28gYmFjayB0byBwcmV2aW91cyBtZW51IixzcGVlZDoiU3BlZWQiLG5vcm1hbDoiTm9ybWFsIixxdWFsaXR5OiJRdWFsaXR5Iixsb29wOiJMb29wIixzdGFydDoiU3RhcnQiLGVuZDoiRW5kIixhbGw6IkFsbCIscmVzZXQ6IlJlc2V0IixkaXNhYmxlZDoiRGlzYWJsZWQiLGVuYWJsZWQ6IkVuYWJsZWQiLGFkdmVydGlzZW1lbnQ6IkFkIixxdWFsaXR5QmFkZ2U6ezIxNjA6IjRLIiwxNDQwOiJIRCIsMTA4MDoiSEQiLDcyMDoiSEQiLDU3NjoiU0QiLDQ4MDoiU0QifX0sdXJsczp7ZG93bmxvYWQ6bnVsbCx2aW1lbzp7c2RrOiJodHRwczovL3BsYXllci52aW1lby5jb20vYXBpL3BsYXllci5qcyIsaWZyYW1lOiJodHRwczovL3BsYXllci52aW1lby5jb20vdmlkZW8vezB9P3sxfSIsYXBpOiJodHRwczovL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vezB9Lmpzb24ifSx5b3V0dWJlOntzZGs6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2lmcmFtZV9hcGkiLGFwaToiaHR0cHM6Ly9ub2VtYmVkLmNvbS9lbWJlZD91cmw9aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj17MH0ifSxnb29nbGVJTUE6e3NkazoiaHR0cHM6Ly9pbWFzZGsuZ29vZ2xlYXBpcy5jb20vanMvc2RrbG9hZGVyL2ltYTMuanMifX0sbGlzdGVuZXJzOntzZWVrOm51bGwscGxheTpudWxsLHBhdXNlOm51bGwscmVzdGFydDpudWxsLHJld2luZDpudWxsLGZhc3RGb3J3YXJkOm51bGwsbXV0ZTpudWxsLHZvbHVtZTpudWxsLGNhcHRpb25zOm51bGwsZG93bmxvYWQ6bnVsbCxmdWxsc2NyZWVuOm51bGwscGlwOm51bGwsYWlycGxheTpudWxsLHNwZWVkOm51bGwscXVhbGl0eTpudWxsLGxvb3A6bnVsbCxsYW5ndWFnZTpudWxsfSxldmVudHM6WyJlbmRlZCIsInByb2dyZXNzIiwic3RhbGxlZCIsInBsYXlpbmciLCJ3YWl0aW5nIiwiY2FucGxheSIsImNhbnBsYXl0aHJvdWdoIiwibG9hZHN0YXJ0IiwibG9hZGVkZGF0YSIsImxvYWRlZG1ldGFkYXRhIiwidGltZXVwZGF0ZSIsInZvbHVtZWNoYW5nZSIsInBsYXkiLCJwYXVzZSIsImVycm9yIiwic2Vla2luZyIsInNlZWtlZCIsImVtcHRpZWQiLCJyYXRlY2hhbmdlIiwiY3VlY2hhbmdlIiwiZG93bmxvYWQiLCJlbnRlcmZ1bGxzY3JlZW4iLCJleGl0ZnVsbHNjcmVlbiIsImNhcHRpb25zZW5hYmxlZCIsImNhcHRpb25zZGlzYWJsZWQiLCJsYW5ndWFnZWNoYW5nZSIsImNvbnRyb2xzaGlkZGVuIiwiY29udHJvbHNzaG93biIsInJlYWR5Iiwic3RhdGVjaGFuZ2UiLCJxdWFsaXR5Y2hhbmdlIiwiYWRzbG9hZGVkIiwiYWRzY29udGVudHBhdXNlIiwiYWRzY29udGVudHJlc3VtZSIsImFkc3RhcnRlZCIsImFkc21pZHBvaW50IiwiYWRzY29tcGxldGUiLCJhZHNhbGxjb21wbGV0ZSIsImFkc2ltcHJlc3Npb24iLCJhZHNjbGljayJdLHNlbGVjdG9yczp7ZWRpdGFibGU6ImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBbY29udGVudGVkaXRhYmxlXSIsY29udGFpbmVyOiIucGx5ciIsY29udHJvbHM6e2NvbnRhaW5lcjpudWxsLHdyYXBwZXI6Ii5wbHlyX19jb250cm9scyJ9LGxhYmVsczoiW2RhdGEtcGx5cl0iLGJ1dHRvbnM6e3BsYXk6J1tkYXRhLXBseXI9InBsYXkiXScscGF1c2U6J1tkYXRhLXBseXI9InBhdXNlIl0nLHJlc3RhcnQ6J1tkYXRhLXBseXI9InJlc3RhcnQiXScscmV3aW5kOidbZGF0YS1wbHlyPSJyZXdpbmQiXScsZmFzdEZvcndhcmQ6J1tkYXRhLXBseXI9ImZhc3QtZm9yd2FyZCJdJyxtdXRlOidbZGF0YS1wbHlyPSJtdXRlIl0nLGNhcHRpb25zOidbZGF0YS1wbHlyPSJjYXB0aW9ucyJdJyxkb3dubG9hZDonW2RhdGEtcGx5cj0iZG93bmxvYWQiXScsZnVsbHNjcmVlbjonW2RhdGEtcGx5cj0iZnVsbHNjcmVlbiJdJyxwaXA6J1tkYXRhLXBseXI9InBpcCJdJyxhaXJwbGF5OidbZGF0YS1wbHlyPSJhaXJwbGF5Il0nLHNldHRpbmdzOidbZGF0YS1wbHlyPSJzZXR0aW5ncyJdJyxsb29wOidbZGF0YS1wbHlyPSJsb29wIl0nfSxpbnB1dHM6e3NlZWs6J1tkYXRhLXBseXI9InNlZWsiXScsdm9sdW1lOidbZGF0YS1wbHlyPSJ2b2x1bWUiXScsc3BlZWQ6J1tkYXRhLXBseXI9InNwZWVkIl0nLGxhbmd1YWdlOidbZGF0YS1wbHlyPSJsYW5ndWFnZSJdJyxxdWFsaXR5OidbZGF0YS1wbHlyPSJxdWFsaXR5Il0nfSxkaXNwbGF5OntjdXJyZW50VGltZToiLnBseXJfX3RpbWUtLWN1cnJlbnQiLGR1cmF0aW9uOiIucGx5cl9fdGltZS0tZHVyYXRpb24iLGJ1ZmZlcjoiLnBseXJfX3Byb2dyZXNzX19idWZmZXIiLGxvb3A6Ii5wbHlyX19wcm9ncmVzc19fbG9vcCIsdm9sdW1lOiIucGx5cl9fdm9sdW1lLS1kaXNwbGF5In0scHJvZ3Jlc3M6Ii5wbHlyX19wcm9ncmVzcyIsY2FwdGlvbnM6Ii5wbHlyX19jYXB0aW9ucyIsY2FwdGlvbjoiLnBseXJfX2NhcHRpb24ifSxjbGFzc05hbWVzOnt0eXBlOiJwbHlyLS17MH0iLHByb3ZpZGVyOiJwbHlyLS17MH0iLHZpZGVvOiJwbHlyX192aWRlby13cmFwcGVyIixlbWJlZDoicGx5cl9fdmlkZW8tZW1iZWQiLHZpZGVvRml4ZWRSYXRpbzoicGx5cl9fdmlkZW8td3JhcHBlci0tZml4ZWQtcmF0aW8iLGVtYmVkQ29udGFpbmVyOiJwbHlyX192aWRlby1lbWJlZF9fY29udGFpbmVyIixwb3N0ZXI6InBseXJfX3Bvc3RlciIscG9zdGVyRW5hYmxlZDoicGx5cl9fcG9zdGVyLWVuYWJsZWQiLGFkczoicGx5cl9fYWRzIixjb250cm9sOiJwbHlyX19jb250cm9sIixjb250cm9sUHJlc3NlZDoicGx5cl9fY29udHJvbC0tcHJlc3NlZCIscGxheWluZzoicGx5ci0tcGxheWluZyIscGF1c2VkOiJwbHlyLS1wYXVzZWQiLHN0b3BwZWQ6InBseXItLXN0b3BwZWQiLGxvYWRpbmc6InBseXItLWxvYWRpbmciLGhvdmVyOiJwbHlyLS1ob3ZlciIsdG9vbHRpcDoicGx5cl9fdG9vbHRpcCIsY3VlczoicGx5cl9fY3VlcyIsaGlkZGVuOiJwbHlyX19zci1vbmx5IixoaWRlQ29udHJvbHM6InBseXItLWhpZGUtY29udHJvbHMiLGlzSW9zOiJwbHlyLS1pcy1pb3MiLGlzVG91Y2g6InBseXItLWlzLXRvdWNoIix1aVN1cHBvcnRlZDoicGx5ci0tZnVsbC11aSIsbm9UcmFuc2l0aW9uOiJwbHlyLS1uby10cmFuc2l0aW9uIixkaXNwbGF5Ont0aW1lOiJwbHlyX190aW1lIn0sbWVudTp7dmFsdWU6InBseXJfX21lbnVfX3ZhbHVlIixiYWRnZToicGx5cl9fYmFkZ2UiLG9wZW46InBseXItLW1lbnUtb3BlbiJ9LGNhcHRpb25zOntlbmFibGVkOiJwbHlyLS1jYXB0aW9ucy1lbmFibGVkIixhY3RpdmU6InBseXItLWNhcHRpb25zLWFjdGl2ZSJ9LGZ1bGxzY3JlZW46e2VuYWJsZWQ6InBseXItLWZ1bGxzY3JlZW4tZW5hYmxlZCIsZmFsbGJhY2s6InBseXItLWZ1bGxzY3JlZW4tZmFsbGJhY2sifSxwaXA6e3N1cHBvcnRlZDoicGx5ci0tcGlwLXN1cHBvcnRlZCIsYWN0aXZlOiJwbHlyLS1waXAtYWN0aXZlIn0sYWlycGxheTp7c3VwcG9ydGVkOiJwbHlyLS1haXJwbGF5LXN1cHBvcnRlZCIsYWN0aXZlOiJwbHlyLS1haXJwbGF5LWFjdGl2ZSJ9LHRhYkZvY3VzOiJwbHlyX190YWItZm9jdXMiLHByZXZpZXdUaHVtYm5haWxzOnt0aHVtYkNvbnRhaW5lcjoicGx5cl9fcHJldmlldy10aHVtYiIsdGh1bWJDb250YWluZXJTaG93bjoicGx5cl9fcHJldmlldy10aHVtYi0taXMtc2hvd24iLGltYWdlQ29udGFpbmVyOiJwbHlyX19wcmV2aWV3LXRodW1iX19pbWFnZS1jb250YWluZXIiLHRpbWVDb250YWluZXI6InBseXJfX3ByZXZpZXctdGh1bWJfX3RpbWUtY29udGFpbmVyIixzY3J1YmJpbmdDb250YWluZXI6InBseXJfX3ByZXZpZXctc2NydWJiaW5nIixzY3J1YmJpbmdDb250YWluZXJTaG93bjoicGx5cl9fcHJldmlldy1zY3J1YmJpbmctLWlzLXNob3duIn19LGF0dHJpYnV0ZXM6e2VtYmVkOntwcm92aWRlcjoiZGF0YS1wbHlyLXByb3ZpZGVyIixpZDoiZGF0YS1wbHlyLWVtYmVkLWlkIn19LGFkczp7ZW5hYmxlZDohMSxwdWJsaXNoZXJJZDoiIix0YWdVcmw6IiJ9LHByZXZpZXdUaHVtYm5haWxzOntlbmFibGVkOiExLHNyYzoiIn0sdmltZW86e2J5bGluZTohMSxwb3J0cmFpdDohMSx0aXRsZTohMSxzcGVlZDohMCx0cmFuc3BhcmVudDohMX0seW91dHViZTp7bm9Db29raWU6ITEscmVsOjAsc2hvd2luZm86MCxpdl9sb2FkX3BvbGljeTozLG1vZGVzdGJyYW5kaW5nOjF9fSxNZT0icGljdHVyZS1pbi1waWN0dXJlIix4ZT0iaW5saW5lIixMZT17aHRtbDU6Imh0bWw1Iix5b3V0dWJlOiJ5b3V0dWJlIix2aW1lbzoidmltZW8ifSxJZT17YXVkaW86ImF1ZGlvIix2aWRlbzoidmlkZW8ifTt2YXIgX2U9ZnVuY3Rpb24oKXt9LE9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07ZSh0aGlzLHQpLHRoaXMuZW5hYmxlZD13aW5kb3cuY29uc29sZSYmbix0aGlzLmVuYWJsZWQmJnRoaXMubG9nKCJEZWJ1Z2dpbmcgZW5hYmxlZCIpfXJldHVybiBuKHQsW3trZXk6ImxvZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZD9GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUpOl9lfX0se2tleToid2FybiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZD9GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUud2Fybixjb25zb2xlKTpfZX19LHtrZXk6ImVycm9yIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkP0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlKTpfZX19XSksdH0oKTtmdW5jdGlvbiBqZSgpe2lmKHRoaXMuZW5hYmxlZCl7dmFyIGU9dGhpcy5wbGF5ZXIuZWxlbWVudHMuYnV0dG9ucy5mdWxsc2NyZWVuO04uZWxlbWVudChlKSYmKGUucHJlc3NlZD10aGlzLmFjdGl2ZSksSC5jYWxsKHRoaXMucGxheWVyLHRoaXMudGFyZ2V0LHRoaXMuYWN0aXZlPyJlbnRlcmZ1bGxzY3JlZW4iOiJleGl0ZnVsbHNjcmVlbiIsITApLEwuaXNJb3N8fGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGwsdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKE4uZWxlbWVudChlKSl7dmFyIG49Ry5jYWxsKHRoaXMsImJ1dHRvbjpub3QoOmRpc2FibGVkKSwgaW5wdXQ6bm90KDpkaXNhYmxlZCksIFt0YWJpbmRleF0iKSxpPW5bMF0sYT1uW24ubGVuZ3RoLTFdO18uY2FsbCh0aGlzLHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCJrZXlkb3duIixmdW5jdGlvbihlKXtpZigiVGFiIj09PWUua2V5JiY5PT09ZS5rZXlDb2RlKXt2YXIgdD1kb2N1bWVudC5hY3RpdmVFbGVtZW50O3QhPT1hfHxlLnNoaWZ0S2V5P3Q9PT1pJiZlLnNoaWZ0S2V5JiYoYS5mb2N1cygpLGUucHJldmVudERlZmF1bHQoKSk6KGkuZm9jdXMoKSxlLnByZXZlbnREZWZhdWx0KCkpfX0sdCwhMSl9fS5jYWxsKHRoaXMucGxheWVyLHRoaXMudGFyZ2V0LHRoaXMuYWN0aXZlKX19ZnVuY3Rpb24gcWUoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2lmKGU/dGhpcy5zY3JvbGxQb3NpdGlvbj17eDp3aW5kb3cuc2Nyb2xsWHx8MCx5OndpbmRvdy5zY3JvbGxZfHwwfTp3aW5kb3cuc2Nyb2xsVG8odGhpcy5zY3JvbGxQb3NpdGlvbi54LHRoaXMuc2Nyb2xsUG9zaXRpb24ueSksZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz1lPyJoaWRkZW4iOiIiLFgodGhpcy50YXJnZXQsdGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMuZnVsbHNjcmVlbi5mYWxsYmFjayxlKSxMLmlzSW9zKXt2YXIgdD1kb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT0idmlld3BvcnQiXScpLG49InZpZXdwb3J0LWZpdD1jb3ZlciI7dHx8KHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibWV0YSIpKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ2aWV3cG9ydCIpO3ZhciBpPU4uc3RyaW5nKHQuY29udGVudCkmJnQuY29udGVudC5pbmNsdWRlcyhuKTtlPyh0aGlzLmNsZWFudXBWaWV3cG9ydD0haSxpfHwodC5jb250ZW50Kz0iLCIuY29uY2F0KG4pKSk6dGhpcy5jbGVhbnVwVmlld3BvcnQmJih0LmNvbnRlbnQ9dC5jb250ZW50LnNwbGl0KCIsIikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKSE9PW59KS5qb2luKCIsIikpfWplLmNhbGwodGhpcyl9dmFyIEhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuKXt2YXIgaT10aGlzO2UodGhpcyx0KSx0aGlzLnBsYXllcj1uLHRoaXMucHJlZml4PXQucHJlZml4LHRoaXMucHJvcGVydHk9dC5wcm9wZXJ0eSx0aGlzLnNjcm9sbFBvc2l0aW9uPXt4OjAseTowfSx0aGlzLmZvcmNlRmFsbGJhY2s9ImZvcmNlIj09PW4uY29uZmlnLmZ1bGxzY3JlZW4uZmFsbGJhY2ssTy5jYWxsKHRoaXMucGxheWVyLGRvY3VtZW50LCJtcyI9PT10aGlzLnByZWZpeD8iTVNGdWxsc2NyZWVuQ2hhbmdlIjoiIi5jb25jYXQodGhpcy5wcmVmaXgsImZ1bGxzY3JlZW5jaGFuZ2UiKSxmdW5jdGlvbigpe2plLmNhbGwoaSl9KSxPLmNhbGwodGhpcy5wbGF5ZXIsdGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLCJkYmxjbGljayIsZnVuY3Rpb24oZSl7Ti5lbGVtZW50KGkucGxheWVyLmVsZW1lbnRzLmNvbnRyb2xzKSYmaS5wbGF5ZXIuZWxlbWVudHMuY29udHJvbHMuY29udGFpbnMoZS50YXJnZXQpfHxpLnRvZ2dsZSgpfSksdGhpcy51cGRhdGUoKX1yZXR1cm4gbih0LFt7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5lbmFibGVkPyhlPXRoaXMuZm9yY2VGYWxsYmFjaz8iRmFsbGJhY2sgKGZvcmNlZCkiOnQubmF0aXZlPyJOYXRpdmUiOiJGYWxsYmFjayIsdGhpcy5wbGF5ZXIuZGVidWcubG9nKCIiLmNvbmNhdChlLCIgZnVsbHNjcmVlbiBlbmFibGVkIikpKTp0aGlzLnBsYXllci5kZWJ1Zy5sb2coIkZ1bGxzY3JlZW4gbm90IHN1cHBvcnRlZCBhbmQgZmFsbGJhY2sgZGlzYWJsZWQiKTtYKHRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5mdWxsc2NyZWVuLmVuYWJsZWQsdGhpcy5lbmFibGVkKX19LHtrZXk6ImVudGVyIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZCYmKEwuaXNJb3MmJnRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZT90aGlzLnRhcmdldC53ZWJraXRFbnRlckZ1bGxzY3JlZW4oKTohdC5uYXRpdmV8fHRoaXMuZm9yY2VGYWxsYmFjaz9xZS5jYWxsKHRoaXMsITApOnRoaXMucHJlZml4P04uZW1wdHkodGhpcy5wcmVmaXgpfHx0aGlzLnRhcmdldFsiIi5jb25jYXQodGhpcy5wcmVmaXgsIlJlcXVlc3QiKS5jb25jYXQodGhpcy5wcm9wZXJ0eSldKCk6dGhpcy50YXJnZXQucmVxdWVzdEZ1bGxzY3JlZW4oKSl9fSx7a2V5OiJleGl0Iix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuZW5hYmxlZClpZihMLmlzSW9zJiZ0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5pb3NOYXRpdmUpdGhpcy50YXJnZXQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKSx0aGlzLnBsYXllci5wbGF5KCk7ZWxzZSBpZighdC5uYXRpdmV8fHRoaXMuZm9yY2VGYWxsYmFjaylxZS5jYWxsKHRoaXMsITEpO2Vsc2UgaWYodGhpcy5wcmVmaXgpe2lmKCFOLmVtcHR5KHRoaXMucHJlZml4KSl7dmFyIGU9Im1veiI9PT10aGlzLnByZWZpeD8iQ2FuY2VsIjoiRXhpdCI7ZG9jdW1lbnRbIiIuY29uY2F0KHRoaXMucHJlZml4KS5jb25jYXQoZSkuY29uY2F0KHRoaXMucHJvcGVydHkpXSgpfX1lbHNlKGRvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW58fGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKS5jYWxsKGRvY3VtZW50KX19LHtrZXk6InRvZ2dsZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZT90aGlzLmV4aXQoKTp0aGlzLmVudGVyKCl9fSx7a2V5OiJ1c2luZ05hdGl2ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQubmF0aXZlJiYhdGhpcy5mb3JjZUZhbGxiYWNrfX0se2tleToiZW5hYmxlZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuKHQubmF0aXZlfHx0aGlzLnBsYXllci5jb25maWcuZnVsbHNjcmVlbi5mYWxsYmFjaykmJnRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmVuYWJsZWQmJnRoaXMucGxheWVyLnN1cHBvcnRlZC51aSYmdGhpcy5wbGF5ZXIuaXNWaWRlb319LHtrZXk6ImFjdGl2ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmVuYWJsZWQmJighdC5uYXRpdmV8fHRoaXMuZm9yY2VGYWxsYmFjaz9KKHRoaXMudGFyZ2V0LHRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLmZ1bGxzY3JlZW4uZmFsbGJhY2spOih0aGlzLnByZWZpeD9kb2N1bWVudFsiIi5jb25jYXQodGhpcy5wcmVmaXgpLmNvbmNhdCh0aGlzLnByb3BlcnR5LCJFbGVtZW50IildOmRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KT09PXRoaXMudGFyZ2V0KX19LHtrZXk6InRhcmdldCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEwuaXNJb3MmJnRoaXMucGxheWVyLmNvbmZpZy5mdWxsc2NyZWVuLmlvc05hdGl2ZT90aGlzLnBsYXllci5tZWRpYTp0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXJ9fV0sW3trZXk6Im5hdGl2ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISEoZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWR8fGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkfHxkb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZHx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRW5hYmxlZCl9fSx7a2V5OiJwcmVmaXgiLGdldDpmdW5jdGlvbigpe2lmKE4uZnVuY3Rpb24oZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pKXJldHVybiIiO3ZhciBlPSIiO3JldHVyblsid2Via2l0IiwibW96IiwibXMiXS5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiEoIU4uZnVuY3Rpb24oZG9jdW1lbnRbIiIuY29uY2F0KHQsIkV4aXRGdWxsc2NyZWVuIildKSYmIU4uZnVuY3Rpb24oZG9jdW1lbnRbIiIuY29uY2F0KHQsIkNhbmNlbEZ1bGxTY3JlZW4iKV0pKSYmKGU9dCwhMCl9KSxlfX0se2tleToicHJvcGVydHkiLGdldDpmdW5jdGlvbigpe3JldHVybiJtb3oiPT09dGhpcy5wcmVmaXg/IkZ1bGxTY3JlZW4iOiJGdWxsc2NyZWVuIn19XSksdH0oKTtmdW5jdGlvbiBEZShlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixpKXt2YXIgYT1uZXcgSW1hZ2Uscz1mdW5jdGlvbigpe2RlbGV0ZSBhLm9ubG9hZCxkZWxldGUgYS5vbmVycm9yLChhLm5hdHVyYWxXaWR0aD49dD9uOmkpKGEpfTtPYmplY3QuYXNzaWduKGEse29ubG9hZDpzLG9uZXJyb3I6cyxzcmM6ZX0pfSl9dmFyIEZlPXthZGRTdHlsZUhvb2s6ZnVuY3Rpb24oKXtYKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLnNlbGVjdG9ycy5jb250YWluZXIucmVwbGFjZSgiLiIsIiIpLCEwKSxYKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMudWlTdXBwb3J0ZWQsdGhpcy5zdXBwb3J0ZWQudWkpfSx0b2dnbGVOYXRpdmVDb250cm9sczpmdW5jdGlvbigpe2FyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0mJnRoaXMuaXNIVE1MNT90aGlzLm1lZGlhLnNldEF0dHJpYnV0ZSgiY29udHJvbHMiLCIiKTp0aGlzLm1lZGlhLnJlbW92ZUF0dHJpYnV0ZSgiY29udHJvbHMiKX0sYnVpbGQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMubGlzdGVuZXJzLm1lZGlhKCksIXRoaXMuc3VwcG9ydGVkLnVpKXJldHVybiB0aGlzLmRlYnVnLndhcm4oIkJhc2ljIHN1cHBvcnQgb25seSBmb3IgIi5jb25jYXQodGhpcy5wcm92aWRlciwiICIpLmNvbmNhdCh0aGlzLnR5cGUpKSx2b2lkIEZlLnRvZ2dsZU5hdGl2ZUNvbnRyb2xzLmNhbGwodGhpcywhMCk7Ti5lbGVtZW50KHRoaXMuZWxlbWVudHMuY29udHJvbHMpfHwoQWUuaW5qZWN0LmNhbGwodGhpcyksdGhpcy5saXN0ZW5lcnMuY29udHJvbHMoKSksRmUudG9nZ2xlTmF0aXZlQ29udHJvbHMuY2FsbCh0aGlzKSx0aGlzLmlzSFRNTDUmJlBlLnNldHVwLmNhbGwodGhpcyksdGhpcy52b2x1bWU9bnVsbCx0aGlzLm11dGVkPW51bGwsdGhpcy5sb29wPW51bGwsdGhpcy5xdWFsaXR5PW51bGwsdGhpcy5zcGVlZD1udWxsLEFlLnVwZGF0ZVZvbHVtZS5jYWxsKHRoaXMpLEFlLnRpbWVVcGRhdGUuY2FsbCh0aGlzKSxGZS5jaGVja1BsYXlpbmcuY2FsbCh0aGlzKSxYKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucGlwLnN1cHBvcnRlZCxpZS5waXAmJnRoaXMuaXNIVE1MNSYmdGhpcy5pc1ZpZGVvKSxYKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuYWlycGxheS5zdXBwb3J0ZWQsaWUuYWlycGxheSYmdGhpcy5pc0hUTUw1KSxYKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaXNJb3MsTC5pc0lvcyksWCh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmlzVG91Y2gsdGhpcy50b3VjaCksdGhpcy5yZWFkeT0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SC5jYWxsKGUsZS5tZWRpYSwicmVhZHkiKX0sMCksRmUuc2V0VGl0bGUuY2FsbCh0aGlzKSx0aGlzLnBvc3RlciYmRmUuc2V0UG9zdGVyLmNhbGwodGhpcyx0aGlzLnBvc3RlciwhMSkuY2F0Y2goZnVuY3Rpb24oKXt9KSx0aGlzLmNvbmZpZy5kdXJhdGlvbiYmQWUuZHVyYXRpb25VcGRhdGUuY2FsbCh0aGlzKX0sc2V0VGl0bGU6ZnVuY3Rpb24oKXt2YXIgZT1nZSgicGxheSIsdGhpcy5jb25maWcpO2lmKE4uc3RyaW5nKHRoaXMuY29uZmlnLnRpdGxlKSYmIU4uZW1wdHkodGhpcy5jb25maWcudGl0bGUpJiYoZSs9IiwgIi5jb25jYXQodGhpcy5jb25maWcudGl0bGUpKSxBcnJheS5mcm9tKHRoaXMuZWxlbWVudHMuYnV0dG9ucy5wbGF5fHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsZSl9KSx0aGlzLmlzRW1iZWQpe3ZhciB0PVouY2FsbCh0aGlzLCJpZnJhbWUiKTtpZighTi5lbGVtZW50KHQpKXJldHVybjt2YXIgbj1OLmVtcHR5KHRoaXMuY29uZmlnLnRpdGxlKT8idmlkZW8iOnRoaXMuY29uZmlnLnRpdGxlLGk9Z2UoImZyYW1lVGl0bGUiLHRoaXMuY29uZmlnKTt0LnNldEF0dHJpYnV0ZSgidGl0bGUiLGkucmVwbGFjZSgie3RpdGxlfSIsbikpfX0sdG9nZ2xlUG9zdGVyOmZ1bmN0aW9uKGUpe1godGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wb3N0ZXJFbmFibGVkLGUpfSxzZXRQb3N0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJiFhcmd1bWVudHNbMV18fCF0aGlzLnBvc3Rlcj8odGhpcy5tZWRpYS5zZXRBdHRyaWJ1dGUoInBvc3RlciIsZSksZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtyZXR1cm4gZS5yZWFkeT9zZXRUaW1lb3V0KHQsMCk6Ty5jYWxsKGUsZS5lbGVtZW50cy5jb250YWluZXIsInJlYWR5Iix0KX0pLnRoZW4oZnVuY3Rpb24oKXt9KX0uY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIERlKGUpfSkuY2F0Y2goZnVuY3Rpb24obil7dGhyb3cgZT09PXQucG9zdGVyJiZGZS50b2dnbGVQb3N0ZXIuY2FsbCh0LCExKSxufSkudGhlbihmdW5jdGlvbigpe2lmKGUhPT10LnBvc3Rlcil0aHJvdyBuZXcgRXJyb3IoInNldFBvc3RlciBjYW5jZWxsZWQgYnkgbGF0ZXIgY2FsbCB0byBzZXRQb3N0ZXIiKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmFzc2lnbih0LmVsZW1lbnRzLnBvc3Rlci5zdHlsZSx7YmFja2dyb3VuZEltYWdlOiJ1cmwoJyIuY29uY2F0KGUsIicpIiksYmFja2dyb3VuZFNpemU6IiJ9KSxGZS50b2dnbGVQb3N0ZXIuY2FsbCh0LCEwKSxlfSkpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiUG9zdGVyIGFscmVhZHkgc2V0IikpfSxjaGVja1BsYXlpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztYKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMucGxheWluZyx0aGlzLnBsYXlpbmcpLFgodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5wYXVzZWQsdGhpcy5wYXVzZWQpLFgodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5zdG9wcGVkLHRoaXMuc3RvcHBlZCksQXJyYXkuZnJvbSh0aGlzLmVsZW1lbnRzLmJ1dHRvbnMucGxheXx8W10pLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0LmFzc2lnbihlLHtwcmVzc2VkOnQucGxheWluZ30pfSksTi5ldmVudChlKSYmInRpbWV1cGRhdGUiPT09ZS50eXBlfHxGZS50b2dnbGVDb250cm9scy5jYWxsKHRoaXMpfSxjaGVja0xvYWRpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmxvYWRpbmc9WyJzdGFsbGVkIiwid2FpdGluZyJdLmluY2x1ZGVzKGUudHlwZSksY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmxvYWRpbmcpLHRoaXMudGltZXJzLmxvYWRpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe1godC5lbGVtZW50cy5jb250YWluZXIsdC5jb25maWcuY2xhc3NOYW1lcy5sb2FkaW5nLHQubG9hZGluZyksRmUudG9nZ2xlQ29udHJvbHMuY2FsbCh0KX0sdGhpcy5sb2FkaW5nPzI1MDowKX0sdG9nZ2xlQ29udHJvbHM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50cy5jb250cm9scztpZih0JiZ0aGlzLmNvbmZpZy5oaWRlQ29udHJvbHMpe3ZhciBuPXRoaXMudG91Y2gmJnRoaXMubGFzdFNlZWtUaW1lKzJlMz5EYXRlLm5vdygpO3RoaXMudG9nZ2xlQ29udHJvbHMoQm9vbGVhbihlfHx0aGlzLmxvYWRpbmd8fHRoaXMucGF1c2VkfHx0LnByZXNzZWR8fHQuaG92ZXJ8fG4pKX19fSxSZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQobil7ZSh0aGlzLHQpLHRoaXMucGxheWVyPW4sdGhpcy5sYXN0S2V5PW51bGwsdGhpcy5mb2N1c1RpbWVyPW51bGwsdGhpcy5sYXN0S2V5RG93bj1udWxsLHRoaXMuaGFuZGxlS2V5PXRoaXMuaGFuZGxlS2V5LmJpbmQodGhpcyksdGhpcy50b2dnbGVNZW51PXRoaXMudG9nZ2xlTWVudS5iaW5kKHRoaXMpLHRoaXMuc2V0VGFiRm9jdXM9dGhpcy5zZXRUYWJGb2N1cy5iaW5kKHRoaXMpLHRoaXMuZmlyc3RUb3VjaD10aGlzLmZpcnN0VG91Y2guYmluZCh0aGlzKX1yZXR1cm4gbih0LFt7a2V5OiJoYW5kbGVLZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGxheWVyLG49dC5lbGVtZW50cyxpPWUua2V5Q29kZT9lLmtleUNvZGU6ZS53aGljaCxhPSJrZXlkb3duIj09PWUudHlwZSxzPWEmJmk9PT10aGlzLmxhc3RLZXk7aWYoIShlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLm1ldGFLZXl8fGUuc2hpZnRLZXkpJiZOLm51bWJlcihpKSl7aWYoYSl7dmFyIHI9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZihOLmVsZW1lbnQocikpe3ZhciBvPXQuY29uZmlnLnNlbGVjdG9ycy5lZGl0YWJsZTtpZihyIT09bi5pbnB1dHMuc2VlayYmJChyLG8pKXJldHVybjtpZigzMj09PWUud2hpY2gmJiQociwnYnV0dG9uLCBbcm9sZV49Im1lbnVpdGVtIl0nKSlyZXR1cm59c3dpdGNoKFszMiwzNywzOCwzOSw0MCw0OCw0OSw1MCw1MSw1Miw1Myw1NCw1Niw1Nyw2Nyw3MCw3Myw3NSw3Niw3Nyw3OV0uaW5jbHVkZXMoaSkmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSksaSl7Y2FzZSA0ODpjYXNlIDQ5OmNhc2UgNTA6Y2FzZSA1MTpjYXNlIDUyOmNhc2UgNTM6Y2FzZSA1NDpjYXNlIDU1OmNhc2UgNTY6Y2FzZSA1NzpzfHwodC5jdXJyZW50VGltZT10LmR1cmF0aW9uLzEwKihpLTQ4KSk7YnJlYWs7Y2FzZSAzMjpjYXNlIDc1OnN8fHQudG9nZ2xlUGxheSgpO2JyZWFrO2Nhc2UgMzg6dC5pbmNyZWFzZVZvbHVtZSguMSk7YnJlYWs7Y2FzZSA0MDp0LmRlY3JlYXNlVm9sdW1lKC4xKTticmVhaztjYXNlIDc3OnN8fCh0Lm11dGVkPSF0Lm11dGVkKTticmVhaztjYXNlIDM5OnQuZm9yd2FyZCgpO2JyZWFrO2Nhc2UgMzc6dC5yZXdpbmQoKTticmVhaztjYXNlIDcwOnQuZnVsbHNjcmVlbi50b2dnbGUoKTticmVhaztjYXNlIDY3OnN8fHQudG9nZ2xlQ2FwdGlvbnMoKTticmVhaztjYXNlIDc2OnQubG9vcD0hdC5sb29wfTI3PT09aSYmIXQuZnVsbHNjcmVlbi51c2luZ05hdGl2ZSYmdC5mdWxsc2NyZWVuLmFjdGl2ZSYmdC5mdWxsc2NyZWVuLnRvZ2dsZSgpLHRoaXMubGFzdEtleT1pfWVsc2UgdGhpcy5sYXN0S2V5PW51bGx9fX0se2tleToidG9nZ2xlTWVudSIsdmFsdWU6ZnVuY3Rpb24oZSl7QWUudG9nZ2xlTWVudS5jYWxsKHRoaXMucGxheWVyLGUpfX0se2tleToiZmlyc3RUb3VjaCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBsYXllcix0PWUuZWxlbWVudHM7ZS50b3VjaD0hMCxYKHQuY29udGFpbmVyLGUuY29uZmlnLmNsYXNzTmFtZXMuaXNUb3VjaCwhMCl9fSx7a2V5OiJzZXRUYWJGb2N1cyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wbGF5ZXIsbj10LmVsZW1lbnRzO2lmKGNsZWFyVGltZW91dCh0aGlzLmZvY3VzVGltZXIpLCJrZXlkb3duIiE9PWUudHlwZXx8OT09PWUud2hpY2gpeyJrZXlkb3duIj09PWUudHlwZSYmKHRoaXMubGFzdEtleURvd249ZS50aW1lU3RhbXApO3ZhciBpLGE9ZS50aW1lU3RhbXAtdGhpcy5sYXN0S2V5RG93bjw9MjA7aWYoImZvY3VzIiE9PWUudHlwZXx8YSlpPXQuY29uZmlnLmNsYXNzTmFtZXMudGFiRm9jdXMsWChHLmNhbGwodCwiLiIuY29uY2F0KGkpKSxpLCExKSx0aGlzLmZvY3VzVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7bi5jb250YWluZXIuY29udGFpbnMoZSkmJlgoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCx0LmNvbmZpZy5jbGFzc05hbWVzLnRhYkZvY3VzLCEwKX0sMTApfX19LHtrZXk6Imdsb2JhbCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdLHQ9dGhpcy5wbGF5ZXI7dC5jb25maWcua2V5Ym9hcmQuZ2xvYmFsJiZfLmNhbGwodCx3aW5kb3csImtleWRvd24ga2V5dXAiLHRoaXMuaGFuZGxlS2V5LGUsITEpLF8uY2FsbCh0LGRvY3VtZW50LmJvZHksImNsaWNrIix0aGlzLnRvZ2dsZU1lbnUsZSkscS5jYWxsKHQsZG9jdW1lbnQuYm9keSwidG91Y2hzdGFydCIsdGhpcy5maXJzdFRvdWNoKSxfLmNhbGwodCxkb2N1bWVudC5ib2R5LCJrZXlkb3duIGZvY3VzIGJsdXIiLHRoaXMuc2V0VGFiRm9jdXMsZSwhMSwhMCl9fSx7a2V5OiJjb250YWluZXIiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wbGF5ZXIsdD1lLmNvbmZpZyxuPWUuZWxlbWVudHMsaT1lLnRpbWVyczshdC5rZXlib2FyZC5nbG9iYWwmJnQua2V5Ym9hcmQuZm9jdXNlZCYmTy5jYWxsKGUsbi5jb250YWluZXIsImtleWRvd24ga2V5dXAiLHRoaXMuaGFuZGxlS2V5LCExKSxPLmNhbGwoZSxuLmNvbnRhaW5lciwibW91c2Vtb3ZlIG1vdXNlbGVhdmUgdG91Y2hzdGFydCB0b3VjaG1vdmUgZW50ZXJmdWxsc2NyZWVuIGV4aXRmdWxsc2NyZWVuIixmdW5jdGlvbih0KXt2YXIgYT1uLmNvbnRyb2xzO2EmJiJlbnRlcmZ1bGxzY3JlZW4iPT09dC50eXBlJiYoYS5wcmVzc2VkPSExLGEuaG92ZXI9ITEpO3ZhciBzPTA7WyJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwibW91c2Vtb3ZlIl0uaW5jbHVkZXModC50eXBlKSYmKEZlLnRvZ2dsZUNvbnRyb2xzLmNhbGwoZSwhMCkscz1lLnRvdWNoPzNlMzoyZTMpLGNsZWFyVGltZW91dChpLmNvbnRyb2xzKSxpLmNvbnRyb2xzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gRmUudG9nZ2xlQ29udHJvbHMuY2FsbChlLCExKX0scyl9KTt2YXIgcz1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gb2UuY2FsbChlKTt2YXIgaT1uLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPWkud2lkdGgscz1pLmhlaWdodDtyZXR1cm4gb2UuY2FsbChlLCIiLmNvbmNhdChhLCI6IikuY29uY2F0KHMpKX0scj1mdW5jdGlvbigpe2NsZWFyVGltZW91dChpLnJlc2l6ZWQpLGkucmVzaXplZD1zZXRUaW1lb3V0KHMsNTApfTtPLmNhbGwoZSxuLmNvbnRhaW5lciwiZW50ZXJmdWxsc2NyZWVuIGV4aXRmdWxsc2NyZWVuIixmdW5jdGlvbih0KXt2YXIgaT1lLmZ1bGxzY3JlZW4sbz1pLnRhcmdldCxsPWkudXNpbmdOYXRpdmU7aWYobz09PW4uY29udGFpbmVyJiYoZS5pc0VtYmVkfHwhTi5lbXB0eShlLmNvbmZpZy5yYXRpbykpKXt2YXIgYz0iZW50ZXJmdWxsc2NyZWVuIj09PXQudHlwZSx1PXMoYyk7dS5wYWRkaW5nOyFmdW5jdGlvbih0LG4saSl7aWYoZS5pc1ZpbWVvKXt2YXIgcz1lLmVsZW1lbnRzLndyYXBwZXIuZmlyc3RDaGlsZCxyPWEodCwyKVsxXSxvPWEocmUuY2FsbChlKSwyKSxsPW9bMF0sYz1vWzFdO3Muc3R5bGUubWF4V2lkdGg9aT8iIi5jb25jYXQoci9jKmwsInB4Iik6bnVsbCxzLnN0eWxlLm1hcmdpbj1pPyIwIGF1dG8iOm51bGx9fSh1LnJhdGlvLDAsYyksbHx8KGM/Ty5jYWxsKGUsd2luZG93LCJyZXNpemUiLHIpOmouY2FsbChlLHdpbmRvdywicmVzaXplIixyKSl9fSl9fSx7a2V5OiJtZWRpYSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wbGF5ZXIsbj10LmVsZW1lbnRzO2lmKE8uY2FsbCh0LHQubWVkaWEsInRpbWV1cGRhdGUgc2Vla2luZyBzZWVrZWQiLGZ1bmN0aW9uKGUpe3JldHVybiBBZS50aW1lVXBkYXRlLmNhbGwodCxlKX0pLE8uY2FsbCh0LHQubWVkaWEsImR1cmF0aW9uY2hhbmdlIGxvYWRlZGRhdGEgbG9hZGVkbWV0YWRhdGEiLGZ1bmN0aW9uKGUpe3JldHVybiBBZS5kdXJhdGlvblVwZGF0ZS5jYWxsKHQsZSl9KSxPLmNhbGwodCx0Lm1lZGlhLCJjYW5wbGF5IGxvYWRlZGRhdGEiLGZ1bmN0aW9uKCl7UShuLnZvbHVtZSwhdC5oYXNBdWRpbyksUShuLmJ1dHRvbnMubXV0ZSwhdC5oYXNBdWRpbyl9KSxPLmNhbGwodCx0Lm1lZGlhLCJlbmRlZCIsZnVuY3Rpb24oKXt0LmlzSFRNTDUmJnQuaXNWaWRlbyYmdC5jb25maWcucmVzZXRPbkVuZCYmdC5yZXN0YXJ0KCl9KSxPLmNhbGwodCx0Lm1lZGlhLCJwcm9ncmVzcyBwbGF5aW5nIHNlZWtpbmcgc2Vla2VkIixmdW5jdGlvbihlKXtyZXR1cm4gQWUudXBkYXRlUHJvZ3Jlc3MuY2FsbCh0LGUpfSksTy5jYWxsKHQsdC5tZWRpYSwidm9sdW1lY2hhbmdlIixmdW5jdGlvbihlKXtyZXR1cm4gQWUudXBkYXRlVm9sdW1lLmNhbGwodCxlKX0pLE8uY2FsbCh0LHQubWVkaWEsInBsYXlpbmcgcGxheSBwYXVzZSBlbmRlZCBlbXB0aWVkIHRpbWV1cGRhdGUiLGZ1bmN0aW9uKGUpe3JldHVybiBGZS5jaGVja1BsYXlpbmcuY2FsbCh0LGUpfSksTy5jYWxsKHQsdC5tZWRpYSwid2FpdGluZyBjYW5wbGF5IHNlZWtlZCBwbGF5aW5nIixmdW5jdGlvbihlKXtyZXR1cm4gRmUuY2hlY2tMb2FkaW5nLmNhbGwodCxlKX0pLHQuc3VwcG9ydGVkLnVpJiZ0LmNvbmZpZy5jbGlja1RvUGxheSYmIXQuaXNBdWRpbyl7dmFyIGk9Wi5jYWxsKHQsIi4iLmNvbmNhdCh0LmNvbmZpZy5jbGFzc05hbWVzLnZpZGVvKSk7aWYoIU4uZWxlbWVudChpKSlyZXR1cm47Ty5jYWxsKHQsbi5jb250YWluZXIsImNsaWNrIixmdW5jdGlvbihhKXsoW24uY29udGFpbmVyLGldLmluY2x1ZGVzKGEudGFyZ2V0KXx8aS5jb250YWlucyhhLnRhcmdldCkpJiYodC50b3VjaCYmdC5jb25maWcuaGlkZUNvbnRyb2xzfHwodC5lbmRlZD8oZS5wcm94eShhLHQucmVzdGFydCwicmVzdGFydCIpLGUucHJveHkoYSx0LnBsYXksInBsYXkiKSk6ZS5wcm94eShhLHQudG9nZ2xlUGxheSwicGxheSIpKSl9KX10LnN1cHBvcnRlZC51aSYmdC5jb25maWcuZGlzYWJsZUNvbnRleHRNZW51JiZPLmNhbGwodCxuLndyYXBwZXIsImNvbnRleHRtZW51IixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9LCExKSxPLmNhbGwodCx0Lm1lZGlhLCJ2b2x1bWVjaGFuZ2UiLGZ1bmN0aW9uKCl7dC5zdG9yYWdlLnNldCh7dm9sdW1lOnQudm9sdW1lLG11dGVkOnQubXV0ZWR9KX0pLE8uY2FsbCh0LHQubWVkaWEsInJhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7QWUudXBkYXRlU2V0dGluZy5jYWxsKHQsInNwZWVkIiksdC5zdG9yYWdlLnNldCh7c3BlZWQ6dC5zcGVlZH0pfSksTy5jYWxsKHQsdC5tZWRpYSwicXVhbGl0eWNoYW5nZSIsZnVuY3Rpb24oZSl7QWUudXBkYXRlU2V0dGluZy5jYWxsKHQsInF1YWxpdHkiLG51bGwsZS5kZXRhaWwucXVhbGl0eSl9KSxPLmNhbGwodCx0Lm1lZGlhLCJyZWFkeSBxdWFsaXR5Y2hhbmdlIixmdW5jdGlvbigpe0FlLnNldERvd25sb2FkVXJsLmNhbGwodCl9KTt2YXIgYT10LmNvbmZpZy5ldmVudHMuY29uY2F0KFsia2V5dXAiLCJrZXlkb3duIl0pLmpvaW4oIiAiKTtPLmNhbGwodCx0Lm1lZGlhLGEsZnVuY3Rpb24oZSl7dmFyIGk9ZS5kZXRhaWwsYT12b2lkIDA9PT1pP3t9Omk7ImVycm9yIj09PWUudHlwZSYmKGE9dC5tZWRpYS5lcnJvciksSC5jYWxsKHQsbi5jb250YWluZXIsZS50eXBlLCEwLGEpfSl9fSx7a2V5OiJwcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMucGxheWVyLGE9aS5jb25maWcubGlzdGVuZXJzW25dLHM9ITA7Ti5mdW5jdGlvbihhKSYmKHM9YS5jYWxsKGksZSkpLHMmJk4uZnVuY3Rpb24odCkmJnQuY2FsbChpLGUpfX0se2tleToiYmluZCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIGE9dGhpcyxzPSEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF0scj10aGlzLnBsYXllcixvPXIuY29uZmlnLmxpc3RlbmVyc1tpXSxsPU4uZnVuY3Rpb24obyk7Ty5jYWxsKHIsZSx0LGZ1bmN0aW9uKGUpe3JldHVybiBhLnByb3h5KGUsbixpKX0scyYmIWwpfX0se2tleToiY29udHJvbHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMucGxheWVyLG49dC5lbGVtZW50cyxpPUwuaXNJRT8iY2hhbmdlIjoiaW5wdXQiO2lmKG4uYnV0dG9ucy5wbGF5JiZBcnJheS5mcm9tKG4uYnV0dG9ucy5wbGF5KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2UuYmluZChuLCJjbGljayIsdC50b2dnbGVQbGF5LCJwbGF5Iil9KSx0aGlzLmJpbmQobi5idXR0b25zLnJlc3RhcnQsImNsaWNrIix0LnJlc3RhcnQsInJlc3RhcnQiKSx0aGlzLmJpbmQobi5idXR0b25zLnJld2luZCwiY2xpY2siLHQucmV3aW5kLCJyZXdpbmQiKSx0aGlzLmJpbmQobi5idXR0b25zLmZhc3RGb3J3YXJkLCJjbGljayIsdC5mb3J3YXJkLCJmYXN0Rm9yd2FyZCIpLHRoaXMuYmluZChuLmJ1dHRvbnMubXV0ZSwiY2xpY2siLGZ1bmN0aW9uKCl7dC5tdXRlZD0hdC5tdXRlZH0sIm11dGUiKSx0aGlzLmJpbmQobi5idXR0b25zLmNhcHRpb25zLCJjbGljayIsZnVuY3Rpb24oKXtyZXR1cm4gdC50b2dnbGVDYXB0aW9ucygpfSksdGhpcy5iaW5kKG4uYnV0dG9ucy5kb3dubG9hZCwiY2xpY2siLGZ1bmN0aW9uKCl7SC5jYWxsKHQsdC5tZWRpYSwiZG93bmxvYWQiKX0sImRvd25sb2FkIiksdGhpcy5iaW5kKG4uYnV0dG9ucy5mdWxsc2NyZWVuLCJjbGljayIsZnVuY3Rpb24oKXt0LmZ1bGxzY3JlZW4udG9nZ2xlKCl9LCJmdWxsc2NyZWVuIiksdGhpcy5iaW5kKG4uYnV0dG9ucy5waXAsImNsaWNrIixmdW5jdGlvbigpe3QucGlwPSJ0b2dnbGUifSwicGlwIiksdGhpcy5iaW5kKG4uYnV0dG9ucy5haXJwbGF5LCJjbGljayIsdC5haXJwbGF5LCJhaXJwbGF5IiksdGhpcy5iaW5kKG4uYnV0dG9ucy5zZXR0aW5ncywiY2xpY2siLGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksQWUudG9nZ2xlTWVudS5jYWxsKHQsZSl9KSx0aGlzLmJpbmQobi5idXR0b25zLnNldHRpbmdzLCJrZXl1cCIsZnVuY3Rpb24oZSl7dmFyIG49ZS53aGljaDtbMTMsMzJdLmluY2x1ZGVzKG4pJiYoMTMhPT1uPyhlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSxBZS50b2dnbGVNZW51LmNhbGwodCxlKSk6QWUuZm9jdXNGaXJzdE1lbnVJdGVtLmNhbGwodCxudWxsLCEwKSl9LG51bGwsITEpLHRoaXMuYmluZChuLnNldHRpbmdzLm1lbnUsImtleWRvd24iLGZ1bmN0aW9uKGUpezI3PT09ZS53aGljaCYmQWUudG9nZ2xlTWVudS5jYWxsKHQsZSl9KSx0aGlzLmJpbmQobi5pbnB1dHMuc2VlaywibW91c2Vkb3duIG1vdXNlbW92ZSIsZnVuY3Rpb24oZSl7dmFyIHQ9bi5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPTEwMC90LndpZHRoKihlLnBhZ2VYLXQubGVmdCk7ZS5jdXJyZW50VGFyZ2V0LnNldEF0dHJpYnV0ZSgic2Vlay12YWx1ZSIsaSl9KSx0aGlzLmJpbmQobi5pbnB1dHMuc2VlaywibW91c2Vkb3duIG1vdXNldXAga2V5ZG93biBrZXl1cCB0b3VjaHN0YXJ0IHRvdWNoZW5kIixmdW5jdGlvbihlKXt2YXIgbj1lLmN1cnJlbnRUYXJnZXQsaT1lLmtleUNvZGU/ZS5rZXlDb2RlOmUud2hpY2g7aWYoIU4ua2V5Ym9hcmRFdmVudChlKXx8Mzk9PT1pfHwzNz09PWkpe3QubGFzdFNlZWtUaW1lPURhdGUubm93KCk7dmFyIGE9bi5oYXNBdHRyaWJ1dGUoInBsYXktb24tc2Vla2VkIikscz1bIm1vdXNldXAiLCJ0b3VjaGVuZCIsImtleXVwIl0uaW5jbHVkZXMoZS50eXBlKTthJiZzPyhuLnJlbW92ZUF0dHJpYnV0ZSgicGxheS1vbi1zZWVrZWQiKSx0LnBsYXkoKSk6IXMmJnQucGxheWluZyYmKG4uc2V0QXR0cmlidXRlKCJwbGF5LW9uLXNlZWtlZCIsIiIpLHQucGF1c2UoKSl9fSksTC5pc0lvcyl7dmFyIHM9Ry5jYWxsKHQsJ2lucHV0W3R5cGU9InJhbmdlIl0nKTtBcnJheS5mcm9tKHMpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuYmluZCh0LGksZnVuY3Rpb24oZSl7cmV0dXJuIHgoZS50YXJnZXQpfSl9KX10aGlzLmJpbmQobi5pbnB1dHMuc2VlayxpLGZ1bmN0aW9uKGUpe3ZhciBuPWUuY3VycmVudFRhcmdldCxpPW4uZ2V0QXR0cmlidXRlKCJzZWVrLXZhbHVlIik7Ti5lbXB0eShpKSYmKGk9bi52YWx1ZSksbi5yZW1vdmVBdHRyaWJ1dGUoInNlZWstdmFsdWUiKSx0LmN1cnJlbnRUaW1lPWkvbi5tYXgqdC5kdXJhdGlvbn0sInNlZWsiKSx0aGlzLmJpbmQobi5wcm9ncmVzcywibW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIEFlLnVwZGF0ZVNlZWtUb29sdGlwLmNhbGwodCxlKX0pLHRoaXMuYmluZChuLnByb2dyZXNzLCJtb3VzZW1vdmUgdG91Y2htb3ZlIixmdW5jdGlvbihlKXt2YXIgbj10LnByZXZpZXdUaHVtYm5haWxzO24mJm4ubG9hZGVkJiZuLnN0YXJ0TW92ZShlKX0pLHRoaXMuYmluZChuLnByb2dyZXNzLCJtb3VzZWxlYXZlIGNsaWNrIixmdW5jdGlvbigpe3ZhciBlPXQucHJldmlld1RodW1ibmFpbHM7ZSYmZS5sb2FkZWQmJmUuZW5kTW92ZSghMSwhMCl9KSx0aGlzLmJpbmQobi5wcm9ncmVzcywibW91c2Vkb3duIHRvdWNoc3RhcnQiLGZ1bmN0aW9uKGUpe3ZhciBuPXQucHJldmlld1RodW1ibmFpbHM7biYmbi5sb2FkZWQmJm4uc3RhcnRTY3J1YmJpbmcoZSl9KSx0aGlzLmJpbmQobi5wcm9ncmVzcywibW91c2V1cCB0b3VjaGVuZCIsZnVuY3Rpb24oZSl7dmFyIG49dC5wcmV2aWV3VGh1bWJuYWlscztuJiZuLmxvYWRlZCYmbi5lbmRTY3J1YmJpbmcoZSl9KSxMLmlzV2Via2l0JiZBcnJheS5mcm9tKEcuY2FsbCh0LCdpbnB1dFt0eXBlPSJyYW5nZSJdJykpLmZvckVhY2goZnVuY3Rpb24obil7ZS5iaW5kKG4sImlucHV0IixmdW5jdGlvbihlKXtyZXR1cm4gQWUudXBkYXRlUmFuZ2VGaWxsLmNhbGwodCxlLnRhcmdldCl9KX0pLHQuY29uZmlnLnRvZ2dsZUludmVydCYmIU4uZWxlbWVudChuLmRpc3BsYXkuZHVyYXRpb24pJiZ0aGlzLmJpbmQobi5kaXNwbGF5LmN1cnJlbnRUaW1lLCJjbGljayIsZnVuY3Rpb24oKXswIT09dC5jdXJyZW50VGltZSYmKHQuY29uZmlnLmludmVydFRpbWU9IXQuY29uZmlnLmludmVydFRpbWUsQWUudGltZVVwZGF0ZS5jYWxsKHQpKX0pLHRoaXMuYmluZChuLmlucHV0cy52b2x1bWUsaSxmdW5jdGlvbihlKXt0LnZvbHVtZT1lLnRhcmdldC52YWx1ZX0sInZvbHVtZSIpLHRoaXMuYmluZChuLmNvbnRyb2xzLCJtb3VzZWVudGVyIG1vdXNlbGVhdmUiLGZ1bmN0aW9uKGUpe24uY29udHJvbHMuaG92ZXI9IXQudG91Y2gmJiJtb3VzZWVudGVyIj09PWUudHlwZX0pLHRoaXMuYmluZChuLmNvbnRyb2xzLCJtb3VzZWRvd24gbW91c2V1cCB0b3VjaHN0YXJ0IHRvdWNoZW5kIHRvdWNoY2FuY2VsIixmdW5jdGlvbihlKXtuLmNvbnRyb2xzLnByZXNzZWQ9WyJtb3VzZWRvd24iLCJ0b3VjaHN0YXJ0Il0uaW5jbHVkZXMoZS50eXBlKX0pLHRoaXMuYmluZChuLmNvbnRyb2xzLCJmb2N1c2luIixmdW5jdGlvbigpe3ZhciBpPXQuY29uZmlnLGE9dC50aW1lcnM7WChuLmNvbnRyb2xzLGkuY2xhc3NOYW1lcy5ub1RyYW5zaXRpb24sITApLEZlLnRvZ2dsZUNvbnRyb2xzLmNhbGwodCwhMCksc2V0VGltZW91dChmdW5jdGlvbigpe1gobi5jb250cm9scyxpLmNsYXNzTmFtZXMubm9UcmFuc2l0aW9uLCExKX0sMCk7dmFyIHM9ZS50b3VjaD8zZTM6NGUzO2NsZWFyVGltZW91dChhLmNvbnRyb2xzKSxhLmNvbnRyb2xzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gRmUudG9nZ2xlQ29udHJvbHMuY2FsbCh0LCExKX0scyl9KSx0aGlzLmJpbmQobi5pbnB1dHMudm9sdW1lLCJ3aGVlbCIsZnVuY3Rpb24oZSl7dmFyIG49ZS53ZWJraXREaXJlY3Rpb25JbnZlcnRlZEZyb21EZXZpY2UsaT1hKFtlLmRlbHRhWCwtZS5kZWx0YVldLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbj8tZTplfSksMikscz1pWzBdLHI9aVsxXSxvPU1hdGguc2lnbihNYXRoLmFicyhzKT5NYXRoLmFicyhyKT9zOnIpO3QuaW5jcmVhc2VWb2x1bWUoby81MCk7dmFyIGw9dC5tZWRpYS52b2x1bWU7KDE9PT1vJiZsPDF8fC0xPT09byYmbD4wKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSwidm9sdW1lIiwhMSl9fV0pLHR9KCk7InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGY7dmFyIFZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUodD17ZXhwb3J0czp7fX0sdC5leHBvcnRzKSx0LmV4cG9ydHN9KGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oKXt9LHQ9e30sbj17fSxpPXt9O2Z1bmN0aW9uIGEoZSx0KXtpZihlKXt2YXIgYT1pW2VdO2lmKG5bZV09dCxhKWZvcig7YS5sZW5ndGg7KWFbMF0oZSx0KSxhLnNwbGljZSgwLDEpfX1mdW5jdGlvbiBzKHQsbil7dC5jYWxsJiYodD17c3VjY2Vzczp0fSksbi5sZW5ndGg/KHQuZXJyb3J8fGUpKG4pOih0LnN1Y2Nlc3N8fGUpKHQpfWZ1bmN0aW9uIHIodCxuLGksYSl7dmFyIHMsbyxsPWRvY3VtZW50LGM9aS5hc3luYyx1PShpLm51bVJldHJpZXN8fDApKzEsZD1pLmJlZm9yZXx8ZSxoPXQucmVwbGFjZSgvXihjc3N8aW1nKSEvLCIiKTthPWF8fDAsLyheY3NzIXxcLmNzcyQpLy50ZXN0KHQpPygobz1sLmNyZWF0ZUVsZW1lbnQoImxpbmsiKSkucmVsPSJzdHlsZXNoZWV0IixvLmhyZWY9aCwocz0iaGlkZUZvY3VzImluIG8pJiZvLnJlbExpc3QmJihzPTAsby5yZWw9InByZWxvYWQiLG8uYXM9InN0eWxlIikpOi8oXmltZyF8XC4ocG5nfGdpZnxqcGd8c3ZnKSQpLy50ZXN0KHQpPyhvPWwuY3JlYXRlRWxlbWVudCgiaW1nIikpLnNyYz1oOigobz1sLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpKS5zcmM9dCxvLmFzeW5jPXZvaWQgMD09PWN8fGMpLG8ub25sb2FkPW8ub25lcnJvcj1vLm9uYmVmb3JlbG9hZD1mdW5jdGlvbihlKXt2YXIgbD1lLnR5cGVbMF07aWYocyl0cnl7by5zaGVldC5jc3NUZXh0Lmxlbmd0aHx8KGw9ImUiKX1jYXRjaChlKXsxOCE9ZS5jb2RlJiYobD0iZSIpfWlmKCJlIj09bCl7aWYoKGErPTEpPHUpcmV0dXJuIHIodCxuLGksYSl9ZWxzZSBpZigicHJlbG9hZCI9PW8ucmVsJiYic3R5bGUiPT1vLmFzKXJldHVybiBvLnJlbD0ic3R5bGVzaGVldCI7bih0LGwsZS5kZWZhdWx0UHJldmVudGVkKX0sITEhPT1kKHQsbykmJmwuaGVhZC5hcHBlbmRDaGlsZChvKX1mdW5jdGlvbiBvKGUsbixpKXt2YXIgbyxsO2lmKG4mJm4udHJpbSYmKG89biksbD0obz9pOm4pfHx7fSxvKXtpZihvIGluIHQpdGhyb3ciTG9hZEpTIjt0W29dPSEwfWZ1bmN0aW9uIGModCxuKXshZnVuY3Rpb24oZSx0LG4pe3ZhciBpLGEscz0oZT1lLnB1c2g/ZTpbZV0pLmxlbmd0aCxvPXMsbD1bXTtmb3IoaT1mdW5jdGlvbihlLG4saSl7aWYoImUiPT1uJiZsLnB1c2goZSksImIiPT1uKXtpZighaSlyZXR1cm47bC5wdXNoKGUpfS0tc3x8dChsKX0sYT0wO2E8bzthKyspcihlW2FdLGksbil9KGUsZnVuY3Rpb24oZSl7cyhsLGUpLHQmJnMoe3N1Y2Nlc3M6dCxlcnJvcjpufSxlKSxhKG8sZSl9LGwpfWlmKGwucmV0dXJuUHJvbWlzZSlyZXR1cm4gbmV3IFByb21pc2UoYyk7YygpfXJldHVybiBvLnJlYWR5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7ZT1lLnB1c2g/ZTpbZV07dmFyIGEscyxyLG89W10sbD1lLmxlbmd0aCxjPWw7Zm9yKGE9ZnVuY3Rpb24oZSxuKXtuLmxlbmd0aCYmby5wdXNoKGUpLC0tY3x8dChvKX07bC0tOylzPWVbbF0sKHI9bltzXSk/YShzLHIpOihpW3NdPWlbc118fFtdKS5wdXNoKGEpfShlLGZ1bmN0aW9uKGUpe3ModCxlKX0pLG99LG8uZG9uZT1mdW5jdGlvbihlKXthKGUsW10pfSxvLnJlc2V0PWZ1bmN0aW9uKCl7dD17fSxuPXt9LGk9e319LG8uaXNEZWZpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHR9LG99KCl9KTtmdW5jdGlvbiBCZShlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxuKXtWZShlLHtzdWNjZXNzOnQsZXJyb3I6bn0pfSl9ZnVuY3Rpb24gVWUoZSl7ZSYmIXRoaXMuZW1iZWQuaGFzUGxheWVkJiYodGhpcy5lbWJlZC5oYXNQbGF5ZWQ9ITApLHRoaXMubWVkaWEucGF1c2VkPT09ZSYmKHRoaXMubWVkaWEucGF1c2VkPSFlLEguY2FsbCh0aGlzLHRoaXMubWVkaWEsZT8icGxheSI6InBhdXNlIikpfXZhciBXZT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO1godGhpcy5lbGVtZW50cy53cmFwcGVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuZW1iZWQsITApLG9lLmNhbGwodGhpcyksTi5vYmplY3Qod2luZG93LlZpbWVvKT9XZS5yZWFkeS5jYWxsKHRoaXMpOkJlKHRoaXMuY29uZmlnLnVybHMudmltZW8uc2RrKS50aGVuKGZ1bmN0aW9uKCl7V2UucmVhZHkuY2FsbChlKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UuZGVidWcud2FybigiVmltZW8gU0RLIChwbGF5ZXIuanMpIGZhaWxlZCB0byBsb2FkIix0KX0pfSxyZWFkeTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLG49dC5jb25maWcudmltZW8saT1TZShGKHt9LHtsb29wOnQuY29uZmlnLmxvb3AuYWN0aXZlLGF1dG9wbGF5OnQuYXV0b3BsYXksbXV0ZWQ6dC5tdXRlZCxnZXN0dXJlOiJtZWRpYSIscGxheXNpbmxpbmU6IXRoaXMuY29uZmlnLmZ1bGxzY3JlZW4uaW9zTmF0aXZlfSxuKSkscz10Lm1lZGlhLmdldEF0dHJpYnV0ZSgic3JjIik7Ti5lbXB0eShzKSYmKHM9dC5tZWRpYS5nZXRBdHRyaWJ1dGUodC5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5pZCkpO3ZhciByLG89KHI9cyxOLmVtcHR5KHIpP251bGw6Ti5udW1iZXIoTnVtYmVyKHIpKT9yOnIubWF0Y2goL14uKih2aW1lby5jb21cL3x2aWRlb1wvKShcZCspLiovKT9SZWdFeHAuJDI6ciksbD1CKCJpZnJhbWUiKSxjPXVlKHQuY29uZmlnLnVybHMudmltZW8uaWZyYW1lLG8saSk7bC5zZXRBdHRyaWJ1dGUoInNyYyIsYyksbC5zZXRBdHRyaWJ1dGUoImFsbG93ZnVsbHNjcmVlbiIsIiIpLGwuc2V0QXR0cmlidXRlKCJhbGxvd3RyYW5zcGFyZW5jeSIsIiIpLGwuc2V0QXR0cmlidXRlKCJhbGxvdyIsImF1dG9wbGF5Iik7dmFyIHU9QigiZGl2Iix7cG9zdGVyOnQucG9zdGVyLGNsYXNzOnQuY29uZmlnLmNsYXNzTmFtZXMuZW1iZWRDb250YWluZXJ9KTt1LmFwcGVuZENoaWxkKGwpLHQubWVkaWE9Syh1LHQubWVkaWEpLHZlKHVlKHQuY29uZmlnLnVybHMudmltZW8uYXBpLG8pLCJqc29uIikudGhlbihmdW5jdGlvbihlKXtpZighTi5lbXB0eShlKSl7dmFyIG49bmV3IFVSTChlWzBdLnRodW1ibmFpbF9sYXJnZSk7bi5wYXRobmFtZT0iIi5jb25jYXQobi5wYXRobmFtZS5zcGxpdCgiXyIpWzBdLCIuanBnIiksRmUuc2V0UG9zdGVyLmNhbGwodCxuLmhyZWYpLmNhdGNoKGZ1bmN0aW9uKCl7fSl9fSksdC5lbWJlZD1uZXcgd2luZG93LlZpbWVvLlBsYXllcihsLHthdXRvcGF1c2U6dC5jb25maWcuYXV0b3BhdXNlLG11dGVkOnQubXV0ZWR9KSx0Lm1lZGlhLnBhdXNlZD0hMCx0Lm1lZGlhLmN1cnJlbnRUaW1lPTAsdC5zdXBwb3J0ZWQudWkmJnQuZW1iZWQuZGlzYWJsZVRleHRUcmFjaygpLHQubWVkaWEucGxheT1mdW5jdGlvbigpe3JldHVybiBVZS5jYWxsKHQsITApLHQuZW1iZWQucGxheSgpfSx0Lm1lZGlhLnBhdXNlPWZ1bmN0aW9uKCl7cmV0dXJuIFVlLmNhbGwodCwhMSksdC5lbWJlZC5wYXVzZSgpfSx0Lm1lZGlhLnN0b3A9ZnVuY3Rpb24oKXt0LnBhdXNlKCksdC5jdXJyZW50VGltZT0wfTt2YXIgZD10Lm1lZGlhLmN1cnJlbnRUaW1lO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lm1lZGlhLCJjdXJyZW50VGltZSIse2dldDpmdW5jdGlvbigpe3JldHVybiBkfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIG49dC5lbWJlZCxpPXQubWVkaWEsYT10LnBhdXNlZCxzPXQudm9sdW1lLHI9YSYmIW4uaGFzUGxheWVkO2kuc2Vla2luZz0hMCxILmNhbGwodCxpLCJzZWVraW5nIiksUHJvbWlzZS5yZXNvbHZlKHImJm4uc2V0Vm9sdW1lKDApKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uc2V0Q3VycmVudFRpbWUoZSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHImJm4ucGF1c2UoKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gciYmbi5zZXRWb2x1bWUocyl9KS5jYXRjaChmdW5jdGlvbigpe30pfX0pO3ZhciBoPXQuY29uZmlnLnNwZWVkLnNlbGVjdGVkO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lm1lZGlhLCJwbGF5YmFja1JhdGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGUpe3QuZW1iZWQuc2V0UGxheWJhY2tSYXRlKGUpLnRoZW4oZnVuY3Rpb24oKXtoPWUsSC5jYWxsKHQsdC5tZWRpYSwicmF0ZWNoYW5nZSIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7IkVycm9yIj09PWUubmFtZSYmQWUuc2V0U3BlZWRNZW51LmNhbGwodCxbXSl9KX19KTt2YXIgbT10LmNvbmZpZy52b2x1bWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQubWVkaWEsInZvbHVtZSIse2dldDpmdW5jdGlvbigpe3JldHVybiBtfSxzZXQ6ZnVuY3Rpb24oZSl7dC5lbWJlZC5zZXRWb2x1bWUoZSkudGhlbihmdW5jdGlvbigpe209ZSxILmNhbGwodCx0Lm1lZGlhLCJ2b2x1bWVjaGFuZ2UiKX0pfX0pO3ZhciBwPXQuY29uZmlnLm11dGVkO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lm1lZGlhLCJtdXRlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBwfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIG49ISFOLmJvb2xlYW4oZSkmJmU7dC5lbWJlZC5zZXRWb2x1bWUobj8wOnQuY29uZmlnLnZvbHVtZSkudGhlbihmdW5jdGlvbigpe3A9bixILmNhbGwodCx0Lm1lZGlhLCJ2b2x1bWVjaGFuZ2UiKX0pfX0pO3ZhciBmLGc9dC5jb25maWcubG9vcDtPYmplY3QuZGVmaW5lUHJvcGVydHkodC5tZWRpYSwibG9vcCIse2dldDpmdW5jdGlvbigpe3JldHVybiBnfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIG49Ti5ib29sZWFuKGUpP2U6dC5jb25maWcubG9vcC5hY3RpdmU7dC5lbWJlZC5zZXRMb29wKG4pLnRoZW4oZnVuY3Rpb24oKXtnPW59KX19KSx0LmVtYmVkLmdldFZpZGVvVXJsKCkudGhlbihmdW5jdGlvbihlKXtmPWUsQWUuc2V0RG93bmxvYWRVcmwuY2FsbCh0KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UuZGVidWcud2Fybih0KX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lm1lZGlhLCJjdXJyZW50U3JjIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQubWVkaWEsImVuZGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuY3VycmVudFRpbWU9PT10LmR1cmF0aW9ufX0pLFByb21pc2UuYWxsKFt0LmVtYmVkLmdldFZpZGVvV2lkdGgoKSx0LmVtYmVkLmdldFZpZGVvSGVpZ2h0KCldKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBpPWEobiwyKSxzPWlbMF0scj1pWzFdO3QuZW1iZWQucmF0aW89W3Mscl0sb2UuY2FsbChlKX0pLHQuZW1iZWQuc2V0QXV0b3BhdXNlKHQuY29uZmlnLmF1dG9wYXVzZSkudGhlbihmdW5jdGlvbihlKXt0LmNvbmZpZy5hdXRvcGF1c2U9ZX0pLHQuZW1iZWQuZ2V0VmlkZW9UaXRsZSgpLnRoZW4oZnVuY3Rpb24obil7dC5jb25maWcudGl0bGU9bixGZS5zZXRUaXRsZS5jYWxsKGUpfSksdC5lbWJlZC5nZXRDdXJyZW50VGltZSgpLnRoZW4oZnVuY3Rpb24oZSl7ZD1lLEguY2FsbCh0LHQubWVkaWEsInRpbWV1cGRhdGUiKX0pLHQuZW1iZWQuZ2V0RHVyYXRpb24oKS50aGVuKGZ1bmN0aW9uKGUpe3QubWVkaWEuZHVyYXRpb249ZSxILmNhbGwodCx0Lm1lZGlhLCJkdXJhdGlvbmNoYW5nZSIpfSksdC5lbWJlZC5nZXRUZXh0VHJhY2tzKCkudGhlbihmdW5jdGlvbihlKXt0Lm1lZGlhLnRleHRUcmFja3M9ZSxQZS5zZXR1cC5jYWxsKHQpfSksdC5lbWJlZC5vbigiY3VlY2hhbmdlIixmdW5jdGlvbihlKXt2YXIgbj1lLmN1ZXMsaT0odm9pZCAwPT09bj9bXTpuKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiB0LmFwcGVuZENoaWxkKG4pLG4uaW5uZXJIVE1MPWUsdC5maXJzdENoaWxkLmlubmVyVGV4dH0oZS50ZXh0KX0pO1BlLnVwZGF0ZUN1ZXMuY2FsbCh0LGkpfSksdC5lbWJlZC5vbigibG9hZGVkIixmdW5jdGlvbigpeyh0LmVtYmVkLmdldFBhdXNlZCgpLnRoZW4oZnVuY3Rpb24oZSl7VWUuY2FsbCh0LCFlKSxlfHxILmNhbGwodCx0Lm1lZGlhLCJwbGF5aW5nIil9KSxOLmVsZW1lbnQodC5lbWJlZC5lbGVtZW50KSYmdC5zdXBwb3J0ZWQudWkpJiZ0LmVtYmVkLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsLTEpfSksdC5lbWJlZC5vbigicGxheSIsZnVuY3Rpb24oKXtVZS5jYWxsKHQsITApLEguY2FsbCh0LHQubWVkaWEsInBsYXlpbmciKX0pLHQuZW1iZWQub24oInBhdXNlIixmdW5jdGlvbigpe1VlLmNhbGwodCwhMSl9KSx0LmVtYmVkLm9uKCJ0aW1ldXBkYXRlIixmdW5jdGlvbihlKXt0Lm1lZGlhLnNlZWtpbmc9ITEsZD1lLnNlY29uZHMsSC5jYWxsKHQsdC5tZWRpYSwidGltZXVwZGF0ZSIpfSksdC5lbWJlZC5vbigicHJvZ3Jlc3MiLGZ1bmN0aW9uKGUpe3QubWVkaWEuYnVmZmVyZWQ9ZS5wZXJjZW50LEguY2FsbCh0LHQubWVkaWEsInByb2dyZXNzIiksMT09PXBhcnNlSW50KGUucGVyY2VudCwxMCkmJkguY2FsbCh0LHQubWVkaWEsImNhbnBsYXl0aHJvdWdoIiksdC5lbWJlZC5nZXREdXJhdGlvbigpLnRoZW4oZnVuY3Rpb24oZSl7ZSE9PXQubWVkaWEuZHVyYXRpb24mJih0Lm1lZGlhLmR1cmF0aW9uPWUsSC5jYWxsKHQsdC5tZWRpYSwiZHVyYXRpb25jaGFuZ2UiKSl9KX0pLHQuZW1iZWQub24oInNlZWtlZCIsZnVuY3Rpb24oKXt0Lm1lZGlhLnNlZWtpbmc9ITEsSC5jYWxsKHQsdC5tZWRpYSwic2Vla2VkIil9KSx0LmVtYmVkLm9uKCJlbmRlZCIsZnVuY3Rpb24oKXt0Lm1lZGlhLnBhdXNlZD0hMCxILmNhbGwodCx0Lm1lZGlhLCJlbmRlZCIpfSksdC5lbWJlZC5vbigiZXJyb3IiLGZ1bmN0aW9uKGUpe3QubWVkaWEuZXJyb3I9ZSxILmNhbGwodCx0Lm1lZGlhLCJlcnJvciIpfSksc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBGZS5idWlsZC5jYWxsKHQpfSwwKX19O2Z1bmN0aW9uIHplKGUpe2UmJiF0aGlzLmVtYmVkLmhhc1BsYXllZCYmKHRoaXMuZW1iZWQuaGFzUGxheWVkPSEwKSx0aGlzLm1lZGlhLnBhdXNlZD09PWUmJih0aGlzLm1lZGlhLnBhdXNlZD0hZSxILmNhbGwodGhpcyx0aGlzLm1lZGlhLGU/InBsYXkiOiJwYXVzZSIpKX1mdW5jdGlvbiBLZShlKXtyZXR1cm4gZS5ub0Nvb2tpZT8iaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb20iOiJodHRwOiI9PT13aW5kb3cubG9jYXRpb24ucHJvdG9jb2w/Imh0dHA6Ly93d3cueW91dHViZS5jb20iOnZvaWQgMH12YXIgWWU9e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihYKHRoaXMuZWxlbWVudHMud3JhcHBlcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLmVtYmVkLCEwKSxOLm9iamVjdCh3aW5kb3cuWVQpJiZOLmZ1bmN0aW9uKHdpbmRvdy5ZVC5QbGF5ZXIpKVllLnJlYWR5LmNhbGwodGhpcyk7ZWxzZXt2YXIgdD13aW5kb3cub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHk7d2luZG93Lm9uWW91VHViZUlmcmFtZUFQSVJlYWR5PWZ1bmN0aW9uKCl7Ti5mdW5jdGlvbih0KSYmdCgpLFllLnJlYWR5LmNhbGwoZSl9LEJlKHRoaXMuY29uZmlnLnVybHMueW91dHViZS5zZGspLmNhdGNoKGZ1bmN0aW9uKHQpe2UuZGVidWcud2FybigiWW91VHViZSBBUEkgZmFpbGVkIHRvIGxvYWQiLHQpfSl9fSxnZXRUaXRsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZlKHVlKHRoaXMuY29uZmlnLnVybHMueW91dHViZS5hcGksZSkpLnRoZW4oZnVuY3Rpb24oZSl7aWYoTi5vYmplY3QoZSkpe3ZhciBuPWUudGl0bGUsaT1lLmhlaWdodCxhPWUud2lkdGg7dC5jb25maWcudGl0bGU9bixGZS5zZXRUaXRsZS5jYWxsKHQpLHQuZW1iZWQucmF0aW89W2EsaV19b2UuY2FsbCh0KX0pLmNhdGNoKGZ1bmN0aW9uKCl7b2UuY2FsbCh0KX0pfSxyZWFkeTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm1lZGlhJiZlLm1lZGlhLmdldEF0dHJpYnV0ZSgiaWQiKTtpZihOLmVtcHR5KHQpfHwhdC5zdGFydHNXaXRoKCJ5b3V0dWJlLSIpKXt2YXIgbj1lLm1lZGlhLmdldEF0dHJpYnV0ZSgic3JjIik7Ti5lbXB0eShuKSYmKG49ZS5tZWRpYS5nZXRBdHRyaWJ1dGUodGhpcy5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5pZCkpO3ZhciBpLGEscz0oaT1uLE4uZW1wdHkoaSk/bnVsbDppLm1hdGNoKC9eLiooeW91dHUuYmVcL3x2XC98dVwvXHdcL3xlbWJlZFwvfHdhdGNoXD92PXwmdj0pKFteIyY/XSopLiovKT9SZWdFeHAuJDI6aSkscj0oYT1lLnByb3ZpZGVyLCIiLmNvbmNhdChhLCItIikuY29uY2F0KE1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpKSksbz1CKCJkaXYiLHtpZDpyLHBvc3RlcjplLnBvc3Rlcn0pO2UubWVkaWE9SyhvLGUubWVkaWEpO3ZhciBsPWZ1bmN0aW9uKGUpe3JldHVybiJodHRwczovL2kueXRpbWcuY29tL3ZpLyIuY29uY2F0KHMsIi8iKS5jb25jYXQoZSwiZGVmYXVsdC5qcGciKX07RGUobCgibWF4cmVzIiksMTIxKS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBEZShsKCJzZCIpLDEyMSl9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBEZShsKCJocSIpKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIEZlLnNldFBvc3Rlci5jYWxsKGUsdC5zcmMpfSkudGhlbihmdW5jdGlvbih0KXt0LmluY2x1ZGVzKCJtYXhyZXMiKXx8KGUuZWxlbWVudHMucG9zdGVyLnN0eWxlLmJhY2tncm91bmRTaXplPSJjb3ZlciIpfSkuY2F0Y2goZnVuY3Rpb24oKXt9KTt2YXIgYz1lLmNvbmZpZy55b3V0dWJlO2UuZW1iZWQ9bmV3IHdpbmRvdy5ZVC5QbGF5ZXIocix7dmlkZW9JZDpzLGhvc3Q6S2UoYykscGxheWVyVmFyczpGKHt9LHthdXRvcGxheTplLmNvbmZpZy5hdXRvcGxheT8xOjAsaGw6ZS5jb25maWcuaGwsY29udHJvbHM6ZS5zdXBwb3J0ZWQudWk/MDoxLGRpc2FibGVrYjoxLHBsYXlzaW5saW5lOmUuY29uZmlnLmZ1bGxzY3JlZW4uaW9zTmF0aXZlPzA6MSxjY19sb2FkX3BvbGljeTplLmNhcHRpb25zLmFjdGl2ZT8xOjAsY2NfbGFuZ19wcmVmOmUuY29uZmlnLmNhcHRpb25zLmxhbmd1YWdlLHdpZGdldF9yZWZlcnJlcjp3aW5kb3c/d2luZG93LmxvY2F0aW9uLmhyZWY6bnVsbH0sYyksZXZlbnRzOntvbkVycm9yOmZ1bmN0aW9uKHQpe2lmKCFlLm1lZGlhLmVycm9yKXt2YXIgbj10LmRhdGEsaT17MjoiVGhlIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBwYXJhbWV0ZXIgdmFsdWUuIEZvciBleGFtcGxlLCB0aGlzIGVycm9yIG9jY3VycyBpZiB5b3Ugc3BlY2lmeSBhIHZpZGVvIElEIHRoYXQgZG9lcyBub3QgaGF2ZSAxMSBjaGFyYWN0ZXJzLCBvciBpZiB0aGUgdmlkZW8gSUQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGV4Y2xhbWF0aW9uIHBvaW50cyBvciBhc3Rlcmlza3MuIiw1OiJUaGUgcmVxdWVzdGVkIGNvbnRlbnQgY2Fubm90IGJlIHBsYXllZCBpbiBhbiBIVE1MNSBwbGF5ZXIgb3IgYW5vdGhlciBlcnJvciByZWxhdGVkIHRvIHRoZSBIVE1MNSBwbGF5ZXIgaGFzIG9jY3VycmVkLiIsMTAwOiJUaGUgdmlkZW8gcmVxdWVzdGVkIHdhcyBub3QgZm91bmQuIFRoaXMgZXJyb3Igb2NjdXJzIHdoZW4gYSB2aWRlbyBoYXMgYmVlbiByZW1vdmVkIChmb3IgYW55IHJlYXNvbikgb3IgaGFzIGJlZW4gbWFya2VkIGFzIHByaXZhdGUuIiwxMDE6IlRoZSBvd25lciBvZiB0aGUgcmVxdWVzdGVkIHZpZGVvIGRvZXMgbm90IGFsbG93IGl0IHRvIGJlIHBsYXllZCBpbiBlbWJlZGRlZCBwbGF5ZXJzLiIsMTUwOiJUaGUgb3duZXIgb2YgdGhlIHJlcXVlc3RlZCB2aWRlbyBkb2VzIG5vdCBhbGxvdyBpdCB0byBiZSBwbGF5ZWQgaW4gZW1iZWRkZWQgcGxheWVycy4ifVtuXXx8IkFuIHVua25vd24gZXJyb3Igb2NjdXJlZCI7ZS5tZWRpYS5lcnJvcj17Y29kZTpuLG1lc3NhZ2U6aX0sSC5jYWxsKGUsZS5tZWRpYSwiZXJyb3IiKX19LG9uUGxheWJhY2tSYXRlQ2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBuPXQudGFyZ2V0O2UubWVkaWEucGxheWJhY2tSYXRlPW4uZ2V0UGxheWJhY2tSYXRlKCksSC5jYWxsKGUsZS5tZWRpYSwicmF0ZWNoYW5nZSIpfSxvblJlYWR5OmZ1bmN0aW9uKHQpe2lmKCFOLmZ1bmN0aW9uKGUubWVkaWEucGxheSkpe3ZhciBuPXQudGFyZ2V0O1llLmdldFRpdGxlLmNhbGwoZSxzKSxlLm1lZGlhLnBsYXk9ZnVuY3Rpb24oKXt6ZS5jYWxsKGUsITApLG4ucGxheVZpZGVvKCl9LGUubWVkaWEucGF1c2U9ZnVuY3Rpb24oKXt6ZS5jYWxsKGUsITEpLG4ucGF1c2VWaWRlbygpfSxlLm1lZGlhLnN0b3A9ZnVuY3Rpb24oKXtuLnN0b3BWaWRlbygpfSxlLm1lZGlhLmR1cmF0aW9uPW4uZ2V0RHVyYXRpb24oKSxlLm1lZGlhLnBhdXNlZD0hMCxlLm1lZGlhLmN1cnJlbnRUaW1lPTAsT2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsImN1cnJlbnRUaW1lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE51bWJlcihuLmdldEN1cnJlbnRUaW1lKCkpfSxzZXQ6ZnVuY3Rpb24odCl7ZS5wYXVzZWQmJiFlLmVtYmVkLmhhc1BsYXllZCYmZS5lbWJlZC5tdXRlKCksZS5tZWRpYS5zZWVraW5nPSEwLEguY2FsbChlLGUubWVkaWEsInNlZWtpbmciKSxuLnNlZWtUbyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5tZWRpYSwicGxheWJhY2tSYXRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0UGxheWJhY2tSYXRlKCl9LHNldDpmdW5jdGlvbihlKXtuLnNldFBsYXliYWNrUmF0ZShlKX19KTt2YXIgaT1lLmNvbmZpZy52b2x1bWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsInZvbHVtZSIse2dldDpmdW5jdGlvbigpe3JldHVybiBpfSxzZXQ6ZnVuY3Rpb24odCl7aT10LG4uc2V0Vm9sdW1lKDEwMCppKSxILmNhbGwoZSxlLm1lZGlhLCJ2b2x1bWVjaGFuZ2UiKX19KTt2YXIgYT1lLmNvbmZpZy5tdXRlZDtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5tZWRpYSwibXV0ZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBpPU4uYm9vbGVhbih0KT90OmE7YT1pLG5baT8ibXV0ZSI6InVuTXV0ZSJdKCksSC5jYWxsKGUsZS5tZWRpYSwidm9sdW1lY2hhbmdlIil9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUubWVkaWEsImN1cnJlbnRTcmMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRWaWRlb1VybCgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLm1lZGlhLCJlbmRlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBlLmN1cnJlbnRUaW1lPT09ZS5kdXJhdGlvbn19KSxlLm9wdGlvbnMuc3BlZWQ9bi5nZXRBdmFpbGFibGVQbGF5YmFja1JhdGVzKCksZS5zdXBwb3J0ZWQudWkmJmUubWVkaWEuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsLTEpLEguY2FsbChlLGUubWVkaWEsInRpbWV1cGRhdGUiKSxILmNhbGwoZSxlLm1lZGlhLCJkdXJhdGlvbmNoYW5nZSIpLGNsZWFySW50ZXJ2YWwoZS50aW1lcnMuYnVmZmVyaW5nKSxlLnRpbWVycy5idWZmZXJpbmc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlLm1lZGlhLmJ1ZmZlcmVkPW4uZ2V0VmlkZW9Mb2FkZWRGcmFjdGlvbigpLChudWxsPT09ZS5tZWRpYS5sYXN0QnVmZmVyZWR8fGUubWVkaWEubGFzdEJ1ZmZlcmVkPGUubWVkaWEuYnVmZmVyZWQpJiZILmNhbGwoZSxlLm1lZGlhLCJwcm9ncmVzcyIpLGUubWVkaWEubGFzdEJ1ZmZlcmVkPWUubWVkaWEuYnVmZmVyZWQsMT09PWUubWVkaWEuYnVmZmVyZWQmJihjbGVhckludGVydmFsKGUudGltZXJzLmJ1ZmZlcmluZyksSC5jYWxsKGUsZS5tZWRpYSwiY2FucGxheXRocm91Z2giKSl9LDIwMCksc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBGZS5idWlsZC5jYWxsKGUpfSw1MCl9fSxvblN0YXRlQ2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBuPXQudGFyZ2V0O3N3aXRjaChjbGVhckludGVydmFsKGUudGltZXJzLnBsYXlpbmcpLGUubWVkaWEuc2Vla2luZyYmWzEsMl0uaW5jbHVkZXModC5kYXRhKSYmKGUubWVkaWEuc2Vla2luZz0hMSxILmNhbGwoZSxlLm1lZGlhLCJzZWVrZWQiKSksdC5kYXRhKXtjYXNlLTE6SC5jYWxsKGUsZS5tZWRpYSwidGltZXVwZGF0ZSIpLGUubWVkaWEuYnVmZmVyZWQ9bi5nZXRWaWRlb0xvYWRlZEZyYWN0aW9uKCksSC5jYWxsKGUsZS5tZWRpYSwicHJvZ3Jlc3MiKTticmVhaztjYXNlIDA6emUuY2FsbChlLCExKSxlLm1lZGlhLmxvb3A/KG4uc3RvcFZpZGVvKCksbi5wbGF5VmlkZW8oKSk6SC5jYWxsKGUsZS5tZWRpYSwiZW5kZWQiKTticmVhaztjYXNlIDE6ZS5jb25maWcuYXV0b3BsYXl8fCFlLm1lZGlhLnBhdXNlZHx8ZS5lbWJlZC5oYXNQbGF5ZWQ/KHplLmNhbGwoZSwhMCksSC5jYWxsKGUsZS5tZWRpYSwicGxheWluZyIpLGUudGltZXJzLnBsYXlpbmc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtILmNhbGwoZSxlLm1lZGlhLCJ0aW1ldXBkYXRlIil9LDUwKSxlLm1lZGlhLmR1cmF0aW9uIT09bi5nZXREdXJhdGlvbigpJiYoZS5tZWRpYS5kdXJhdGlvbj1uLmdldER1cmF0aW9uKCksSC5jYWxsKGUsZS5tZWRpYSwiZHVyYXRpb25jaGFuZ2UiKSkpOmUubWVkaWEucGF1c2UoKTticmVhaztjYXNlIDI6ZS5tdXRlZHx8ZS5lbWJlZC51bk11dGUoKSx6ZS5jYWxsKGUsITEpfUguY2FsbChlLGUuZWxlbWVudHMuY29udGFpbmVyLCJzdGF0ZWNoYW5nZSIsITEse2NvZGU6dC5kYXRhfSl9fX0pfX19LFFlPXtzZXR1cDpmdW5jdGlvbigpe3RoaXMubWVkaWE/KFgodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy50eXBlLnJlcGxhY2UoInswfSIsdGhpcy50eXBlKSwhMCksWCh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnByb3ZpZGVyLnJlcGxhY2UoInswfSIsdGhpcy5wcm92aWRlciksITApLHRoaXMuaXNFbWJlZCYmWCh0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnR5cGUucmVwbGFjZSgiezB9IiwidmlkZW8iKSwhMCksdGhpcy5pc1ZpZGVvJiYodGhpcy5lbGVtZW50cy53cmFwcGVyPUIoImRpdiIse2NsYXNzOnRoaXMuY29uZmlnLmNsYXNzTmFtZXMudmlkZW99KSxSKHRoaXMubWVkaWEsdGhpcy5lbGVtZW50cy53cmFwcGVyKSx0aGlzLmVsZW1lbnRzLnBvc3Rlcj1CKCJkaXYiLHtjbGFzczp0aGlzLmNvbmZpZy5jbGFzc05hbWVzLnBvc3Rlcn0pLHRoaXMuZWxlbWVudHMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnBvc3RlcikpLHRoaXMuaXNIVE1MNT9sZS5leHRlbmQuY2FsbCh0aGlzKTp0aGlzLmlzWW91VHViZT9ZZS5zZXR1cC5jYWxsKHRoaXMpOnRoaXMuaXNWaW1lbyYmV2Uuc2V0dXAuY2FsbCh0aGlzKSk6dGhpcy5kZWJ1Zy53YXJuKCJObyBtZWRpYSBlbGVtZW50IGZvdW5kISIpfX0sWGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KG4pe3ZhciBpPXRoaXM7ZSh0aGlzLHQpLHRoaXMucGxheWVyPW4sdGhpcy5jb25maWc9bi5jb25maWcuYWRzLHRoaXMucGxheWluZz0hMSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMuZWxlbWVudHM9e2NvbnRhaW5lcjpudWxsLGRpc3BsYXlDb250YWluZXI6bnVsbH0sdGhpcy5tYW5hZ2VyPW51bGwsdGhpcy5sb2FkZXI9bnVsbCx0aGlzLmN1ZVBvaW50cz1udWxsLHRoaXMuZXZlbnRzPXt9LHRoaXMuc2FmZXR5VGltZXI9bnVsbCx0aGlzLmNvdW50ZG93blRpbWVyPW51bGwsdGhpcy5tYW5hZ2VyUHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihlLHQpe2kub24oImxvYWRlZCIsZSksaS5vbigiZXJyb3IiLHQpfSksdGhpcy5sb2FkKCl9cmV0dXJuIG4odCxbe2tleToibG9hZCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZW5hYmxlZCYmKE4ub2JqZWN0KHdpbmRvdy5nb29nbGUpJiZOLm9iamVjdCh3aW5kb3cuZ29vZ2xlLmltYSk/dGhpcy5yZWFkeSgpOkJlKHRoaXMucGxheWVyLmNvbmZpZy51cmxzLmdvb2dsZUlNQS5zZGspLnRoZW4oZnVuY3Rpb24oKXtlLnJlYWR5KCl9KS5jYXRjaChmdW5jdGlvbigpe2UudHJpZ2dlcigiZXJyb3IiLG5ldyBFcnJvcigiR29vZ2xlIElNQSBTREsgZmFpbGVkIHRvIGxvYWQiKSl9KSl9fSx7a2V5OiJyZWFkeSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dGhpcy5lbmFibGVkfHwoKGU9dGhpcykubWFuYWdlciYmZS5tYW5hZ2VyLmRlc3Ryb3koKSxlLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXImJmUuZWxlbWVudHMuZGlzcGxheUNvbnRhaW5lci5kZXN0cm95KCksZS5lbGVtZW50cy5jb250YWluZXIucmVtb3ZlKCkpLHRoaXMuc3RhcnRTYWZldHlUaW1lcigxMmUzLCJyZWFkeSgpIiksdGhpcy5tYW5hZ2VyUHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7dC5jbGVhclNhZmV0eVRpbWVyKCJvbkFkc01hbmFnZXJMb2FkZWQoKSIpfSksdGhpcy5saXN0ZW5lcnMoKSx0aGlzLnNldHVwSU1BKCl9fSx7a2V5OiJzZXR1cElNQSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcj1CKCJkaXYiLHtjbGFzczp0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5hZHN9KSx0aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5jb250YWluZXIpLGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0VnBhaWRNb2RlKGdvb2dsZS5pbWEuSW1hU2RrU2V0dGluZ3MuVnBhaWRNb2RlLkVOQUJMRUQpLGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0TG9jYWxlKHRoaXMucGxheWVyLmNvbmZpZy5hZHMubGFuZ3VhZ2UpLGdvb2dsZS5pbWEuc2V0dGluZ3Muc2V0RGlzYWJsZUN1c3RvbVBsYXliYWNrRm9ySU9TMTBQbHVzKHRoaXMucGxheWVyLmNvbmZpZy5wbGF5c2lubGluZSksdGhpcy5lbGVtZW50cy5kaXNwbGF5Q29udGFpbmVyPW5ldyBnb29nbGUuaW1hLkFkRGlzcGxheUNvbnRhaW5lcih0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLnBsYXllci5tZWRpYSksdGhpcy5yZXF1ZXN0QWRzKCl9fSx7a2V5OiJyZXF1ZXN0QWRzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXI7dHJ5e3RoaXMubG9hZGVyPW5ldyBnb29nbGUuaW1hLkFkc0xvYWRlcih0aGlzLmVsZW1lbnRzLmRpc3BsYXlDb250YWluZXIpLHRoaXMubG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoZ29vZ2xlLmltYS5BZHNNYW5hZ2VyTG9hZGVkRXZlbnQuVHlwZS5BRFNfTUFOQUdFUl9MT0FERUQsZnVuY3Rpb24odCl7cmV0dXJuIGUub25BZHNNYW5hZ2VyTG9hZGVkKHQpfSwhMSksdGhpcy5sb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLGZ1bmN0aW9uKHQpe3JldHVybiBlLm9uQWRFcnJvcih0KX0sITEpO3ZhciBuPW5ldyBnb29nbGUuaW1hLkFkc1JlcXVlc3Q7bi5hZFRhZ1VybD10aGlzLnRhZ1VybCxuLmxpbmVhckFkU2xvdFdpZHRoPXQub2Zmc2V0V2lkdGgsbi5saW5lYXJBZFNsb3RIZWlnaHQ9dC5vZmZzZXRIZWlnaHQsbi5ub25MaW5lYXJBZFNsb3RXaWR0aD10Lm9mZnNldFdpZHRoLG4ubm9uTGluZWFyQWRTbG90SGVpZ2h0PXQub2Zmc2V0SGVpZ2h0LG4uZm9yY2VOb25MaW5lYXJGdWxsU2xvdD0hMSxuLnNldEFkV2lsbFBsYXlNdXRlZCghdGhpcy5wbGF5ZXIubXV0ZWQpLHRoaXMubG9hZGVyLnJlcXVlc3RBZHMobil9Y2F0Y2goZSl7dGhpcy5vbkFkRXJyb3IoZSl9fX0se2tleToicG9sbENvdW50ZG93biIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXSkpcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5jb3VudGRvd25UaW1lciksdm9pZCB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtYmFkZ2UtdGV4dCIpO3RoaXMuY291bnRkb3duVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgdD1DZShNYXRoLm1heChlLm1hbmFnZXIuZ2V0UmVtYWluaW5nVGltZSgpLDApKSxuPSIiLmNvbmNhdChnZSgiYWR2ZXJ0aXNlbWVudCIsZS5wbGF5ZXIuY29uZmlnKSwiIC0gIikuY29uY2F0KHQpO2UuZWxlbWVudHMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgiZGF0YS1iYWRnZS10ZXh0IixuKX0sMTAwKX19LHtrZXk6Im9uQWRzTWFuYWdlckxvYWRlZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLmVuYWJsZWQpe3ZhciBuPW5ldyBnb29nbGUuaW1hLkFkc1JlbmRlcmluZ1NldHRpbmdzO24ucmVzdG9yZUN1c3RvbVBsYXliYWNrU3RhdGVPbkFkQnJlYWtDb21wbGV0ZT0hMCxuLmVuYWJsZVByZWxvYWRpbmc9ITAsdGhpcy5tYW5hZ2VyPWUuZ2V0QWRzTWFuYWdlcih0aGlzLnBsYXllcixuKSx0aGlzLmN1ZVBvaW50cz10aGlzLm1hbmFnZXIuZ2V0Q3VlUG9pbnRzKCksdGhpcy5tYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoZ29vZ2xlLmltYS5BZEVycm9yRXZlbnQuVHlwZS5BRF9FUlJPUixmdW5jdGlvbihlKXtyZXR1cm4gdC5vbkFkRXJyb3IoZSl9KSxPYmplY3Qua2V5cyhnb29nbGUuaW1hLkFkRXZlbnQuVHlwZSkuZm9yRWFjaChmdW5jdGlvbihlKXt0Lm1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihnb29nbGUuaW1hLkFkRXZlbnQuVHlwZVtlXSxmdW5jdGlvbihlKXtyZXR1cm4gdC5vbkFkRXZlbnQoZSl9KX0pLHRoaXMudHJpZ2dlcigibG9hZGVkIil9fX0se2tleToiYWRkQ3VlUG9pbnRzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Ti5lbXB0eSh0aGlzLmN1ZVBvaW50cyl8fHRoaXMuY3VlUG9pbnRzLmZvckVhY2goZnVuY3Rpb24odCl7aWYoMCE9PXQmJi0xIT09dCYmdDxlLnBsYXllci5kdXJhdGlvbil7dmFyIG49ZS5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3M7aWYoTi5lbGVtZW50KG4pKXt2YXIgaT0xMDAvZS5wbGF5ZXIuZHVyYXRpb24qdCxhPUIoInNwYW4iLHtjbGFzczplLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5jdWVzfSk7YS5zdHlsZS5sZWZ0PSIiLmNvbmNhdChpLnRvU3RyaW5nKCksIiUiKSxuLmFwcGVuZENoaWxkKGEpfX19KX19LHtrZXk6Im9uQWRFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMucGxheWVyLmVsZW1lbnRzLmNvbnRhaW5lcixpPWUuZ2V0QWQoKSxhPWUuZ2V0QWREYXRhKCk7c3dpdGNoKGZ1bmN0aW9uKGUpe0guY2FsbCh0LnBsYXllcix0LnBsYXllci5tZWRpYSwiYWRzIi5jb25jYXQoZS5yZXBsYWNlKC9fL2csIiIpLnRvTG93ZXJDYXNlKCkpKX0oZS50eXBlKSxlLnR5cGUpe2Nhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuTE9BREVEOnRoaXMudHJpZ2dlcigibG9hZGVkIiksdGhpcy5wb2xsQ291bnRkb3duKCEwKSxpLmlzTGluZWFyKCl8fChpLndpZHRoPW4ub2Zmc2V0V2lkdGgsaS5oZWlnaHQ9bi5vZmZzZXRIZWlnaHQpO2JyZWFrO2Nhc2UgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuU1RBUlRFRDp0aGlzLm1hbmFnZXIuc2V0Vm9sdW1lKHRoaXMucGxheWVyLnZvbHVtZSk7YnJlYWs7Y2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BTExfQURTX0NPTVBMRVRFRDp0aGlzLmxvYWRBZHMoKTticmVhaztjYXNlIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkNPTlRFTlRfUEFVU0VfUkVRVUVTVEVEOnRoaXMucGF1c2VDb250ZW50KCk7YnJlYWs7Y2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5DT05URU5UX1JFU1VNRV9SRVFVRVNURUQ6dGhpcy5wb2xsQ291bnRkb3duKCksdGhpcy5yZXN1bWVDb250ZW50KCk7YnJlYWs7Y2FzZSBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5MT0c6YS5hZEVycm9yJiZ0aGlzLnBsYXllci5kZWJ1Zy53YXJuKCJOb24tZmF0YWwgYWQgZXJyb3I6ICIuY29uY2F0KGEuYWRFcnJvci5nZXRNZXNzYWdlKCkpKX19fSx7a2V5OiJvbkFkRXJyb3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FuY2VsKCksdGhpcy5wbGF5ZXIuZGVidWcud2FybigiQWRzIGVycm9yIixlKX19LHtrZXk6Imxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXI7dGhpcy5wbGF5ZXIub24oImNhbnBsYXkiLGZ1bmN0aW9uKCl7dC5hZGRDdWVQb2ludHMoKX0pLHRoaXMucGxheWVyLm9uKCJlbmRlZCIsZnVuY3Rpb24oKXt0LmxvYWRlci5jb250ZW50Q29tcGxldGUoKX0pLHRoaXMucGxheWVyLm9uKCJ0aW1ldXBkYXRlIixmdW5jdGlvbigpe2U9dC5wbGF5ZXIuY3VycmVudFRpbWV9KSx0aGlzLnBsYXllci5vbigic2Vla2VkIixmdW5jdGlvbigpe3ZhciBuPXQucGxheWVyLmN1cnJlbnRUaW1lO04uZW1wdHkodC5jdWVQb2ludHMpfHx0LmN1ZVBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKGksYSl7ZTxpJiZpPG4mJih0Lm1hbmFnZXIuZGlzY2FyZEFkQnJlYWsoKSx0LmN1ZVBvaW50cy5zcGxpY2UoYSwxKSl9KX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLGZ1bmN0aW9uKCl7dC5tYW5hZ2VyJiZ0Lm1hbmFnZXIucmVzaXplKG4ub2Zmc2V0V2lkdGgsbi5vZmZzZXRIZWlnaHQsZ29vZ2xlLmltYS5WaWV3TW9kZS5OT1JNQUwpfSl9fSx7a2V5OiJwbGF5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnBsYXllci5lbGVtZW50cy5jb250YWluZXI7dGhpcy5tYW5hZ2VyUHJvbWlzZXx8dGhpcy5yZXN1bWVDb250ZW50KCksdGhpcy5tYW5hZ2VyUHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7ZS5tYW5hZ2VyLnNldFZvbHVtZShlLnBsYXllci52b2x1bWUpLGUuZWxlbWVudHMuZGlzcGxheUNvbnRhaW5lci5pbml0aWFsaXplKCk7dHJ5e2UuaW5pdGlhbGl6ZWR8fChlLm1hbmFnZXIuaW5pdCh0Lm9mZnNldFdpZHRoLHQub2Zmc2V0SGVpZ2h0LGdvb2dsZS5pbWEuVmlld01vZGUuTk9STUFMKSxlLm1hbmFnZXIuc3RhcnQoKSksZS5pbml0aWFsaXplZD0hMH1jYXRjaCh0KXtlLm9uQWRFcnJvcih0KX19KS5jYXRjaChmdW5jdGlvbigpe30pfX0se2tleToicmVzdW1lQ29udGVudCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5zdHlsZS56SW5kZXg9IiIsdGhpcy5wbGF5aW5nPSExLHRoaXMucGxheWVyLm1lZGlhLnBsYXkoKX19LHtrZXk6InBhdXNlQ29udGVudCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5zdHlsZS56SW5kZXg9Myx0aGlzLnBsYXlpbmc9ITAsdGhpcy5wbGF5ZXIubWVkaWEucGF1c2UoKX19LHtrZXk6ImNhbmNlbCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxpemVkJiZ0aGlzLnJlc3VtZUNvbnRlbnQoKSx0aGlzLnRyaWdnZXIoImVycm9yIiksdGhpcy5sb2FkQWRzKCl9fSx7a2V5OiJsb2FkQWRzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5tYW5hZ2VyUHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7ZS5tYW5hZ2VyJiZlLm1hbmFnZXIuZGVzdHJveSgpLGUubWFuYWdlclByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24odCl7ZS5vbigibG9hZGVkIix0KSxlLnBsYXllci5kZWJ1Zy5sb2coZS5tYW5hZ2VyKX0pLGUucmVxdWVzdEFkcygpfSkuY2F0Y2goZnVuY3Rpb24oKXt9KX19LHtrZXk6InRyaWdnZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLG49YXJndW1lbnRzLmxlbmd0aCxpPW5ldyBBcnJheShuPjE/bi0xOjApLGE9MTthPG47YSsrKWlbYS0xXT1hcmd1bWVudHNbYV07dmFyIHM9dGhpcy5ldmVudHNbZV07Ti5hcnJheShzKSYmcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe04uZnVuY3Rpb24oZSkmJmUuYXBwbHkodCxpKX0pfX0se2tleToib24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIE4uYXJyYXkodGhpcy5ldmVudHNbZV0pfHwodGhpcy5ldmVudHNbZV09W10pLHRoaXMuZXZlbnRzW2VdLnB1c2godCksdGhpc319LHtrZXk6InN0YXJ0U2FmZXR5VGltZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0aGlzLnBsYXllci5kZWJ1Zy5sb2coIlNhZmV0eSB0aW1lciBpbnZva2VkIGZyb206ICIuY29uY2F0KHQpKSx0aGlzLnNhZmV0eVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmNhbmNlbCgpLG4uY2xlYXJTYWZldHlUaW1lcigic3RhcnRTYWZldHlUaW1lcigpIil9LGUpfX0se2tleToiY2xlYXJTYWZldHlUaW1lciIsdmFsdWU6ZnVuY3Rpb24oZSl7Ti5udWxsT3JVbmRlZmluZWQodGhpcy5zYWZldHlUaW1lcil8fCh0aGlzLnBsYXllci5kZWJ1Zy5sb2coIlNhZmV0eSB0aW1lciBjbGVhcmVkIGZyb206ICIuY29uY2F0KGUpKSxjbGVhclRpbWVvdXQodGhpcy5zYWZldHlUaW1lciksdGhpcy5zYWZldHlUaW1lcj1udWxsKX19LHtrZXk6ImVuYWJsZWQiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29uZmlnO3JldHVybiB0aGlzLnBsYXllci5pc0hUTUw1JiZ0aGlzLnBsYXllci5pc1ZpZGVvJiZlLmVuYWJsZWQmJighTi5lbXB0eShlLnB1Ymxpc2hlcklkKXx8Ti51cmwoZS50YWdVcmwpKX19LHtrZXk6InRhZ1VybCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb25maWc7aWYoTi51cmwoZS50YWdVcmwpKXJldHVybiBlLnRhZ1VybDt2YXIgdD17QVZfUFVCTElTSEVSSUQ6IjU4YzI1YmIwMDczZWY0NDhiMTA4N2FkNiIsQVZfQ0hBTk5FTElEOiI1YTA0NThkYzI4YTA2MTQ1ZTQ1MTlkMjEiLEFWX1VSTDp3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsY2I6RGF0ZS5ub3coKSxBVl9XSURUSDo2NDAsQVZfSEVJR0hUOjQ4MCxBVl9DRElNMjp0aGlzLnB1Ymxpc2hlcklkfTtyZXR1cm4iIi5jb25jYXQoImh0dHBzOi8vZ28uYW5pdmlldy5jb20vYXBpL2Fkc2VydmVyNi92YXN0LyIsIj8iKS5jb25jYXQoU2UodCkpfX1dKSx0fSgpLEplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuKXtlKHRoaXMsdCksdGhpcy5wbGF5ZXI9bix0aGlzLnRodW1ibmFpbHM9W10sdGhpcy5sb2FkZWQ9ITEsdGhpcy5sYXN0TW91c2VNb3ZlVGltZT1EYXRlLm5vdygpLHRoaXMubW91c2VEb3duPSExLHRoaXMubG9hZGVkSW1hZ2VzPVtdLHRoaXMuZWxlbWVudHM9e3RodW1iOnt9LHNjcnViYmluZzp7fX0sdGhpcy5sb2FkKCl9cmV0dXJuIG4odCxbe2tleToibG9hZCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucGxheWVyLmVsZW1lbnRzLmRpc3BsYXkuc2Vla1Rvb2x0aXAmJih0aGlzLnBsYXllci5lbGVtZW50cy5kaXNwbGF5LnNlZWtUb29sdGlwLmhpZGRlbj10aGlzLmVuYWJsZWQpLHRoaXMuZW5hYmxlZCYmdGhpcy5nZXRUaHVtYm5haWxzKCkudGhlbihmdW5jdGlvbigpe2UuZW5hYmxlZCYmKGUucmVuZGVyKCksZS5kZXRlcm1pbmVDb250YWluZXJBdXRvU2l6aW5nKCksZS5sb2FkZWQ9ITApfSl9fSx7a2V5OiJnZXRUaHVtYm5haWxzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBuPWUucGxheWVyLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscy5zcmM7aWYoTi5lbXB0eShuKSl0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgcHJldmlld1RodW1ibmFpbHMuc3JjIGNvbmZpZyBhdHRyaWJ1dGUiKTt2YXIgaT0oTi5zdHJpbmcobik/W25dOm4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5nZXRUaHVtYm5haWwodCl9KTtQcm9taXNlLmFsbChpKS50aGVuKGZ1bmN0aW9uKCl7ZS50aHVtYm5haWxzLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5oZWlnaHQtdC5oZWlnaHR9KSxlLnBsYXllci5kZWJ1Zy5sb2coIlByZXZpZXcgdGh1bWJuYWlscyIsZS50aHVtYm5haWxzKSx0KCl9KX0pfX0se2tleToiZ2V0VGh1bWJuYWlsIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt2ZShlKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBzLHIsbz17ZnJhbWVzOihzPWkscj1bXSxzLnNwbGl0KC9cclxuXHJcbnxcblxufFxyXHIvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Uuc3BsaXQoL1xyXG58XG58XHIvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKE4ubnVtYmVyKHQuc3RhcnRUaW1lKSl7aWYoIU4uZW1wdHkoZS50cmltKCkpJiZOLmVtcHR5KHQudGV4dCkpe3ZhciBuPWUudHJpbSgpLnNwbGl0KCIjeHl3aD0iKSxpPWEobiwxKTtpZih0LnRleHQ9aVswXSxuWzFdKXt2YXIgcz1hKG5bMV0uc3BsaXQoIiwiKSw0KTt0Lng9c1swXSx0Lnk9c1sxXSx0Lnc9c1syXSx0Lmg9c1szXX19fWVsc2V7dmFyIHI9ZS5tYXRjaCgvKFswLTldezJ9KT86PyhbMC05XXsyfSk6KFswLTldezJ9KS4oWzAtOV17MiwzfSkoID8tLT4gPykoWzAtOV17Mn0pPzo/KFswLTldezJ9KTooWzAtOV17Mn0pLihbMC05XXsyLDN9KS8pO3ImJih0LnN0YXJ0VGltZT02MCpOdW1iZXIoclsxXXx8MCkqNjArNjAqTnVtYmVyKHJbMl0pK051bWJlcihyWzNdKStOdW1iZXIoIjAuIi5jb25jYXQocls0XSkpLHQuZW5kVGltZT02MCpOdW1iZXIocls2XXx8MCkqNjArNjAqTnVtYmVyKHJbN10pK051bWJlcihyWzhdKStOdW1iZXIoIjAuIi5jb25jYXQocls5XSkpKX19KSx0LnRleHQmJnIucHVzaCh0KX0pLHIpLGhlaWdodDpudWxsLHVybFByZWZpeDoiIn07by5mcmFtZXNbMF0udGV4dC5zdGFydHNXaXRoKCIvIil8fG8uZnJhbWVzWzBdLnRleHQuc3RhcnRzV2l0aCgiaHR0cDovLyIpfHxvLmZyYW1lc1swXS50ZXh0LnN0YXJ0c1dpdGgoImh0dHBzOi8vIil8fChvLnVybFByZWZpeD1lLnN1YnN0cmluZygwLGUubGFzdEluZGV4T2YoIi8iKSsxKSk7dmFyIGw9bmV3IEltYWdlO2wub25sb2FkPWZ1bmN0aW9uKCl7by5oZWlnaHQ9bC5uYXR1cmFsSGVpZ2h0LG8ud2lkdGg9bC5uYXR1cmFsV2lkdGgsdC50aHVtYm5haWxzLnB1c2gobyksbigpfSxsLnNyYz1vLnVybFByZWZpeCtvLmZyYW1lc1swXS50ZXh0fSl9KX19LHtrZXk6InN0YXJ0TW92ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5sb2FkZWQmJk4uZXZlbnQoZSkmJlsidG91Y2htb3ZlIiwibW91c2Vtb3ZlIl0uaW5jbHVkZXMoZS50eXBlKSYmdGhpcy5wbGF5ZXIubWVkaWEuZHVyYXRpb24pe2lmKCJ0b3VjaG1vdmUiPT09ZS50eXBlKXRoaXMuc2Vla1RpbWU9dGhpcy5wbGF5ZXIubWVkaWEuZHVyYXRpb24qKHRoaXMucGxheWVyLmVsZW1lbnRzLmlucHV0cy5zZWVrLnZhbHVlLzEwMCk7ZWxzZXt2YXIgdD10aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPTEwMC90LndpZHRoKihlLnBhZ2VYLXQubGVmdCk7dGhpcy5zZWVrVGltZT10aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbioobi8xMDApLHRoaXMuc2Vla1RpbWU8MCYmKHRoaXMuc2Vla1RpbWU9MCksdGhpcy5zZWVrVGltZT50aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbi0xJiYodGhpcy5zZWVrVGltZT10aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbi0xKSx0aGlzLm1vdXNlUG9zWD1lLnBhZ2VYLHRoaXMuZWxlbWVudHMudGh1bWIudGltZS5pbm5lclRleHQ9Q2UodGhpcy5zZWVrVGltZSl9dGhpcy5zaG93SW1hZ2VBdEN1cnJlbnRUaW1lKCl9fX0se2tleToiZW5kTW92ZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKCExLCEwKX19LHtrZXk6InN0YXJ0U2NydWJiaW5nIix2YWx1ZTpmdW5jdGlvbihlKXshMSE9PWUuYnV0dG9uJiYwIT09ZS5idXR0b258fCh0aGlzLm1vdXNlRG93bj0hMCx0aGlzLnBsYXllci5tZWRpYS5kdXJhdGlvbiYmKHRoaXMudG9nZ2xlU2NydWJiaW5nQ29udGFpbmVyKCEwKSx0aGlzLnRvZ2dsZVRodW1iQ29udGFpbmVyKCExLCEwKSx0aGlzLnNob3dJbWFnZUF0Q3VycmVudFRpbWUoKSkpfX0se2tleToiZW5kU2NydWJiaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5tb3VzZURvd249ITEsTWF0aC5jZWlsKHRoaXMubGFzdFRpbWUpPT09TWF0aC5jZWlsKHRoaXMucGxheWVyLm1lZGlhLmN1cnJlbnRUaW1lKT90aGlzLnRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lcighMSk6cS5jYWxsKHRoaXMucGxheWVyLHRoaXMucGxheWVyLm1lZGlhLCJ0aW1ldXBkYXRlIixmdW5jdGlvbigpe2UubW91c2VEb3dufHxlLnRvZ2dsZVNjcnViYmluZ0NvbnRhaW5lcighMSl9KX19LHtrZXk6Imxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucGxheWVyLm9uKCJwbGF5IixmdW5jdGlvbigpe2UudG9nZ2xlVGh1bWJDb250YWluZXIoITEsITApfSksdGhpcy5wbGF5ZXIub24oInNlZWtlZCIsZnVuY3Rpb24oKXtlLnRvZ2dsZVRodW1iQ29udGFpbmVyKCExKX0pLHRoaXMucGxheWVyLm9uKCJ0aW1ldXBkYXRlIixmdW5jdGlvbigpe2UubGFzdFRpbWU9ZS5wbGF5ZXIubWVkaWEuY3VycmVudFRpbWV9KX19LHtrZXk6InJlbmRlciIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lcj1CKCJkaXYiLHtjbGFzczp0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aHVtYkNvbnRhaW5lcn0pLHRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXI9QigiZGl2Iix7Y2xhc3M6dGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMuaW1hZ2VDb250YWluZXJ9KSx0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyKTt2YXIgZT1CKCJkaXYiLHtjbGFzczp0aGlzLnBsYXllci5jb25maWcuY2xhc3NOYW1lcy5wcmV2aWV3VGh1bWJuYWlscy50aW1lQ29udGFpbmVyfSk7dGhpcy5lbGVtZW50cy50aHVtYi50aW1lPUIoInNwYW4iLHt9LCIwMDowMCIpLGUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy50aHVtYi50aW1lKSx0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlKSxOLmVsZW1lbnQodGhpcy5wbGF5ZXIuZWxlbWVudHMucHJvZ3Jlc3MpJiZ0aGlzLnBsYXllci5lbGVtZW50cy5wcm9ncmVzcy5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lciksdGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyPUIoImRpdiIse2NsYXNzOnRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLnByZXZpZXdUaHVtYm5haWxzLnNjcnViYmluZ0NvbnRhaW5lcn0pLHRoaXMucGxheWVyLmVsZW1lbnRzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyKX19LHtrZXk6InNob3dJbWFnZUF0Q3VycmVudFRpbWUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLm1vdXNlRG93bj90aGlzLnNldFNjcnViYmluZ0NvbnRhaW5lclNpemUoKTp0aGlzLnNldFRodW1iQ29udGFpbmVyU2l6ZUFuZFBvcygpO3ZhciB0PXRoaXMudGh1bWJuYWlsc1swXS5mcmFtZXMuZmluZEluZGV4KGZ1bmN0aW9uKHQpe3JldHVybiBlLnNlZWtUaW1lPj10LnN0YXJ0VGltZSYmZS5zZWVrVGltZTw9dC5lbmRUaW1lfSksbj10Pj0wLGk9MDt0aGlzLm1vdXNlRG93bnx8dGhpcy50b2dnbGVUaHVtYkNvbnRhaW5lcihuKSxuJiYodGhpcy50aHVtYm5haWxzLmZvckVhY2goZnVuY3Rpb24obixhKXtlLmxvYWRlZEltYWdlcy5pbmNsdWRlcyhuLmZyYW1lc1t0XS50ZXh0KSYmKGk9YSl9KSx0IT09dGhpcy5zaG93aW5nVGh1bWImJih0aGlzLnNob3dpbmdUaHVtYj10LHRoaXMubG9hZEltYWdlKGkpKSl9fSx7a2V5OiJsb2FkSW1hZ2UiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLG49dGhpcy5zaG93aW5nVGh1bWIsaT10aGlzLnRodW1ibmFpbHNbdF0sYT1pLnVybFByZWZpeCxzPWkuZnJhbWVzW25dLHI9aS5mcmFtZXNbbl0udGV4dCxvPWErcjtpZih0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQmJnRoaXMuY3VycmVudEltYWdlRWxlbWVudC5kYXRhc2V0LmZpbGVuYW1lPT09cil0aGlzLnNob3dJbWFnZSh0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQscyx0LG4sciwhMSksdGhpcy5jdXJyZW50SW1hZ2VFbGVtZW50LmRhdGFzZXQuaW5kZXg9bix0aGlzLnJlbW92ZU9sZEltYWdlcyh0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQpO2Vsc2V7dGhpcy5sb2FkaW5nSW1hZ2UmJnRoaXMudXNpbmdTcHJpdGVzJiYodGhpcy5sb2FkaW5nSW1hZ2Uub25sb2FkPW51bGwpO3ZhciBsPW5ldyBJbWFnZTtsLnNyYz1vLGwuZGF0YXNldC5pbmRleD1uLGwuZGF0YXNldC5maWxlbmFtZT1yLHRoaXMuc2hvd2luZ1RodW1iRmlsZW5hbWU9cix0aGlzLnBsYXllci5kZWJ1Zy5sb2coIkxvYWRpbmcgaW1hZ2U6ICIuY29uY2F0KG8pKSxsLm9ubG9hZD1mdW5jdGlvbigpe3JldHVybiBlLnNob3dJbWFnZShsLHMsdCxuLHIsITApfSx0aGlzLmxvYWRpbmdJbWFnZT1sLHRoaXMucmVtb3ZlT2xkSW1hZ2VzKGwpfX19LHtrZXk6InNob3dJbWFnZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSxhKXt2YXIgcz0hKGFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdKXx8YXJndW1lbnRzWzVdO3RoaXMucGxheWVyLmRlYnVnLmxvZygiU2hvd2luZyB0aHVtYjogIi5jb25jYXQoYSwiLiBudW06ICIpLmNvbmNhdChpLCIuIHF1YWw6ICIpLmNvbmNhdChuLCIuIG5ld2ltZzogIikuY29uY2F0KHMpKSx0aGlzLnNldEltYWdlU2l6ZUFuZE9mZnNldChlLHQpLHMmJih0aGlzLmN1cnJlbnRJbWFnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChlKSx0aGlzLmN1cnJlbnRJbWFnZUVsZW1lbnQ9ZSx0aGlzLmxvYWRlZEltYWdlcy5pbmNsdWRlcyhhKXx8dGhpcy5sb2FkZWRJbWFnZXMucHVzaChhKSksdGhpcy5wcmVsb2FkTmVhcmJ5KGksITApLnRoZW4odGhpcy5wcmVsb2FkTmVhcmJ5KGksITEpKS50aGVuKHRoaXMuZ2V0SGlnaGVyUXVhbGl0eShuLGUsdCxhKSl9fSx7a2V5OiJyZW1vdmVPbGRJbWFnZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7QXJyYXkuZnJvbSh0aGlzLmN1cnJlbnRJbWFnZUNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbihuKXtpZigiaW1nIj09PW4udGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgaT10LnVzaW5nU3ByaXRlcz81MDA6MWUzO2lmKG4uZGF0YXNldC5pbmRleCE9PWUuZGF0YXNldC5pbmRleCYmIW4uZGF0YXNldC5kZWxldGluZyl7bi5kYXRhc2V0LmRlbGV0aW5nPSEwO3ZhciBhPXQuY3VycmVudEltYWdlQ29udGFpbmVyO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLnJlbW92ZUNoaWxkKG4pLHQucGxheWVyLmRlYnVnLmxvZygiUmVtb3ZpbmcgdGh1bWI6ICIuY29uY2F0KG4uZGF0YXNldC5maWxlbmFtZSkpfSxpKX19fSl9fSx7a2V5OiJwcmVsb2FkTmVhcmJ5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oaSl7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPXQudGh1bWJuYWlsc1swXS5mcmFtZXNbZV0udGV4dDtpZih0LnNob3dpbmdUaHVtYkZpbGVuYW1lPT09YSl7dmFyIHM7cz1uP3QudGh1bWJuYWlsc1swXS5mcmFtZXMuc2xpY2UoZSk6dC50aHVtYm5haWxzWzBdLmZyYW1lcy5zbGljZSgwLGUpLnJldmVyc2UoKTt2YXIgcj0hMTtzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXh0O2lmKG4hPT1hJiYhdC5sb2FkZWRJbWFnZXMuaW5jbHVkZXMobikpe3I9ITAsdC5wbGF5ZXIuZGVidWcubG9nKCJQcmVsb2FkaW5nIHRodW1iIGZpbGVuYW1lOiAiLmNvbmNhdChuKSk7dmFyIHM9dC50aHVtYm5haWxzWzBdLnVybFByZWZpeCtuLG89bmV3IEltYWdlO28uc3JjPXMsby5vbmxvYWQ9ZnVuY3Rpb24oKXt0LnBsYXllci5kZWJ1Zy5sb2coIlByZWxvYWRlZCB0aHVtYiBmaWxlbmFtZTogIi5jb25jYXQobikpLHQubG9hZGVkSW1hZ2VzLmluY2x1ZGVzKG4pfHx0LmxvYWRlZEltYWdlcy5wdXNoKG4pLGkoKX19fSkscnx8aSgpfX0sMzAwKX0pfX0se2tleToiZ2V0SGlnaGVyUXVhbGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIGE9dGhpcztpZihlPHRoaXMudGh1bWJuYWlscy5sZW5ndGgtMSl7dmFyIHM9dC5uYXR1cmFsSGVpZ2h0O3RoaXMudXNpbmdTcHJpdGVzJiYocz1uLmgpLHM8dGhpcy50aHVtYkNvbnRhaW5lckhlaWdodCYmc2V0VGltZW91dChmdW5jdGlvbigpe2Euc2hvd2luZ1RodW1iRmlsZW5hbWU9PT1pJiYoYS5wbGF5ZXIuZGVidWcubG9nKCJTaG93aW5nIGhpZ2hlciBxdWFsaXR5IHRodW1iIGZvcjogIi5jb25jYXQoaSkpLGEubG9hZEltYWdlKGUrMSkpfSwzMDApfX19LHtrZXk6InRvZ2dsZVRodW1iQ29udGFpbmVyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0sdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG49dGhpcy5wbGF5ZXIuY29uZmlnLmNsYXNzTmFtZXMucHJldmlld1RodW1ibmFpbHMudGh1bWJDb250YWluZXJTaG93bjt0aGlzLmVsZW1lbnRzLnRodW1iLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKG4sZSksIWUmJnQmJih0aGlzLnNob3dpbmdUaHVtYj1udWxsLHRoaXMuc2hvd2luZ1RodW1iRmlsZW5hbWU9bnVsbCl9fSx7a2V5OiJ0b2dnbGVTY3J1YmJpbmdDb250YWluZXIiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXSx0PXRoaXMucGxheWVyLmNvbmZpZy5jbGFzc05hbWVzLnByZXZpZXdUaHVtYm5haWxzLnNjcnViYmluZ0NvbnRhaW5lclNob3duO3RoaXMuZWxlbWVudHMuc2NydWJiaW5nLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKHQsZSksZXx8KHRoaXMuc2hvd2luZ1RodW1iPW51bGwsdGhpcy5zaG93aW5nVGh1bWJGaWxlbmFtZT1udWxsKX19LHtrZXk6ImRldGVybWluZUNvbnRhaW5lckF1dG9TaXppbmciLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cy50aHVtYi5pbWFnZUNvbnRhaW5lci5jbGllbnRIZWlnaHQ+MjAmJih0aGlzLnNpemVTcGVjaWZpZWRJbkNTUz0hMCl9fSx7a2V5OiJzZXRUaHVtYkNvbnRhaW5lclNpemVBbmRQb3MiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuc2l6ZVNwZWNpZmllZEluQ1NTKXt2YXIgZT1NYXRoLmZsb29yKHRoaXMudGh1bWJDb250YWluZXJIZWlnaHQqdGhpcy50aHVtYkFzcGVjdFJhdGlvKTt0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodD0iIi5jb25jYXQodGhpcy50aHVtYkNvbnRhaW5lckhlaWdodCwicHgiKSx0aGlzLmVsZW1lbnRzLnRodW1iLmltYWdlQ29udGFpbmVyLnN0eWxlLndpZHRoPSIiLmNvbmNhdChlLCJweCIpfXRoaXMuc2V0VGh1bWJDb250YWluZXJQb3MoKX19LHtrZXk6InNldFRodW1iQ29udGFpbmVyUG9zIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGxheWVyLmVsZW1lbnRzLnByb2dyZXNzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHQ9dGhpcy5wbGF5ZXIuZWxlbWVudHMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49dGhpcy5lbGVtZW50cy50aHVtYi5jb250YWluZXIsaT10LmxlZnQtZS5sZWZ0KzEwLGE9dC5yaWdodC1lLmxlZnQtbi5jbGllbnRXaWR0aC0xMCxzPXRoaXMubW91c2VQb3NYLWUubGVmdC1uLmNsaWVudFdpZHRoLzI7czxpJiYocz1pKSxzPmEmJihzPWEpLG4uc3R5bGUubGVmdD0iIi5jb25jYXQocywicHgiKX19LHtrZXk6InNldFNjcnViYmluZ0NvbnRhaW5lclNpemUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyLnN0eWxlLndpZHRoPSIiLmNvbmNhdCh0aGlzLnBsYXllci5tZWRpYS5jbGllbnRXaWR0aCwicHgiKSx0aGlzLmVsZW1lbnRzLnNjcnViYmluZy5jb250YWluZXIuc3R5bGUuaGVpZ2h0PSIiLmNvbmNhdCh0aGlzLnBsYXllci5tZWRpYS5jbGllbnRXaWR0aC90aGlzLnRodW1iQXNwZWN0UmF0aW8sInB4Iil9fSx7a2V5OiJzZXRJbWFnZVNpemVBbmRPZmZzZXQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy51c2luZ1Nwcml0ZXMpe3ZhciBuPXRoaXMudGh1bWJDb250YWluZXJIZWlnaHQvdC5oO2Uuc3R5bGUuaGVpZ2h0PSIiLmNvbmNhdChNYXRoLmZsb29yKGUubmF0dXJhbEhlaWdodCpuKSwicHgiKSxlLnN0eWxlLndpZHRoPSIiLmNvbmNhdChNYXRoLmZsb29yKGUubmF0dXJhbFdpZHRoKm4pLCJweCIpLGUuc3R5bGUubGVmdD0iLSIuY29uY2F0KHQueCpuLCJweCIpLGUuc3R5bGUudG9wPSItIi5jb25jYXQodC55Km4sInB4Iil9fX0se2tleToiZW5hYmxlZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWVyLmlzSFRNTDUmJnRoaXMucGxheWVyLmlzVmlkZW8mJnRoaXMucGxheWVyLmNvbmZpZy5wcmV2aWV3VGh1bWJuYWlscy5lbmFibGVkfX0se2tleToiY3VycmVudEltYWdlQ29udGFpbmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3VzZURvd24/dGhpcy5lbGVtZW50cy5zY3J1YmJpbmcuY29udGFpbmVyOnRoaXMuZWxlbWVudHMudGh1bWIuaW1hZ2VDb250YWluZXJ9fSx7a2V5OiJ1c2luZ1Nwcml0ZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRodW1ibmFpbHNbMF0uZnJhbWVzWzBdKS5pbmNsdWRlcygidyIpfX0se2tleToidGh1bWJBc3BlY3RSYXRpbyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNpbmdTcHJpdGVzP3RoaXMudGh1bWJuYWlsc1swXS5mcmFtZXNbMF0udy90aGlzLnRodW1ibmFpbHNbMF0uZnJhbWVzWzBdLmg6dGhpcy50aHVtYm5haWxzWzBdLndpZHRoL3RoaXMudGh1bWJuYWlsc1swXS5oZWlnaHR9fSx7a2V5OiJ0aHVtYkNvbnRhaW5lckhlaWdodCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW91c2VEb3duP01hdGguZmxvb3IodGhpcy5wbGF5ZXIubWVkaWEuY2xpZW50V2lkdGgvdGhpcy50aHVtYkFzcGVjdFJhdGlvKTpNYXRoLmZsb29yKHRoaXMucGxheWVyLm1lZGlhLmNsaWVudFdpZHRoL3RoaXMudGh1bWJBc3BlY3RSYXRpby80KX19LHtrZXk6ImN1cnJlbnRJbWFnZUVsZW1lbnQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlRG93bj90aGlzLmN1cnJlbnRTY3J1YmJpbmdJbWFnZUVsZW1lbnQ6dGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5tb3VzZURvd24/dGhpcy5jdXJyZW50U2NydWJiaW5nSW1hZ2VFbGVtZW50PWU6dGhpcy5jdXJyZW50VGh1bWJuYWlsSW1hZ2VFbGVtZW50PWV9fV0pLHR9KCksJGU9e2luc2VydEVsZW1lbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztOLnN0cmluZyh0KT9VKGUsdGhpcy5tZWRpYSx7c3JjOnR9KTpOLmFycmF5KHQpJiZ0LmZvckVhY2goZnVuY3Rpb24odCl7VShlLG4ubWVkaWEsdCl9KX0sY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7RChlLCJzb3VyY2VzLmxlbmd0aCIpPyhsZS5jYW5jZWxSZXF1ZXN0cy5jYWxsKHRoaXMpLHRoaXMuZGVzdHJveS5jYWxsKHRoaXMsZnVuY3Rpb24oKXt0Lm9wdGlvbnMucXVhbGl0eT1bXSxXKHQubWVkaWEpLHQubWVkaWE9bnVsbCxOLmVsZW1lbnQodC5lbGVtZW50cy5jb250YWluZXIpJiZ0LmVsZW1lbnRzLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7dmFyIG49ZS5zb3VyY2VzLGk9ZS50eXBlLHM9YShuLDEpWzBdLHI9cy5wcm92aWRlcixvPXZvaWQgMD09PXI/TGUuaHRtbDU6cixsPXMuc3JjLGM9Imh0bWw1Ij09PW8/aToiZGl2Iix1PSJodG1sNSI9PT1vP3t9OntzcmM6bH07T2JqZWN0LmFzc2lnbih0LHtwcm92aWRlcjpvLHR5cGU6aSxzdXBwb3J0ZWQ6aWUuY2hlY2soaSxvLHQuY29uZmlnLnBsYXlzaW5saW5lKSxtZWRpYTpCKGMsdSl9KSx0LmVsZW1lbnRzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0Lm1lZGlhKSxOLmJvb2xlYW4oZS5hdXRvcGxheSkmJih0LmNvbmZpZy5hdXRvcGxheT1lLmF1dG9wbGF5KSx0LmlzSFRNTDUmJih0LmNvbmZpZy5jcm9zc29yaWdpbiYmdC5tZWRpYS5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiwiIiksdC5jb25maWcuYXV0b3BsYXkmJnQubWVkaWEuc2V0QXR0cmlidXRlKCJhdXRvcGxheSIsIiIpLE4uZW1wdHkoZS5wb3N0ZXIpfHwodC5wb3N0ZXI9ZS5wb3N0ZXIpLHQuY29uZmlnLmxvb3AuYWN0aXZlJiZ0Lm1lZGlhLnNldEF0dHJpYnV0ZSgibG9vcCIsIiIpLHQuY29uZmlnLm11dGVkJiZ0Lm1lZGlhLnNldEF0dHJpYnV0ZSgibXV0ZWQiLCIiKSx0LmNvbmZpZy5wbGF5c2lubGluZSYmdC5tZWRpYS5zZXRBdHRyaWJ1dGUoInBsYXlzaW5saW5lIiwiIikpLEZlLmFkZFN0eWxlSG9vay5jYWxsKHQpLHQuaXNIVE1MNSYmJGUuaW5zZXJ0RWxlbWVudHMuY2FsbCh0LCJzb3VyY2UiLG4pLHQuY29uZmlnLnRpdGxlPWUudGl0bGUsUWUuc2V0dXAuY2FsbCh0KSx0LmlzSFRNTDUmJk9iamVjdC5rZXlzKGUpLmluY2x1ZGVzKCJ0cmFja3MiKSYmJGUuaW5zZXJ0RWxlbWVudHMuY2FsbCh0LCJ0cmFjayIsZS50cmFja3MpLCh0LmlzSFRNTDV8fHQuaXNFbWJlZCYmIXQuc3VwcG9ydGVkLnVpKSYmRmUuYnVpbGQuY2FsbCh0KSx0LmlzSFRNTDUmJnQubWVkaWEubG9hZCgpLHQucHJldmlld1RodW1ibmFpbHMmJnQucHJldmlld1RodW1ibmFpbHMubG9hZCgpLHQuZnVsbHNjcmVlbi51cGRhdGUoKX0sITApKTp0aGlzLmRlYnVnLndhcm4oIkludmFsaWQgc291cmNlIGZvcm1hdCIpfX07dmFyIEdlLFplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuLGkpe3ZhciBhPXRoaXM7aWYoZSh0aGlzLHQpLHRoaXMudGltZXJzPXt9LHRoaXMucmVhZHk9ITEsdGhpcy5sb2FkaW5nPSExLHRoaXMuZmFpbGVkPSExLHRoaXMudG91Y2g9aWUudG91Y2gsdGhpcy5tZWRpYT1uLE4uc3RyaW5nKHRoaXMubWVkaWEpJiYodGhpcy5tZWRpYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMubWVkaWEpKSwod2luZG93LmpRdWVyeSYmdGhpcy5tZWRpYSBpbnN0YW5jZW9mIGpRdWVyeXx8Ti5ub2RlTGlzdCh0aGlzLm1lZGlhKXx8Ti5hcnJheSh0aGlzLm1lZGlhKSkmJih0aGlzLm1lZGlhPXRoaXMubWVkaWFbMF0pLHRoaXMuY29uZmlnPUYoe30sTmUsdC5kZWZhdWx0cyxpfHx7fSxmdW5jdGlvbigpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLm1lZGlhLmdldEF0dHJpYnV0ZSgiZGF0YS1wbHlyLWNvbmZpZyIpKX1jYXRjaChlKXtyZXR1cm57fX19KCkpLHRoaXMuZWxlbWVudHM9e2NvbnRhaW5lcjpudWxsLGNhcHRpb25zOm51bGwsYnV0dG9uczp7fSxkaXNwbGF5Ont9LHByb2dyZXNzOnt9LGlucHV0czp7fSxzZXR0aW5nczp7cG9wdXA6bnVsbCxtZW51Om51bGwscGFuZWxzOnt9LGJ1dHRvbnM6e319fSx0aGlzLmNhcHRpb25zPXthY3RpdmU6bnVsbCxjdXJyZW50VHJhY2s6LTEsbWV0YTpuZXcgV2Vha01hcH0sdGhpcy5mdWxsc2NyZWVuPXthY3RpdmU6ITF9LHRoaXMub3B0aW9ucz17c3BlZWQ6W10scXVhbGl0eTpbXX0sdGhpcy5kZWJ1Zz1uZXcgT2UodGhpcy5jb25maWcuZGVidWcpLHRoaXMuZGVidWcubG9nKCJDb25maWciLHRoaXMuY29uZmlnKSx0aGlzLmRlYnVnLmxvZygiU3VwcG9ydCIsaWUpLCFOLm51bGxPclVuZGVmaW5lZCh0aGlzLm1lZGlhKSYmTi5lbGVtZW50KHRoaXMubWVkaWEpKWlmKHRoaXMubWVkaWEucGx5cil0aGlzLmRlYnVnLndhcm4oIlRhcmdldCBhbHJlYWR5IHNldHVwIik7ZWxzZSBpZih0aGlzLmNvbmZpZy5lbmFibGVkKWlmKGllLmNoZWNrKCkuYXBpKXt2YXIgcz10aGlzLm1lZGlhLmNsb25lTm9kZSghMCk7cy5hdXRvcGxheT0hMSx0aGlzLmVsZW1lbnRzLm9yaWdpbmFsPXM7dmFyIHI9dGhpcy5tZWRpYS50YWdOYW1lLnRvTG93ZXJDYXNlKCksbz1udWxsLGw9bnVsbDtzd2l0Y2gocil7Y2FzZSJkaXYiOmlmKG89dGhpcy5tZWRpYS5xdWVyeVNlbGVjdG9yKCJpZnJhbWUiKSxOLmVsZW1lbnQobykpe2lmKGw9RWUoby5nZXRBdHRyaWJ1dGUoInNyYyIpKSx0aGlzLnByb3ZpZGVyPWZ1bmN0aW9uKGUpe3JldHVybi9eKGh0dHBzPzpcL1wvKT8od3d3XC4pPyh5b3V0dWJlXC5jb218eW91dHViZS1ub2Nvb2tpZVwuY29tfHlvdXR1XC4/YmUpXC8uKyQvLnRlc3QoZSk/TGUueW91dHViZTovXmh0dHBzPzpcL1wvcGxheWVyLnZpbWVvLmNvbVwvdmlkZW9cL1xkezAsOX0oPz1cYnxcLykvLnRlc3QoZSk/TGUudmltZW86bnVsbH0obC50b1N0cmluZygpKSx0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcj10aGlzLm1lZGlhLHRoaXMubWVkaWE9byx0aGlzLmVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc05hbWU9IiIsbC5zZWFyY2gubGVuZ3RoKXt2YXIgYz1bIjEiLCJ0cnVlIl07Yy5pbmNsdWRlcyhsLnNlYXJjaFBhcmFtcy5nZXQoImF1dG9wbGF5IikpJiYodGhpcy5jb25maWcuYXV0b3BsYXk9ITApLGMuaW5jbHVkZXMobC5zZWFyY2hQYXJhbXMuZ2V0KCJsb29wIikpJiYodGhpcy5jb25maWcubG9vcC5hY3RpdmU9ITApLHRoaXMuaXNZb3VUdWJlPyh0aGlzLmNvbmZpZy5wbGF5c2lubGluZT1jLmluY2x1ZGVzKGwuc2VhcmNoUGFyYW1zLmdldCgicGxheXNpbmxpbmUiKSksdGhpcy5jb25maWcueW91dHViZS5obD1sLnNlYXJjaFBhcmFtcy5nZXQoImhsIikpOnRoaXMuY29uZmlnLnBsYXlzaW5saW5lPSEwfX1lbHNlIHRoaXMucHJvdmlkZXI9dGhpcy5tZWRpYS5nZXRBdHRyaWJ1dGUodGhpcy5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5wcm92aWRlciksdGhpcy5tZWRpYS5yZW1vdmVBdHRyaWJ1dGUodGhpcy5jb25maWcuYXR0cmlidXRlcy5lbWJlZC5wcm92aWRlcik7aWYoTi5lbXB0eSh0aGlzLnByb3ZpZGVyKXx8IU9iamVjdC5rZXlzKExlKS5pbmNsdWRlcyh0aGlzLnByb3ZpZGVyKSlyZXR1cm4gdm9pZCB0aGlzLmRlYnVnLmVycm9yKCJTZXR1cCBmYWlsZWQ6IEludmFsaWQgcHJvdmlkZXIiKTt0aGlzLnR5cGU9SWUudmlkZW87YnJlYWs7Y2FzZSJ2aWRlbyI6Y2FzZSJhdWRpbyI6dGhpcy50eXBlPXIsdGhpcy5wcm92aWRlcj1MZS5odG1sNSx0aGlzLm1lZGlhLmhhc0F0dHJpYnV0ZSgiY3Jvc3NvcmlnaW4iKSYmKHRoaXMuY29uZmlnLmNyb3Nzb3JpZ2luPSEwKSx0aGlzLm1lZGlhLmhhc0F0dHJpYnV0ZSgiYXV0b3BsYXkiKSYmKHRoaXMuY29uZmlnLmF1dG9wbGF5PSEwKSwodGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoInBsYXlzaW5saW5lIil8fHRoaXMubWVkaWEuaGFzQXR0cmlidXRlKCJ3ZWJraXQtcGxheXNpbmxpbmUiKSkmJih0aGlzLmNvbmZpZy5wbGF5c2lubGluZT0hMCksdGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoIm11dGVkIikmJih0aGlzLmNvbmZpZy5tdXRlZD0hMCksdGhpcy5tZWRpYS5oYXNBdHRyaWJ1dGUoImxvb3AiKSYmKHRoaXMuY29uZmlnLmxvb3AuYWN0aXZlPSEwKTticmVhaztkZWZhdWx0OnJldHVybiB2b2lkIHRoaXMuZGVidWcuZXJyb3IoIlNldHVwIGZhaWxlZDogdW5zdXBwb3J0ZWQgdHlwZSIpfXRoaXMuc3VwcG9ydGVkPWllLmNoZWNrKHRoaXMudHlwZSx0aGlzLnByb3ZpZGVyLHRoaXMuY29uZmlnLnBsYXlzaW5saW5lKSx0aGlzLnN1cHBvcnRlZC5hcGk/KHRoaXMuZXZlbnRMaXN0ZW5lcnM9W10sdGhpcy5saXN0ZW5lcnM9bmV3IFJlKHRoaXMpLHRoaXMuc3RvcmFnZT1uZXcgeWUodGhpcyksdGhpcy5tZWRpYS5wbHlyPXRoaXMsTi5lbGVtZW50KHRoaXMuZWxlbWVudHMuY29udGFpbmVyKXx8KHRoaXMuZWxlbWVudHMuY29udGFpbmVyPUIoImRpdiIse3RhYmluZGV4OjB9KSxSKHRoaXMubWVkaWEsdGhpcy5lbGVtZW50cy5jb250YWluZXIpKSxGZS5hZGRTdHlsZUhvb2suY2FsbCh0aGlzKSxRZS5zZXR1cC5jYWxsKHRoaXMpLHRoaXMuY29uZmlnLmRlYnVnJiZPLmNhbGwodGhpcyx0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcix0aGlzLmNvbmZpZy5ldmVudHMuam9pbigiICIpLGZ1bmN0aW9uKGUpe2EuZGVidWcubG9nKCJldmVudDogIi5jb25jYXQoZS50eXBlKSl9KSwodGhpcy5pc0hUTUw1fHx0aGlzLmlzRW1iZWQmJiF0aGlzLnN1cHBvcnRlZC51aSkmJkZlLmJ1aWxkLmNhbGwodGhpcyksdGhpcy5saXN0ZW5lcnMuY29udGFpbmVyKCksdGhpcy5saXN0ZW5lcnMuZ2xvYmFsKCksdGhpcy5mdWxsc2NyZWVuPW5ldyBIZSh0aGlzKSx0aGlzLmNvbmZpZy5hZHMuZW5hYmxlZCYmKHRoaXMuYWRzPW5ldyBYZSh0aGlzKSksdGhpcy5pc0hUTUw1JiZ0aGlzLmNvbmZpZy5hdXRvcGxheSYmc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBhLnBsYXkoKX0sMTApLHRoaXMubGFzdFNlZWtUaW1lPTAsdGhpcy5jb25maWcucHJldmlld1RodW1ibmFpbHMuZW5hYmxlZCYmKHRoaXMucHJldmlld1RodW1ibmFpbHM9bmV3IEplKHRoaXMpKSk6dGhpcy5kZWJ1Zy5lcnJvcigiU2V0dXAgZmFpbGVkOiBubyBzdXBwb3J0Iil9ZWxzZSB0aGlzLmRlYnVnLmVycm9yKCJTZXR1cCBmYWlsZWQ6IG5vIHN1cHBvcnQiKTtlbHNlIHRoaXMuZGVidWcuZXJyb3IoIlNldHVwIGZhaWxlZDogZGlzYWJsZWQgYnkgY29uZmlnIik7ZWxzZSB0aGlzLmRlYnVnLmVycm9yKCJTZXR1cCBmYWlsZWQ6IG5vIHN1aXRhYmxlIGVsZW1lbnQgcGFzc2VkIil9cmV0dXJuIG4odCxbe2tleToicGxheSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBOLmZ1bmN0aW9uKHRoaXMubWVkaWEucGxheSk/KHRoaXMuYWRzJiZ0aGlzLmFkcy5lbmFibGVkJiZ0aGlzLmFkcy5tYW5hZ2VyUHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuYWRzLnBsYXkoKX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGUubWVkaWEucGxheSgpfSksdGhpcy5tZWRpYS5wbGF5KCkpOm51bGx9fSx7a2V5OiJwYXVzZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnBsYXlpbmcmJk4uZnVuY3Rpb24odGhpcy5tZWRpYS5wYXVzZSkmJnRoaXMubWVkaWEucGF1c2UoKX19LHtrZXk6InRvZ2dsZVBsYXkiLHZhbHVlOmZ1bmN0aW9uKGUpeyhOLmJvb2xlYW4oZSk/ZTohdGhpcy5wbGF5aW5nKT90aGlzLnBsYXkoKTp0aGlzLnBhdXNlKCl9fSx7a2V5OiJzdG9wIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNIVE1MNT8odGhpcy5wYXVzZSgpLHRoaXMucmVzdGFydCgpKTpOLmZ1bmN0aW9uKHRoaXMubWVkaWEuc3RvcCkmJnRoaXMubWVkaWEuc3RvcCgpfX0se2tleToicmVzdGFydCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRUaW1lPTB9fSx7a2V5OiJyZXdpbmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY3VycmVudFRpbWU9dGhpcy5jdXJyZW50VGltZS0oTi5udW1iZXIoZSk/ZTp0aGlzLmNvbmZpZy5zZWVrVGltZSl9fSx7a2V5OiJmb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmN1cnJlbnRUaW1lPXRoaXMuY3VycmVudFRpbWUrKE4ubnVtYmVyKGUpP2U6dGhpcy5jb25maWcuc2Vla1RpbWUpfX0se2tleToiaW5jcmVhc2VWb2x1bWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWVkaWEubXV0ZWQ/MDp0aGlzLnZvbHVtZTt0aGlzLnZvbHVtZT10KyhOLm51bWJlcihlKT9lOjApfX0se2tleToiZGVjcmVhc2VWb2x1bWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaW5jcmVhc2VWb2x1bWUoLWUpfX0se2tleToidG9nZ2xlQ2FwdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe1BlLnRvZ2dsZS5jYWxsKHRoaXMsZSwhMSl9fSx7a2V5OiJhaXJwbGF5Iix2YWx1ZTpmdW5jdGlvbigpe2llLmFpcnBsYXkmJnRoaXMubWVkaWEud2Via2l0U2hvd1BsYXliYWNrVGFyZ2V0UGlja2VyKCl9fSx7a2V5OiJ0b2dnbGVDb250cm9scyIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5zdXBwb3J0ZWQudWkmJiF0aGlzLmlzQXVkaW8pe3ZhciB0PUoodGhpcy5lbGVtZW50cy5jb250YWluZXIsdGhpcy5jb25maWcuY2xhc3NOYW1lcy5oaWRlQ29udHJvbHMpLG49dm9pZCAwPT09ZT92b2lkIDA6IWUsaT1YKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLHRoaXMuY29uZmlnLmNsYXNzTmFtZXMuaGlkZUNvbnRyb2xzLG4pO2lmKGkmJnRoaXMuY29uZmlnLmNvbnRyb2xzLmluY2x1ZGVzKCJzZXR0aW5ncyIpJiYhTi5lbXB0eSh0aGlzLmNvbmZpZy5zZXR0aW5ncykmJkFlLnRvZ2dsZU1lbnUuY2FsbCh0aGlzLCExKSxpIT09dCl7dmFyIGE9aT8iY29udHJvbHNoaWRkZW4iOiJjb250cm9sc3Nob3duIjtILmNhbGwodGhpcyx0aGlzLm1lZGlhLGEpfXJldHVybiFpfXJldHVybiExfX0se2tleToib24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Ty5jYWxsKHRoaXMsdGhpcy5lbGVtZW50cy5jb250YWluZXIsZSx0KX19LHtrZXk6Im9uY2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cS5jYWxsKHRoaXMsdGhpcy5lbGVtZW50cy5jb250YWluZXIsZSx0KX19LHtrZXk6Im9mZiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtqKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLGUsdCl9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtpZih0aGlzLnJlYWR5KXt2YXIgaT1mdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9IiIsdC5lbWJlZD1udWxsLG4/KE9iamVjdC5rZXlzKHQuZWxlbWVudHMpLmxlbmd0aCYmKFcodC5lbGVtZW50cy5idXR0b25zLnBsYXkpLFcodC5lbGVtZW50cy5jYXB0aW9ucyksVyh0LmVsZW1lbnRzLmNvbnRyb2xzKSxXKHQuZWxlbWVudHMud3JhcHBlciksdC5lbGVtZW50cy5idXR0b25zLnBsYXk9bnVsbCx0LmVsZW1lbnRzLmNhcHRpb25zPW51bGwsdC5lbGVtZW50cy5jb250cm9scz1udWxsLHQuZWxlbWVudHMud3JhcHBlcj1udWxsKSxOLmZ1bmN0aW9uKGUpJiZlKCkpOihmdW5jdGlvbigpe3RoaXMmJnRoaXMuZXZlbnRMaXN0ZW5lcnMmJih0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbGVtZW50LG49ZS50eXBlLGk9ZS5jYWxsYmFjayxhPWUub3B0aW9uczt0LnJlbW92ZUV2ZW50TGlzdGVuZXIobixpLGEpfSksdGhpcy5ldmVudExpc3RlbmVycz1bXSl9LmNhbGwodCksSyh0LmVsZW1lbnRzLm9yaWdpbmFsLHQuZWxlbWVudHMuY29udGFpbmVyKSxILmNhbGwodCx0LmVsZW1lbnRzLm9yaWdpbmFsLCJkZXN0cm95ZWQiLCEwKSxOLmZ1bmN0aW9uKGUpJiZlLmNhbGwodC5lbGVtZW50cy5vcmlnaW5hbCksdC5yZWFkeT0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5lbGVtZW50cz1udWxsLHQubWVkaWE9bnVsbH0sMjAwKSl9O3RoaXMuc3RvcCgpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5sb2FkaW5nKSxjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuY29udHJvbHMpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZXNpemVkKSx0aGlzLmlzSFRNTDU/KEZlLnRvZ2dsZU5hdGl2ZUNvbnRyb2xzLmNhbGwodGhpcywhMCksaSgpKTp0aGlzLmlzWW91VHViZT8oY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVycy5idWZmZXJpbmcpLGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcnMucGxheWluZyksbnVsbCE9PXRoaXMuZW1iZWQmJk4uZnVuY3Rpb24odGhpcy5lbWJlZC5kZXN0cm95KSYmdGhpcy5lbWJlZC5kZXN0cm95KCksaSgpKTp0aGlzLmlzVmltZW8mJihudWxsIT09dGhpcy5lbWJlZCYmdGhpcy5lbWJlZC51bmxvYWQoKS50aGVuKGkpLHNldFRpbWVvdXQoaSwyMDApKX19fSx7a2V5OiJzdXBwb3J0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGllLm1pbWUuY2FsbCh0aGlzLGUpfX0se2tleToiaXNIVE1MNSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdmlkZXI9PT1MZS5odG1sNX19LHtrZXk6ImlzRW1iZWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzWW91VHViZXx8dGhpcy5pc1ZpbWVvfX0se2tleToiaXNZb3VUdWJlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm92aWRlcj09PUxlLnlvdXR1YmV9fSx7a2V5OiJpc1ZpbWVvIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm92aWRlcj09PUxlLnZpbWVvfX0se2tleToiaXNWaWRlbyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZT09PUllLnZpZGVvfX0se2tleToiaXNBdWRpbyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZT09PUllLmF1ZGlvfX0se2tleToicGxheWluZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5yZWFkeSYmIXRoaXMucGF1c2VkJiYhdGhpcy5lbmRlZCl9fSx7a2V5OiJwYXVzZWQiLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMubWVkaWEucGF1c2VkKX19LHtrZXk6InN0b3BwZWQiLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMucGF1c2VkJiYwPT09dGhpcy5jdXJyZW50VGltZSl9fSx7a2V5OiJlbmRlZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5lbmRlZCl9fSx7a2V5OiJjdXJyZW50VGltZSIsc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMuZHVyYXRpb24pe3ZhciB0PU4ubnVtYmVyKGUpJiZlPjA7dGhpcy5tZWRpYS5jdXJyZW50VGltZT10P01hdGgubWluKGUsdGhpcy5kdXJhdGlvbik6MCx0aGlzLmRlYnVnLmxvZygiU2Vla2luZyB0byAiLmNvbmNhdCh0aGlzLmN1cnJlbnRUaW1lLCIgc2Vjb25kcyIpKX19LGdldDpmdW5jdGlvbigpe3JldHVybiBOdW1iZXIodGhpcy5tZWRpYS5jdXJyZW50VGltZSl9fSx7a2V5OiJidWZmZXJlZCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWRpYS5idWZmZXJlZDtyZXR1cm4gTi5udW1iZXIoZSk/ZTplJiZlLmxlbmd0aCYmdGhpcy5kdXJhdGlvbj4wP2UuZW5kKDApL3RoaXMuZHVyYXRpb246MH19LHtrZXk6InNlZWtpbmciLGdldDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMubWVkaWEuc2Vla2luZyl9fSx7a2V5OiJkdXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9cGFyc2VGbG9hdCh0aGlzLmNvbmZpZy5kdXJhdGlvbiksdD0odGhpcy5tZWRpYXx8e30pLmR1cmF0aW9uLG49Ti5udW1iZXIodCkmJnQhPT0xLzA/dDowO3JldHVybiBlfHxufX0se2tleToidm9sdW1lIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtOLnN0cmluZyh0KSYmKHQ9TnVtYmVyKHQpKSxOLm51bWJlcih0KXx8KHQ9dGhpcy5zdG9yYWdlLmdldCgidm9sdW1lIikpLE4ubnVtYmVyKHQpfHwodD10aGlzLmNvbmZpZy52b2x1bWUpLHQ+MSYmKHQ9MSksdDwwJiYodD0wKSx0aGlzLmNvbmZpZy52b2x1bWU9dCx0aGlzLm1lZGlhLnZvbHVtZT10LCFOLmVtcHR5KGUpJiZ0aGlzLm11dGVkJiZ0PjAmJih0aGlzLm11dGVkPSExKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE51bWJlcih0aGlzLm1lZGlhLnZvbHVtZSl9fSx7a2V5OiJtdXRlZCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWU7Ti5ib29sZWFuKHQpfHwodD10aGlzLnN0b3JhZ2UuZ2V0KCJtdXRlZCIpKSxOLmJvb2xlYW4odCl8fCh0PXRoaXMuY29uZmlnLm11dGVkKSx0aGlzLmNvbmZpZy5tdXRlZD10LHRoaXMubWVkaWEubXV0ZWQ9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5tdXRlZCl9fSx7a2V5OiJoYXNBdWRpbyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNIVE1MNXx8KCEhdGhpcy5pc0F1ZGlvfHwoQm9vbGVhbih0aGlzLm1lZGlhLm1vekhhc0F1ZGlvKXx8Qm9vbGVhbih0aGlzLm1lZGlhLndlYmtpdEF1ZGlvRGVjb2RlZEJ5dGVDb3VudCl8fEJvb2xlYW4odGhpcy5tZWRpYS5hdWRpb1RyYWNrcyYmdGhpcy5tZWRpYS5hdWRpb1RyYWNrcy5sZW5ndGgpKSl9fSx7a2V5OiJzcGVlZCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1udWxsO04ubnVtYmVyKGUpJiYobj1lKSxOLm51bWJlcihuKXx8KG49dGhpcy5zdG9yYWdlLmdldCgic3BlZWQiKSksTi5udW1iZXIobil8fChuPXRoaXMuY29uZmlnLnNwZWVkLnNlbGVjdGVkKTt2YXIgaT10aGlzLm1pbmltdW1TcGVlZCxhPXRoaXMubWF4aW11bVNwZWVkO249ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCx0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjI1NTtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSx0KSxuKX0obixpLGEpLHRoaXMuY29uZmlnLnNwZWVkLnNlbGVjdGVkPW4sc2V0VGltZW91dChmdW5jdGlvbigpe3QubWVkaWEucGxheWJhY2tSYXRlPW59LDApfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTnVtYmVyKHRoaXMubWVkaWEucGxheWJhY2tSYXRlKX19LHtrZXk6Im1pbmltdW1TcGVlZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNZb3VUdWJlP01hdGgubWluLmFwcGx5KE1hdGgscyh0aGlzLm9wdGlvbnMuc3BlZWQpKTp0aGlzLmlzVmltZW8/LjU6LjA2MjV9fSx7a2V5OiJtYXhpbXVtU3BlZWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzWW91VHViZT9NYXRoLm1heC5hcHBseShNYXRoLHModGhpcy5vcHRpb25zLnNwZWVkKSk6dGhpcy5pc1ZpbWVvPzI6MTZ9fSx7a2V5OiJxdWFsaXR5IixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb25maWcucXVhbGl0eSxuPXRoaXMub3B0aW9ucy5xdWFsaXR5O2lmKG4ubGVuZ3RoKXt2YXIgaT1bIU4uZW1wdHkoZSkmJk51bWJlcihlKSx0aGlzLnN0b3JhZ2UuZ2V0KCJxdWFsaXR5IiksdC5zZWxlY3RlZCx0LmRlZmF1bHRdLmZpbmQoTi5udW1iZXIpLGE9ITA7aWYoIW4uaW5jbHVkZXMoaSkpe3ZhciBzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE4uYXJyYXkoZSkmJmUubGVuZ3RoP2UucmVkdWNlKGZ1bmN0aW9uKGUsbil7cmV0dXJuIE1hdGguYWJzKG4tdCk8TWF0aC5hYnMoZS10KT9uOmV9KTpudWxsfShuLGkpO3RoaXMuZGVidWcud2FybigiVW5zdXBwb3J0ZWQgcXVhbGl0eSBvcHRpb246ICIuY29uY2F0KGksIiwgdXNpbmcgIikuY29uY2F0KHMsIiBpbnN0ZWFkIikpLGk9cyxhPSExfXQuc2VsZWN0ZWQ9aSx0aGlzLm1lZGlhLnF1YWxpdHk9aSxhJiZ0aGlzLnN0b3JhZ2Uuc2V0KHtxdWFsaXR5Oml9KX19LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lZGlhLnF1YWxpdHl9fSx7a2V5OiJsb29wIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Ti5ib29sZWFuKGUpP2U6dGhpcy5jb25maWcubG9vcC5hY3RpdmU7dGhpcy5jb25maWcubG9vcC5hY3RpdmU9dCx0aGlzLm1lZGlhLmxvb3A9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5tZWRpYS5sb29wKX19LHtrZXk6InNvdXJjZSIsc2V0OmZ1bmN0aW9uKGUpeyRlLmNoYW5nZS5jYWxsKHRoaXMsZSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lZGlhLmN1cnJlbnRTcmN9fSx7a2V5OiJkb3dubG9hZCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb25maWcudXJscy5kb3dubG9hZDtyZXR1cm4gTi51cmwoZSk/ZTp0aGlzLnNvdXJjZX0sc2V0OmZ1bmN0aW9uKGUpe04udXJsKGUpJiYodGhpcy5jb25maWcudXJscy5kb3dubG9hZD1lLEFlLnNldERvd25sb2FkVXJsLmNhbGwodGhpcykpfX0se2tleToicG9zdGVyIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pc1ZpZGVvP0ZlLnNldFBvc3Rlci5jYWxsKHRoaXMsZSwhMSkuY2F0Y2goZnVuY3Rpb24oKXt9KTp0aGlzLmRlYnVnLndhcm4oIlBvc3RlciBjYW4gb25seSBiZSBzZXQgZm9yIHZpZGVvIil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlkZW8/dGhpcy5tZWRpYS5nZXRBdHRyaWJ1dGUoInBvc3RlciIpOm51bGx9fSx7a2V5OiJyYXRpbyIsZ2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNWaWRlbylyZXR1cm4gbnVsbDt2YXIgZT1zZShyZS5jYWxsKHRoaXMpKTtyZXR1cm4gTi5hcnJheShlKT9lLmpvaW4oIjoiKTplfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pc1ZpZGVvP04uc3RyaW5nKGUpJiZhZShlKT8odGhpcy5jb25maWcucmF0aW89ZSxvZS5jYWxsKHRoaXMpKTp0aGlzLmRlYnVnLmVycm9yKCJJbnZhbGlkIGFzcGVjdCByYXRpbyBzcGVjaWZpZWQgKCIuY29uY2F0KGUsIikiKSk6dGhpcy5kZWJ1Zy53YXJuKCJBc3BlY3QgcmF0aW8gY2FuIG9ubHkgYmUgc2V0IGZvciB2aWRlbyIpfX0se2tleToiYXV0b3BsYXkiLHNldDpmdW5jdGlvbihlKXt2YXIgdD1OLmJvb2xlYW4oZSk/ZTp0aGlzLmNvbmZpZy5hdXRvcGxheTt0aGlzLmNvbmZpZy5hdXRvcGxheT10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQm9vbGVhbih0aGlzLmNvbmZpZy5hdXRvcGxheSl9fSx7a2V5OiJjdXJyZW50VHJhY2siLHNldDpmdW5jdGlvbihlKXtQZS5zZXQuY2FsbCh0aGlzLGUsITEpfSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNhcHRpb25zLHQ9ZS50b2dnbGVkLG49ZS5jdXJyZW50VHJhY2s7cmV0dXJuIHQ/bjotMX19LHtrZXk6Imxhbmd1YWdlIixzZXQ6ZnVuY3Rpb24oZSl7UGUuc2V0TGFuZ3VhZ2UuY2FsbCh0aGlzLGUsITEpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4oUGUuZ2V0Q3VycmVudFRyYWNrLmNhbGwodGhpcyl8fHt9KS5sYW5ndWFnZX19LHtrZXk6InBpcCIsc2V0OmZ1bmN0aW9uKGUpe2lmKGllLnBpcCl7dmFyIHQ9Ti5ib29sZWFuKGUpP2U6IXRoaXMucGlwO04uZnVuY3Rpb24odGhpcy5tZWRpYS53ZWJraXRTZXRQcmVzZW50YXRpb25Nb2RlKSYmdGhpcy5tZWRpYS53ZWJraXRTZXRQcmVzZW50YXRpb25Nb2RlKHQ/TWU6eGUpLE4uZnVuY3Rpb24odGhpcy5tZWRpYS5yZXF1ZXN0UGljdHVyZUluUGljdHVyZSkmJighdGhpcy5waXAmJnQ/dGhpcy5tZWRpYS5yZXF1ZXN0UGljdHVyZUluUGljdHVyZSgpOnRoaXMucGlwJiYhdCYmZG9jdW1lbnQuZXhpdFBpY3R1cmVJblBpY3R1cmUoKSl9fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaWUucGlwP04uZW1wdHkodGhpcy5tZWRpYS53ZWJraXRQcmVzZW50YXRpb25Nb2RlKT90aGlzLm1lZGlhPT09ZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVsZW1lbnQ6dGhpcy5tZWRpYS53ZWJraXRQcmVzZW50YXRpb25Nb2RlPT09TWU6bnVsbH19XSxbe2tleToic3VwcG9ydGVkIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGllLmNoZWNrKGUsdCxuKX19LHtrZXk6ImxvYWRTcHJpdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGJlKGUsdCl9fSx7a2V5OiJzZXR1cCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9bnVsbDtyZXR1cm4gTi5zdHJpbmcoZSk/aT1BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSkpOk4ubm9kZUxpc3QoZSk/aT1BcnJheS5mcm9tKGUpOk4uYXJyYXkoZSkmJihpPWUuZmlsdGVyKE4uZWxlbWVudCkpLE4uZW1wdHkoaSk/bnVsbDppLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSxuKX0pfX1dKSx0fSgpO3JldHVybiBaZS5kZWZhdWx0cz0oR2U9TmUsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShHZSkpKSxaZX0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1wbHlyLmpzLm1hcAo=">
</script>
</head>
<body>
<video autoplay=true poster="{{ .VideoFilename }}.jpg" id="player" playsinline controls>
<source src="{{ .VideoFilename }}" type="video/mp4" />
</video>
<!-- <div class="footer">
This is an open source project, see here: <a href="https://github.com/distributed-mind/pagesaver" target="_blank">https://github.com/distributed-mind/pagesaver</a>
</div> -->
</body>
</html>
